import"./vue.ed337178.js";import{h as c}from"./http.ed4ad2d7.js";import{a as m}from"./table.b064dc6b.js";import I from"./Operation.1e66aec0.js";import{c as _,d as g}from"./element-plus.fda9d17d.js";import{Q as N,d as s,e as y}from"./@vue.7f0f1fa4.js";const S={adv_id:0,c_time:0,image:"",show_time:0,expire_time:0,content_type:"5",type:"1",link_title:"",link:"",bank_cities:"",status:"2",title:"",bank_cities_str:"",c_time_range:""},j=u=>c.fetchPost("/activityPlatform/adv/add",u),G=u=>c.fetchPost("/activityPlatform/adv/del",u),B=u=>c.fetchPost("/activityPlatform/adv/update",u),z=u=>c.fetchPost("/activityPlatform/adv/get",{adv_id:u}),L=u=>c.fetchPost("/activityPlatform/adv/list",u),q=()=>{const u=S,d=N({c_time_range:"",content_type:"",status:"",keywords:""}),h=s(0),A=s(""),a=s(u),i=s([]);y(i,()=>{const t=[];i.value.forEach(e=>{t.push(e[1])}),a.value.bank_cities=t.join(",")});const p=t=>{switch(parseInt(t.value)){case 1:return"\u56FE\u6587\u4FE1\u606F";case 2:return"\u6D3B\u52A8\u96C6\u5408";case 3:return"\u6D3B\u52A8\u63A8\u8350";case 4:return"\u4E13\u9898\u63A8\u8350";case 5:return"\u7B2C\u4E09\u65B9\u5916\u94FE";default:return"\u89C6\u9891\u4FE1\u606F"}},f=t=>{switch(parseInt(t.value)){case 1:return"\u4E0A\u67B6";case 2:return"\u4E0B\u67B6";default:return"\u8FC7\u671F"}},E=t=>{switch(t){case 1:return"\u8DF3\u8F6C\u7F51\u9875";default:return"\u8DF3\u8F6C\u5C0F\u7A0B\u5E8F"}},D=[{headerName:"\u6807\u9898",field:"title"},{headerName:"\u5185\u5BB9\u5206\u7C7B",field:"content_type",valueFormatter:p},{headerName:"\u72B6\u6001",field:"status",valueFormatter:f},{headerName:"\u521B\u5EFA\u65F6\u95F4",field:"c_time",valueFormatter:m},{headerName:"\u63A8\u8350\u65F6\u95F4",field:"show_time",valueGetter:t=>m({value:t.data.show_time})+" \u81F3 "+m({value:t.data.expire_time})},{headerName:"\u63A8\u8350\u57CE\u5E02",field:"bank_cities_str",flex:1},{width:240,headerName:"\u64CD\u4F5C",align:"center",pinned:"right",cellRendererSelector:t=>({component:I,show:!0,params:{data:t.data,refreshList(){n.value-=1,l()},updateStatus(){k(t.data)},deleteAdv(){T(t.data)}}})}],w=[],n=s(1),F=s(10);let r=s(w);const C=(t=()=>{})=>{z(a.value.adv_id).then(e=>{a.value=e.data,a.value.bank_cities.split(",").map(v=>{i.value.push([void 0,v])}),t.apply(null)}).catch(()=>{})},P=(t=e=>{})=>{j(a.value).then(e=>{t.apply(null,[e])}).catch(()=>{})},x=(t=()=>{})=>{B(a.value).then(e=>{t.apply(null)}).catch(()=>{})},k=t=>{_.confirm("\u66F4\u65B0\u5F53\u524D\u5E7F\u544A\u72B6\u6001?","\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{let e=parseInt(t.status,10)===1?"2":"1";B({adv_id:t.adv_id,status:e}).then(o=>{o.code===200&&(g({message:"\u66F4\u65B0\u6210\u529F",grouping:!0,type:"success"}),t=Object.assign(t,{status:e}))})}).catch(()=>{})},T=t=>{let{title:e,adv_id:o}=t,v=`\u5220\u9664\u5F53\u524D\u5E7F\u544A\u3010${e}\u3011?`;_.confirm(v,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{G({adv_id:o}).then(b=>{b.code===200&&(g({message:"\u5220\u9664\u6210\u529F",grouping:!0,type:"success"}),n.value-=1,l())})}).catch(()=>{})},l=(t=()=>{})=>{r.value.splice(0,r.value.length),L(Object.assign({page:n.value,size:F.value},d)).then(e=>{r.value=e.data.list,h.value=e.data.count,n.value+=1,t.apply(null)}).catch(()=>{})};return y(d,()=>{n.value=1,l()}),{adv:a,getAdv:C,addAdv:P,updateAdv:x,listAdv:l,advTotal:h,advList:r,advPage:n,advSize:F,advColumns:D,advFilters:d,advKeywords:A,getContentType:p,getStatus:f,getType:E,cities:i}};export{q as G};
