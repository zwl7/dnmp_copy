import"./vue.ed337178.js";import{k as m,i as u,o as w,c as _}from"./@vue.7f0f1fa4.js";const g={id:"editor"},y=m({__name:"Editor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(p,{emit:a}){const r=p,l=(o,n,e)=>{const s=o.blob(),c=new File([s],`image.${s.type.split("/")[1]}`,{type:s.type}),t=new XMLHttpRequest;t.withCredentials=!1,t.open("POST","https://apitest.wesais.cn/img/upload"),t.onload=function(){if(t.status!==200){e("HTTP Error:"+t.status);return}const d=JSON.parse(t.responseText);n(d)};const i=new FormData;i.append("image",c),t.send(i)};return u(()=>{window.tinymce.init({theme:"silver",height:"500px",width:"100%",selector:"#editor",language:"zh_CN",plugins:["powerpaste"],powerpaste_word_import:"merge",powerpaste_html_import:"merge",powerpaste_allow_local_images:!0,paste_data_images:!0,images_upload_handler:l,init_instance_callback:o=>{window.tinymce.activeEditor.setContent(r.modelValue),o.on("input",n=>{const e=window.tinymce.get(0).getContent();a("update:modelValue",e)}),o.on("ExecCommand",n=>{const e=window.tinymce.activeEditor.getContent();a("update:modelValue",e)}),o.on("keydown",n=>{const e=window.tinymce.activeEditor.getContent();a("update:modelValue",e)})}})}),(o,n)=>(w(),_("textarea",g))}});export{y as default};
