import{q as V,r as b,s as B}from"./element-plus.fda9d17d.js";import"./vue.ed337178.js";import{c as N,_ as P}from"./index.43a84b26.js";import{d as n,k as L,i as j,e as z,ag as F,o as s,c as m,X as x,W as u,u as i,l as d,a as I,_ as R,$ as v,a0 as D,Z as q}from"./@vue.7f0f1fa4.js";const M=()=>{const e=n("default"),p="30kb",l="jpg/jpeg/png/gif",c=n();return{template:e,getComponent:async()=>{N.currentRoute.value.name,e.value="default"},getApi:()=>{c.value="https://apitest.wesais.cn/img/upload"},url:c,maxSize:p,accept:l}};const O={class:"el-upload__tip"},T={key:0},W={key:1},X=["src"],Z={key:1},$=["src"],G=L({__name:"UploadImg",props:{limit:{type:Number},range:{type:String},multiple:{type:Boolean,default:!1},list:{type:Array,default:[]},img:{type:String,default:""},height:{type:Number,default:178},width:{type:Number,default:178}},emits:["uploadedImg"],setup(e,{emit:p}){const l=e,{url:c,getApi:E,maxSize:A,accept:_}=M(),g=n([]),r=n("");j(()=>{var a;(a=l.list)==null||a.forEach((t,o)=>{g.value.push({name:o+"",url:t.toString()})}),r.value=l.img?l.img:""}),z(()=>l.img,(a,t)=>{a&&a!=t&&(r.value=a?l.img:"")});const w=n(""),h=n(!1),C=a=>{w.value=a.url,h.value=!0},U=(a,t)=>{if(l.multiple){const o=[];g.value.forEach(f=>{o.push(f.url)}),p("uploadedImg",o)}else r.value=URL.createObjectURL(t.raw),p("uploadedImg",t.response.data.imgUrl)};return E(),(a,t)=>{const o=F("Plus"),f=V,S=b,k=B;return s(),m("div",null,[e.multiple?(s(),x(k,{key:0,action:i(c),accept:i(_),name:"image","list-type":"picture-card","on-preview":C,limit:e.limit,"file-list":g.value,"onUpdate:fileList":t[1]||(t[1]=y=>g.value=y),"on-success":U},{tip:u(()=>[I("div",O,[R(" \u9650\u5236\u56FE\u7247\u7C7B\u578B\u4E3A"+v(i(_))+",\u5927\u5C0F\u4E3A"+v(i(A))+" ",1),e.limit?(s(),m("span",T,"\u6700\u5927\u4E0A\u4F20\u4E2A\u6570\u4E3A:"+v(e.limit)+"\u4E2A",1)):e.range?(s(),m("span",W,"\u4E2A\u6570\u8303\u56F4\u4E3A:"+v(e.range)+"\u4E2A",1)):D("v-if",!0)]),d(S,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=y=>h.value=y)},{default:u(()=>[I("img",{"w-full":"",src:w.value,alt:"Preview Image"},null,8,X)]),_:1},8,["modelValue"])]),default:u(()=>[d(f,null,{default:u(()=>[d(o)]),_:1})]),_:1},8,["action","accept","limit","file-list"])):(s(),m("div",Z,[d(k,{class:"avatar-uploader",action:i(c),accept:i(_),"show-file-list":!1,"on-success":U,name:"image"},{default:u(()=>[r.value?(s(),m("img",{key:0,src:r.value,class:"avatar",style:q({width:e.width+"px",height:e.height+"px"})},null,12,$)):(s(),x(f,{key:1,class:"avatar-uploader-icon"},{default:u(()=>[d(o)]),_:1}))]),_:1},8,["action","accept"])]))])}}});var Y=P(G,[["__scopeId","data-v-1366c1b5"]]);export{Y as U};
