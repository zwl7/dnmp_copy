import"./vue.ed337178.js";import{b as w}from"./vue-router.52e17900.js";import x from"./Operation.7a91dd9b.js";import{c as N,d as T,u as b,e as C,p as W,f as S,l as j}from"./restful.b7783b2d.js";import{a as I}from"./table.b064dc6b.js";import{c as l,d as m}from"./element-plus.fda9d17d.js";import{Q as M,d as u,e as k}from"./@vue.7f0f1fa4.js";const O={activity_id:0,city_id:0,type_id:0,community_id:0,member_id:0,name:"",start_time:0,end_time:0,street_id:0,address:"",latitude:0,longitude:0,images:[],banner:"",status:"0",online_apply:"2",contact_name:"",contact_phone:"",contact_email:"",is_free:"1",people_num:0,hot:0,operator:0,c_time:0,u_time:0,keywords:""},z={type_id:0,status:"0",keywords:"",activity_type:""},U=()=>{const h=w(),y=Object.assign({keywords:""},O),c=M(z),n=u(0),p=u(""),a=u(y),v=[{headerName:"\u6D3B\u52A8\u540D\u79F0",field:"name"},{headerName:"\u5F00\u59CB\u65F6\u95F4",field:"start_time",maxWidth:200},{headerName:"\u7ED3\u675F\u65F6\u95F4",field:"end_time",maxWidth:200},{headerName:"\u5730\u5740",field:"address",width:300},{headerName:"\u7C7B\u578B",maxWidth:150,field:"type_str"},{headerName:"\u8D5B\u4E8B\u7C7B\u578B",maxWidth:150,field:"activity_type",valueFormatter:t=>{switch(parseInt(t.value)){case 1:return"\u666E\u901A\u6D3B\u52A8";case 2:return"\u8D5B\u4E8B\u6D3B\u52A8";default:return"\u666E\u901A\u6D3B\u52A8"}}},{headerName:"\u72B6\u6001",maxWidth:150,field:"status",valueFormatter:t=>{switch(parseInt(t.value)){case 1:return"\u4E0A\u67B6";case 2:return"\u5F85\u5BA1\u6838";case 3:return"\u4E0B\u67B6";default:return"\u5DF2\u89E3\u6563"}}},{headerName:"\u6570\u636E\u4F20\u8F93",maxWidth:150,field:"push_switch",valueGetter:t=>{switch(parseInt(t.data.push_switch)){case 1:return"\u672A\u4E0A\u4F20";case 2:return"\u5DF2\u4E0A\u4F20";default:return"--"}}},{headerName:"\u8054\u7CFB\u4EBA",field:"contact_name",maxWidth:150},{headerName:"\u4FEE\u6539\u4EBA",field:"operator",maxWidth:150},{headerName:"\u521B\u5EFA\u65F6\u95F4",field:"c_time",maxWidth:200,valueFormatter:I},{width:150,headerName:"\u64CD\u4F5C",field:"activity",pinned:"right",align:"center",cellRendererSelector:t=>({component:x,show:!0,params:{...t,updateStatus(){f(t.data)},jumpToActivityMember(){D(t.data)},uploadData(){g(t.data)}}})}],B=[],i=u(1),d=u(10);let s=u(B);const A=()=>{N(a.value.activity_id).then(t=>{}).catch(()=>{})},_=(t=()=>{})=>{T(a.value).then(e=>{t.apply(null)}).catch(()=>{})},F=(t=()=>{})=>{b(a.value).then(e=>{t.apply(null)}).catch(()=>{})},f=t=>{let e=parseInt(t.status,10)===1?"3":"1";l.confirm("\u66F4\u65B0\u5F53\u524D\u6D3B\u52A8\u72B6\u6001?","\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{C({activity_id:t.activity_id,status:e}).then(r=>{r.code===200&&(t=Object.assign(t,{status:e}),m({message:"\u66F4\u65B0\u6210\u529F",grouping:!0,type:"success"}))})}).catch(()=>{})},D=t=>{let{activity_id:e}=t;h.push({path:"/activity/member",query:{activity_id:e}})},g=t=>{let{activity_id:e}=t;l.confirm("\u66F4\u65B0\u4E0A\u4F20\u5F53\u524D\u6D3B\u52A8\u6570\u636E?","\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{W({activity_id:e}).then(r=>{r.code===200&&m.success("\u64CD\u4F5C\u6210\u529F")})}).catch(()=>{})},E=(t=()=>{})=>{S(a.value.activity_id).then(e=>{t.apply(null)}).catch(()=>{})},o=(t=()=>{})=>{s.value=[],j(Object.assign({page:i.value,size:d.value},c)).then(e=>{s.value=e.data.list,n.value=e.data.count,i.value+=1,t.apply(null)}).catch(()=>{})};return k(c,()=>{i.value=1,o()}),{activity:a,getActivity:A,addActivity:_,updateActivity:F,delActivity:E,listActivity:o,activityTotal:n,activityList:s,activityPage:i,activitySize:d,activityColumns:v,activityFilters:c,activityKeywords:p}};export{U as g};
