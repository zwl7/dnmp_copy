var m,p,n={version:"0.2.0"},i=n.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function h(t,e,r){return t<e?e:t>r?r:t}function v(t){return 100*(-1+t)}n.configure=function(t){var e,r;for(e in t)(r=t[e])!==void 0&&t.hasOwnProperty(e)&&(i[e]=r);return this},n.status=null,n.set=function(t){var e=n.isStarted();t=h(t,i.minimum,1),n.status=t===1?null:t;var r=n.render(!e),a=r.querySelector(i.barSelector),s=i.speed,u=i.easing;return C(function(c){i.positionUsing===""&&(i.positionUsing=n.getPositioningCSS()),g(a,function(o,l,f){var d;return(d=i.positionUsing==="translate3d"?{transform:"translate3d("+v(o)+"%,0,0)"}:i.positionUsing==="translate"?{transform:"translate("+v(o)+"%,0)"}:{"margin-left":v(o)+"%"}).transition="all "+l+"ms "+f,d}(t,s,u)),t===1?(g(r,{transition:"none",opacity:1}),setTimeout(function(){g(r,{transition:"all "+s+"ms linear",opacity:0}),setTimeout(function(){n.remove(),c()},s)},s)):setTimeout(c,s)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var t=function(){setTimeout(function(){n.status&&(n.trickle(),t())},i.trickleSpeed)};return i.trickle&&t(),this},n.done=function(t){return t||n.status?n.inc(.3+.5*Math.random()).set(1):this},n.inc=function(t){var e=n.status;return e?e>1?void 0:(typeof t!="number"&&(t=e>=0&&e<.2?.1:e>=.2&&e<.5?.04:e>=.5&&e<.8?.02:e>=.8&&e<.99?.005:0),e=h(e+t,0,.994),n.set(e)):n.start()},n.trickle=function(){return n.inc()},m=0,p=0,n.promise=function(t){return t&&t.state()!=="resolved"?(p===0&&n.start(),m++,p++,t.always(function(){--p==0?(m=0,n.done()):n.set((m-p)/m)}),this):this},n.render=function(t){if(n.isRendered())return document.getElementById("nprogress");S(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=i.template;var r,a=e.querySelector(i.barSelector),s=t?"-100":v(n.status||0),u=document.querySelector(i.parent);return g(a,{transition:"all 0 linear",transform:"translate3d("+s+"%,0,0)"}),i.showSpinner||(r=e.querySelector(i.spinnerSelector))&&T(r),u!=document.body&&S(u,"nprogress-custom-parent"),u.appendChild(e),e},n.remove=function(){b(document.documentElement,"nprogress-busy"),b(document.querySelector(i.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&T(t)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var C=function(){var t=[];function e(){var r=t.shift();r&&r(e)}return function(r){t.push(r),t.length==1&&e()}}(),g=function(){var t=["Webkit","O","Moz","ms"],e={};function r(a,s,u){var c;c=(c=s).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(o,l){return l.toUpperCase()}),s=e[c]||(e[c]=function(o){var l=document.body.style;if(o in l)return o;for(var f,d=t.length,U=o.charAt(0).toUpperCase()+o.slice(1);d--;)if((f=t[d]+U)in l)return f;return o}(c)),a.style[s]=u}return function(a,s){var u,c,o=arguments;if(o.length==2)for(u in s)(c=s[u])!==void 0&&s.hasOwnProperty(u)&&r(a,u,c);else r(a,o[1],o[2])}}();function k(t,e){return(typeof t=="string"?t:y(t)).indexOf(" "+e+" ")>=0}function S(t,e){var r=y(t),a=r+e;k(r,e)||(t.className=a.substring(1))}function b(t,e){var r,a=y(t);k(t,e)&&(r=a.replace(" "+e+" "," "),t.className=r.substring(1,r.length-1))}function y(t){return(" "+(t&&t.className||"")+" ").replace(/\s+/gi," ")}function T(t){t&&t.parentNode&&t.parentNode.removeChild(t)}export{n as t};
