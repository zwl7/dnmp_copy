import{g as L,h as w}from"./element-plus.fda9d17d.js";import"./vue.ed337178.js";import{h as I}from"./http.ed4ad2d7.js";import{_ as $}from"./index.43a84b26.js";import{k as q,d as o,R as O,e as U,i as j,o as u,X as c,W as m,l as g,c as h,U as b,ad as y}from"./@vue.7f0f1fa4.js";const z=q({props:{url:{type:String,required:!0},desc:String,single:{type:Boolean,default:!0},params:{type:Object,default:{}},reflectLabel:String},emits:["update:modelValue"],setup(e,n){const p=o(0),v=o([]),a=o([]),s=o(1),l=o(10),d=o(!1),{url:k}=O(e);U(k,()=>{d.value=!1,a.value=[],s.value=1,i()});const i=()=>{d.value||I.fetchPost(e.url,Object.assign(e.params,{page:s.value,size:l.value})).then(t=>{const r=t.data;r.list.length===0&&(d.value=!0);const f=e.reflectLabel;f?r.datas.map((S,F)=>{a.value.push({label:r.list[F][f],value:S.value})}):r.datas.length&&(a.value=a.value.concat(r.datas)),s.value+=1})};i();const B=t=>{n.emit("update:modelValue",t)},E=o(null);return j(()=>{let t=document.querySelectorAll(".el-select-dropdown")[0].querySelector(".el-scrollbar__wrap");t&&t.addEventListener("scroll",function(){t&&t.scrollTop+t.clientHeight>=t.scrollHeight&&i()})}),{options:a,onChange:B,value:p,values:v,getList:i,select:E}}});function H(e,n,p,C,v,V){const a=L,s=w;return e.single?(u(),c(s,{key:0,class:"m-2",placeholder:"\u8BF7\u9009\u62E9"+e.desc,modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=l=>e.value=l),onChange:e.onChange,filterable:!0,ref:"select",clearable:""},{default:m(()=>[g(a,{value:0,label:"\u8BF7\u9009\u62E9"+e.desc},null,8,["label"]),(u(!0),h(b,null,y(e.options,l=>(u(),c(a,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue","onChange"])):(u(),c(s,{key:1,class:"m-2",placeholder:"\u8BF7\u9009\u62E9"+e.desc,multiple:"",modelValue:e.values,"onUpdate:modelValue":n[1]||(n[1]=l=>e.values=l),onChange:e.onChange,filterable:!0,ref:"select"},{default:m(()=>[g(a,{value:0,label:"\u8BF7\u9009\u62E9"+e.desc},null,8,["label"]),(u(!0),h(b,null,y(e.options,l=>(u(),c(a,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue","onChange"]))}var P=$(z,[["render",H]]);export{P as S};
