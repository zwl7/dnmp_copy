import"./vue.ed337178.js";import{h as u}from"./http.ed4ad2d7.js";import C from"./Operation.f41c2bd6.js";import{a as b}from"./table.b064dc6b.js";import{c as E,d as N}from"./element-plus.fda9d17d.js";import{Q as x,d as n,e as B}from"./@vue.7f0f1fa4.js";const A={setting_id:0,c_time:0,page_router:"",page_name:"",related_table:"adv",related_table_str:"",related_id:0,weigh:0},T=a=>u.fetchPost("/activityPlatform/setting/add",a),M=a=>u.fetchPost("/activityPlatform/setting/del",{setting_id:a}),z=a=>u.fetchPost("/activityPlatform/setting/update",a),G=a=>u.fetchPost("/activityPlatform/setting/get",{setting_id:a}),L=a=>u.fetchPost("/activityPlatform/setting/list",a),Q=()=>{const a=A,o=x({page_router:"",related_table:"",keywords:""}),h=n(!1),c=n(0),p=n(""),s=n(a),f=n("@/views/adv/list"),v=[{headerName:"C\u7AEF\u9875\u9762\u540D\u79F0",field:"page_name"},{headerName:"\u521B\u5EFA\u65F6\u95F4",field:"c_time",valueFormatter:b},{headerName:"\u5173\u8054\u8D44\u6E90",field:"related_table_str"},{headerName:"\u6807\u9898",field:"title"},{headerName:"\u6743\u91CD",field:"weigh",flex:1,sortable:!0,rowDrag:!0,editable:!0,onCellValueChanged:t=>{let e=t.data;e.weigh<1&&(e.weigh=1),s.value=e,g(()=>{i.value-=1,l()})}},{width:150,headerName:"\u64CD\u4F5C",pinned:"right",cellRendererSelector:t=>({component:C,show:!0,params:{data:t.data,refreshList(){i.value-=1,l()},delSetting(){m(t.data)}}})}],_=[],i=n(1),d=n(10);let r=n(_);const w=(t=()=>{})=>{G(s.value.setting_id).then(e=>{s.value=e.data,t.apply(null)}).catch(()=>{})},y=(t=()=>{})=>{T(s.value).then(e=>{t.apply(null)}).catch(()=>{})},g=(t=()=>{})=>{z(s.value).then(e=>{t.apply(null)}).catch(()=>{})},m=t=>{let{title:e,setting_id:D,page_name:F}=t,P=`\u662F\u5426\u5220\u9664\u5F53\u524D\u3010${F}\u3011\u5173\u8054\u7684${e}?`;E.confirm(P,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{M(D).then(S=>{S.code===200&&(N({message:"\u5220\u9664\u6210\u529F",grouping:!0,type:"success"}),l())}).catch(()=>{})}).catch(()=>{})},l=(t=()=>{})=>{r.value.splice(0,r.value.length),L(Object.assign({page:i.value,size:d.value},o)).then(e=>{r.value=e.data.list,c.value=e.data.count,t.apply(null)}).catch(()=>{})};return B(o,()=>{i.value=1,l()}),{setting:s,getSetting:w,addSetting:y,updateSetting:g,delSetting:m,listSetting:l,settingTotal:c,settingList:r,settingPage:i,settingSize:d,settingColumns:v,settingFilters:o,settingKeywords:p,showModal:h,relatedComponent:f}};export{Q as G};
