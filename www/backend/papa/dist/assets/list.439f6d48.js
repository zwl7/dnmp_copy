import{c as C,d as w,e as k,f as b,g as A,h as I,j as N,b as S,k as V}from"./element-plus.fda9d17d.js";import"./vue.ed337178.js";import{_ as T,c as M}from"./index.43a84b26.js";import{_ as L}from"./Table.9b2293ee.js";import{u as $,d as j,l as z}from"./restful.83d9a0f2.js";import O from"./Operation.510145d1.js";import{b as P}from"./vue-router.52e17900.js";import{Q as R,d,e as U,k as q,o as G,X as Q,W as l,u as n,l as a,_ as W}from"./@vue.7f0f1fa4.js";import"./lodash-es.32c7d6de.js";import"./async-validator.6fbb5f2f.js";import"./@vueuse.a0d26dd7.js";import"./dayjs.8e294223.js";import"./axios.c8347845.js";import"./@element-plus.debac796.js";import"./@ctrl.b082b0c1.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./pinia.840704ed.js";import"./vue-demi.4b2e6391.js";import"./js-cookie.711e9524.js";import"./qs.fa7a39be.js";import"./side-channel.3e40f30b.js";import"./get-intrinsic.8c87d952.js";import"./has-symbols.caae0f97.js";import"./has-proto.76cff6c7.js";import"./function-bind.cb3858f2.js";import"./has.c1051c46.js";import"./call-bind.208b5ef0.js";import"./object-inspect.ac588fa5.js";import"./nprogress.d7e4ab0b.js";import"./default-passive-events.74004992.js";import"./table.b064dc6b.js";import"./http.ed4ad2d7.js";const X=()=>{const E=P(),i=R({status:"",keywords:""}),_=d(0),v=t=>{switch(parseInt(t.value)){case 1:return"\u4E0A\u67B6";case 2:return"\u4E0B\u67B6";default:return"\u8FC7\u671F"}},f=t=>{switch(t){case 1:return"\u8DF3\u8F6C\u7F51\u9875";default:return"\u8DF3\u8F6C\u5C0F\u7A0B\u5E8F"}},g=[{headerName:"\u4E13\u9898ID",field:"activity_special_page_id",align:"center",width:80},{headerName:"\u6807\u9898",field:"title"},{headerName:"\u72B6\u6001",field:"status_str"},{headerName:"\u53C2\u4E0E\u5708\u5B50",field:"community_count"},{headerName:"\u6D3B\u52A8\u6570\u91CF",field:"activity_count"},{headerName:"\u521B\u5EFA\u65F6\u95F4",field:"c_time"},{width:240,headerName:"\u64CD\u4F5C",align:"center",pinned:"right",cellRendererSelector:t=>({component:O,show:!0,params:{data:t.data,handleManage(){m(t.data)},updateStatus(){h(t.data)},deleteAdv(){F(t.data)}}})}],r=d(1),p=d(10);let u=d([]);const h=t=>{C.confirm("\u66F4\u65B0\u5F53\u524D\u4E13\u9898\u72B6\u6001?","\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{let e=parseInt(t.status,10)===1?"2":"1";$({activity_special_page_id:t.activity_special_page_id,status:e}).then(o=>{if(o.code===200){w({message:"\u66F4\u65B0\u6210\u529F",grouping:!0,type:"success"});let c=parseInt(t.status,10)===1?"\u505C\u7528":"\u542F\u7528";t=Object.assign(t,{status:e,status_str:c})}})}).catch(()=>{})},F=t=>{let{title:e,activity_special_page_id:o}=t,c=`\u5220\u9664\u5F53\u524D\u4E13\u9898\u3010${e}\u3011?`;C.confirm(c,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{j({activity_special_page_id:o}).then(B=>{B.code===200&&(w({message:"\u5220\u9664\u6210\u529F",grouping:!0,type:"success"}),r.value-=1,s())})}).catch(()=>{})},m=t=>{let{activity_special_page_id:e}=t;E.push({name:"specialEventsManage",query:{activity_special_page_id:e}})},s=(t=()=>{})=>{u.value.splice(0,u.value.length),z(Object.assign({page:r.value,size:p.value},i)).then(e=>{u.value=e.data.list,_.value=e.data.count,r.value+=1}).catch(()=>{})};return U(i,()=>{r.value=1,s()}),{getList:s,total:_,dataList:u,advPage:r,advSize:p,advColumns:g,advFilters:i,getStatus:v,getType:f}};const H=q({__name:"list",setup(E){const{getList:i,adv:_,total:v,dataList:f,advPage:g,advSize:r,advColumns:p,advFilters:u}=X();i();const h=m=>{g.value=m,i()},F=()=>{M.push({name:"specialEventsAdd"})};return d([]),(m,s)=>{const t=k,e=b,o=A,c=I,B=N,x=S,D=V;return G(),Q(L,{columns:n(p),list:n(f),tableId:"adv_id",showIndex:""},{search:l(()=>[a(B,{style:{display:"flex","flex-wrap":"wrap"}},{default:l(()=>[a(e,{class:"keywords search-item"},{default:l(()=>[a(t,{placeholder:"\u8F93\u5165\u6807\u9898 \u641C\u7D22",class:"keywords search-item",modelValue:n(u).keywords,"onUpdate:modelValue":s[0]||(s[0]=y=>n(u).keywords=y),clearable:""},null,8,["modelValue"])]),_:1}),a(e,{prop:"status",class:"search-item"},{default:l(()=>[a(c,{modelValue:n(u).status,"onUpdate:modelValue":s[1]||(s[1]=y=>n(u).status=y),class:"m-2",placeholder:"\u72B6\u6001",multiple:!1},{default:l(()=>[a(o,{value:"0",label:"\u8BF7\u9009\u62E9\u72B6\u6001"}),a(o,{label:"\u542F\u7528",value:"1"}),a(o,{label:"\u505C\u7528",value:"2"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(x,{type:"primary",onClick:F},{default:l(()=>[W("\u65B0\u589E")]),_:1})]),pagination:l(()=>[a(D,{background:"",layout:"total, prev, pager, next",total:n(v),onCurrentChange:h},null,8,["total"])]),_:1},8,["columns","list"])}}});var It=T(H,[["__scopeId","data-v-3d99ef75"]]);export{It as default};
