import{m as N}from"./form.f817fcb5.js";import"./vue.ed337178.js";import{h as c}from"./http.ed4ad2d7.js";import P from"./Operation.e96cc36c.js";import{c as A,d as x}from"./element-plus.fda9d17d.js";import{Q as I,d as a,e as S}from"./@vue.7f0f1fa4.js";const T=u=>c.fetchPost("/activityPlatform/community/add",u),b=u=>c.fetchPost("/activityPlatform/community/del",{id:u}),r=u=>c.fetchPost("/activityPlatform/community/update",u),j=u=>c.fetchPost("/activityPlatform/community/get",{community_id:u}),z=u=>c.fetchPost("/activityPlatform/community/list",u),K=()=>{const u=Object.assign({keywords:""},N),m=I({type_id:"",status:""}),l=a(0),p=a(""),s=a(u),y=[{headerName:"\u661F\u7403\u540D\u79F0",field:"name"},{headerName:"\u7EA7\u522B",field:"auth"},{headerName:"\u5206\u7C7B",field:"type_str"},{headerName:"\u5730\u5740",field:"address"},{headerName:"\u4E3B\u7406\u4EBA",field:"host"},{headerName:"\u7535\u8BDD\u53F7\u7801",field:"phone"},{headerName:"\u72B6\u6001",maxWidth:150,field:"status",valueGetter:t=>{switch(parseInt(t.data.status)){case 1:return"\u4E0A\u67B6";case 2:return"\u5F85\u5BA1\u6838";case 3:return"\u4E0B\u67B6";default:return"\u5DF2\u89E3\u6563"}}},{headerName:"\u6570\u636E\u4F20\u8F93",maxWidth:150,field:"push_switch",valueGetter:t=>{switch(parseInt(t.data.push_switch)){case 1:return"\u5173\u95ED";case 2:return"\u5F00\u542F";default:return"--"}}},{headerName:"\u521B\u5EFA\u65F6\u95F4",field:"c_time"},{headerName:"\u7BA1\u7406\u5458",field:"operator"},{width:180,headerName:"\u64CD\u4F5C",pinned:"right",cellRendererSelector:t=>({component:P,show:!0,params:{...t,changeUpload(){_(t.data)}}})}],f=[],i=a(1),d=a(10);let o=a(f);const F=()=>{j(s.value.community_id).then(t=>{}).catch(()=>{})},v=(t=()=>{})=>{T(s.value).then(e=>{t.apply(null)}).catch(()=>{})},g=(t,e=()=>{})=>{r(t).then(n=>{e.apply(null)}).catch(()=>{})},B=(t=()=>{})=>{r(s.value).then(e=>{t.apply(null)}).catch(()=>{})},E=(t=()=>{})=>{b(s.value.community_id).then(e=>{t.apply(null)}).catch(()=>{})},_=t=>{let{push_switch:e,community_id:n}=t,w=e==1?"\u662F\u5426\u5F00\u542F\u661F\u7403\u6570\u636E\u4F20\u8F93?":"\u662F\u5426\u5173\u95ED\u661F\u7403\u6570\u636E\u4F20\u8F93?";A.confirm(w,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{let C={community_id:n,push_switch:e==1?2:1};r(C).then(D=>{D.code==200&&(x.success("\u64CD\u4F5C\u6210\u529F"),t.push_switch=e==1?2:1)}).catch(()=>{})}).catch(()=>{})},h=(t=()=>{})=>{o.value.splice(0,o.value.length);let e=Object.assign({page:i.value,size:d.value},m);e.type_id||delete e.type_id,e.status||delete e.status,z(e).then(n=>{o.value=n.data.list,l.value=n.data.count,i.value+=1,t.apply(null)}).catch(()=>{})};return S(m,()=>{i.value=1,h()}),{community:s,getCommunity:F,addCommunity:v,updateCommunity:B,delCommunity:E,listCommunity:h,communityTotal:l,communityList:o,communityPage:i,communitySize:d,communityColumns:y,communityFilters:m,communityKeywords:p,updateStatus:g}};export{K as g};
