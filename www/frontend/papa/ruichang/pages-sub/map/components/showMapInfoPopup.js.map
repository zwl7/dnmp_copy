{"version":3,"file":"showMapInfoPopup.js","sources":["../../../../../../src/pages-sub/map/components/showMapInfoPopup.vue","../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXMtc3ViL21hcC9jb21wb25lbnRzL3Nob3dNYXBJbmZvUG9wdXAudnVl"],"sourcesContent":["<template>\n  <view>\n    <uv-popup ref=\"popup\" @change=\"change\" round=\"16\">\n      <view class=\"popup-box\">\n        <view class=\"line-box\">\n          <view class=\"line\" @click=\"close\"></view>\n        </view>\n        <mapItem :info=\"mapInfo\" @click=\"handleClick\"></mapItem>\n        <view class=\"bottom-box\">\n          <view class=\"left\" @click=\"showFeedBack\">\n            <uni-icons\n              custom-prefix=\"iconfont\"\n              type=\"iconfont-fankui\"\n              size=\"20\"\n              color=\"#303133\"\n            ></uni-icons>\n            <text class=\"text\">反馈</text>\n          </view>\n          <view class=\"right\">\n            <button class=\"button\" @click=\"openMap\">去这里</button>\n          </view>\n        </view>\n      </view>\n    </uv-popup>\n    <uv-popup ref=\"inputDialog\" type=\"dialog\" round=\"16\">\n      <view class=\"input-container\">\n        <view class=\"title\">反馈</view>\n        <view class=\"main-container\">\n          <radio-group @change=\"radioChange\">\n            <view class=\"radio-container\">\n              <label class=\"item\">\n                <radio value=\"1\" :checked=\"feedback == 1\" />\n                <text>地图地址错误</text>\n              </label>\n              <label class=\"item\">\n                <radio value=\"2\" :checked=\"feedback == 2\" />\n                <text>已搬迁</text>\n              </label>\n              <label class=\"item\">\n                <radio value=\"3\" :checked=\"feedback == 3\" />\n                <text>停业/找不到</text>\n              </label>\n              <label class=\"item\">\n                <radio value=\"4\" :checked=\"feedback == 4\" />\n                <text>其他</text>\n              </label>\n            </view>\n          </radio-group>\n        </view>\n        <view class=\"button\">\n          <view class=\"cancel\" @click=\"cancelDialog\">取消</view>\n          <view class=\"confirm\" @click=\"confirmDialog\">确认</view>\n        </view>\n      </view>\n    </uv-popup>\n  </view>\n</template>\n\n<script>\nimport { mapFeedback } from '@/apis/stadium.js'\nimport mapItem from './mapItem.vue'\nexport default {\n  components: {\n    mapItem,\n  },\n  props: {\n    mapInfo: {\n      type: Object,\n      default: () => {\n        return {}\n      },\n    },\n  },\n  computed: {\n    showInfo() {\n      cosnole.log(this.mapInfo)\n      return this.mapInfo || {}\n    },\n  },\n  data() {\n    return {\n      feedback: 1,\n    }\n  },\n  methods: {\n    change(e) {\n      console.log('弹窗状态改变：', e)\n    },\n    open() {\n      this.$refs.popup.open('bottom')\n    },\n    close() {\n      this.$refs.popup.close()\n    },\n    showFeedBack() {\n      this.$refs.inputDialog.open()\n    },\n    radioChange(evt) {\n      let value = evt.detail.value\n      this.feedback = value\n    },\n    cancelDialog() {\n      this.$refs.inputDialog.close()\n    },\n    confirmDialog() {\n      uni.$uv.throttle(async () => {\n        const { des, latitude, longitude, id } = this.mapInfo\n        const type_id = this.mapInfo.type_id ? this.mapInfo.type_id : 0\n        const topic_id = this.mapInfo.id ? this.mapInfo.id : 0\n        const params = {\n          field_name: this.mapInfo.name,\n          latitude,\n          longitude,\n          topic_id,\n          type: this.feedback,\n          type_id,\n        }\n        mapFeedback(params)\n          .then(() => {\n            uni.showToast({\n              icon: 'success',\n              title: '反馈成功',\n            })\n            this.cancelDialog()\n          })\n          .catch(() => {\n            uni.showToast({\n              icon: 'success',\n              title: '反馈失败',\n            })\n          })\n      }, 1000)\n    },\n    handleClick() {\n      const { field_id, site_id, stadium_id, health_id, sport_tourism_id, business_place_id } =\n        this.mapInfo\n      let name = ''\n      let id = ''\n      let idName = ''\n      if (stadium_id) {\n        name = '/pages/stadiumDetail/stadiumDetail'\n        idName = 'stadium_id'\n        id = stadium_id\n      }\n\n      if (site_id) {\n        name = '/pages/siteDetail/siteDetail'\n        idName = 'site_id'\n        id = site_id\n      }\n      if (field_id) {\n        this.$showToastNone('未开发field_id')\n        return\n      }\n      if (health_id) {\n        name = '/pages/fitnessReserveTime/fitnessReserveTime'\n        idName = 'health_id'\n        id = health_id\n      }\n      if (sport_tourism_id) {\n        name = '/pages/tourDetail/tourDetail'\n        idName = 'sport_tourism_id'\n        id = sport_tourism_id\n      }\n      if (business_place_id) {\n        name = '/pages/businessSiteDetail/businessSiteDetail'\n        idName = 'business_place_id'\n        id = business_place_id\n      }\n      uni.navigateTo({\n        url: `${name}?${idName}=${id}`,\n      })\n    },\n    openMap() {\n      this.$toLocation(this.mapInfo)\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.popup-box {\n  .line-box {\n    height: 88rpx;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .line {\n    width: 94rpx;\n    height: 6rpx;\n    border-radius: 6rpx;\n    background: rgba(100, 101, 102, 1);\n  }\n\n  .bottom-box {\n    height: 100rpx;\n    margin-top: 48rpx;\n    padding: 0 32rpx;\n    box-sizing: border-box;\n    border-top: 1rpx solid #ebeef0;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .left {\n      display: flex;\n      flex-direction: column;\n\n      .text {\n        font-size: 20rpx;\n        font-weight: 400;\n        line-height: 28rpx;\n        color: rgba(150, 151, 153, 1);\n        text-align: center;\n        vertical-align: top;\n        margin-top: 4rpx;\n      }\n    }\n\n    .right {\n      flex: 1;\n      padding-left: 32rpx;\n    }\n\n    .button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 28rpx;\n      width: 100%;\n      height: 80rpx;\n      opacity: 1;\n      border-radius: 80rpx;\n      border: none;\n      background-color: $hubei-primary-button-bg-color;\n      color: $hubei-primary-button-font-color;\n      border: 1px solid $hubei-primary-button-border-color;\n    }\n\n    button::after {\n      border: none;\n    }\n  }\n}\n\n.input-container {\n  background-color: #fff;\n  border-radius: 32rpx;\n  width: 500rpx;\n\n  .title {\n    text-align: center;\n    padding: 20rpx 0;\n  }\n\n  .main-container {\n    padding: 0 20rpx;\n    color: #333333;\n\n    .item {\n      radio {\n        transform: scale(0.7);\n      }\n    }\n  }\n\n  .button {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    height: 80rpx;\n    margin-top: 20rpx;\n    border-top: 2rpx solid #ebedf0;\n\n    .cancel,\n    .confirm {\n      flex: 1;\n      text-align: center;\n    }\n\n    .cancel {\n      border-right: 2rpx solid #ebedf0;\n    }\n  }\n}\n\n.radio-container {\n  display: flex;\n  flex-direction: column;\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages-sub/map/components/showMapInfoPopup.vue'\nwx.createComponent(Component)"],"names":["uni","mapFeedback"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA4DA,MAAO,UAAS,MAAW;AAC3B,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,MAAM;AACb,eAAO,CAAA;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,WAAW;AACT,cAAQ,IAAI,KAAK,OAAO;AACxB,aAAO,KAAK,WAAW,CAAA;AAAA,IACxB;AAAA,EACF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,IACZ;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,OAAO,GAAG;AACR,cAAQ,IAAI,WAAW,CAAC;AAAA,IACzB;AAAA,IACD,OAAO;AACL,WAAK,MAAM,MAAM,KAAK,QAAQ;AAAA,IAC/B;AAAA,IACD,QAAQ;AACN,WAAK,MAAM,MAAM,MAAK;AAAA,IACvB;AAAA,IACD,eAAe;AACb,WAAK,MAAM,YAAY,KAAI;AAAA,IAC5B;AAAA,IACD,YAAY,KAAK;AACf,UAAI,QAAQ,IAAI,OAAO;AACvB,WAAK,WAAW;AAAA,IACjB;AAAA,IACD,eAAe;AACb,WAAK,MAAM,YAAY,MAAK;AAAA,IAC7B;AAAA,IACD,gBAAgB;AACdA,0BAAI,IAAI,SAAS,MAAY;AAC3B,cAAM,EAAE,KAAK,UAAU,WAAW,OAAO,KAAK;AAC9C,cAAM,UAAU,KAAK,QAAQ,UAAU,KAAK,QAAQ,UAAU;AAC9D,cAAM,WAAW,KAAK,QAAQ,KAAK,KAAK,QAAQ,KAAK;AACrD,cAAM,SAAS;AAAA,UACb,YAAY,KAAK,QAAQ;AAAA,UACzB;AAAA,UACA;AAAA,UACA;AAAA,UACA,MAAM,KAAK;AAAA,UACX;AAAA,QACF;AACAC,qBAAAA,YAAY,MAAM,EACf,KAAK,MAAM;AACVD,wBAAAA,MAAI,UAAU;AAAA,YACZ,MAAM;AAAA,YACN,OAAO;AAAA,UACR,CAAA;AACD,eAAK,aAAY;AAAA,QAClB,CAAA,EACA,MAAM,MAAM;AACXA,wBAAAA,MAAI,UAAU;AAAA,YACZ,MAAM;AAAA,YACN,OAAO;AAAA,UACR,CAAA;AAAA,QACF,CAAA;AAAA,MACL,IAAG,GAAI;AAAA,IACR;AAAA,IACD,cAAc;AACZ,YAAM,EAAE,UAAU,SAAS,YAAY,WAAW,kBAAkB,kBAAoB,IACtF,KAAK;AACP,UAAI,OAAO;AACX,UAAI,KAAK;AACT,UAAI,SAAS;AACb,UAAI,YAAY;AACd,eAAO;AACP,iBAAS;AACT,aAAK;AAAA,MACP;AAEA,UAAI,SAAS;AACX,eAAO;AACP,iBAAS;AACT,aAAK;AAAA,MACP;AACA,UAAI,UAAU;AACZ,aAAK,eAAe,aAAa;AACjC;AAAA,MACF;AACA,UAAI,WAAW;AACb,eAAO;AACP,iBAAS;AACT,aAAK;AAAA,MACP;AACA,UAAI,kBAAkB;AACpB,eAAO;AACP,iBAAS;AACT,aAAK;AAAA,MACP;AACA,UAAI,mBAAmB;AACrB,eAAO;AACP,iBAAS;AACT,aAAK;AAAA,MACP;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,GAAG,IAAI,IAAI,MAAM,IAAI,EAAE;AAAA,MAC7B,CAAA;AAAA,IACF;AAAA,IACD,UAAU;AACR,WAAK,YAAY,KAAK,OAAO;AAAA,IAC9B;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLA,GAAG,gBAAgB,SAAS;"}