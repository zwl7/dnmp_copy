{"version":3,"file":"instructorDropDown.js","sources":["../../../../../../src/pages-sub/instructorSite/components/instructorDropDown.vue","../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXMtc3ViL2luc3RydWN0b3JTaXRlL2NvbXBvbmVudHMvaW5zdHJ1Y3RvckRyb3BEb3duLnZ1ZQ"],"sourcesContent":["<template>\n  <div style=\"background-color: #fff\">\n    <dropDown\n      sign=\"trainDropDown\"\n      ref=\"dropDown\"\n      :options=\"options\"\n      @change=\"changeDropDown\"\n      @open=\"openDrop\"\n    >\n      <view v-show=\"selectType == 'company_area_id'\">\n        <dropDownCitySelect @confirm=\"citySelectConfirm\" @reset=\"citySelectReset\" />\n      </view>\n      <view v-show=\"selectType == 'tag_id'\">\n        <dropDownProjectSelect @confirm=\"projectSelectConfirm\" @reset=\"projectSelectReset\" />\n      </view>\n    </dropDown>\n  </div>\n</template>\n\n<script>\nimport dropDown from '@/components/dropDown/index.vue'\nimport dropDownCitySelect from '@/components/dropDown/dropDownCitySelect.vue'\nimport dropDownProjectSelect from '@/components/dropDown/dropDownProjectSelect.vue'\n\nexport default {\n  components: {\n    dropDown,\n    dropDownCitySelect,\n    dropDownProjectSelect,\n  },\n  data() {\n    return {\n      searchFormValue: {},\n      selectType: '',\n      options: {\n        company_area_id: {\n          label: '全部区域',\n          value: 999999,\n          child: [],\n          useSlot: true,\n        },\n        site_type: {\n          label: '站点类型',\n          value: 999999,\n          activeIndex: 0,\n          child: [\n            {\n              label: '全部站点',\n              value: 999999,\n            },\n          ],\n        },\n      },\n    }\n  },\n  mounted() {\n    this.getInstructorSiteTypeList()\n  },\n  methods: {\n    async getInstructorSiteTypeList() {\n      let res = await this.$api.getInstructorSiteTypeList()\n      if (res.code !== 200) {\n        this.$toast(res.message)\n        return\n      }\n      let list = res.data.list.map((item) => {\n        return {\n          label: item.name,\n          value: item.id,\n        }\n      })\n      list.unshift({\n        label: '全部站点',\n        value: 999999,\n      })\n      this.options['site_type'].child = list\n    },\n    init() {\n      this.$refs['dropDown'].init()\n    },\n    openDrop(e) {\n      this.selectType = e.name\n      this.$emit('open', e)\n    },\n    close() {\n      this.$refs['dropDown'].close()\n    },\n    changeDropDown(res) {\n      let obj = {}\n      res.map((e) => {\n        obj[e.name] = e.value\n      })\n      this.searchFormValue = {\n        ...this.searchFormValue,\n        ...obj,\n      }\n      this.handleSearch()\n    },\n    //  城市选择确认\n    citySelectConfirm(e) {\n      let item = e.data[e.data.length - 1]\n      let values = e.values\n      this.options['company_area_id'].label = item ? item.name : '全部区域'\n      this.searchFormValue['company_area_id'] = values.length ? values[values.length - 1] : ''\n      this.$refs['dropDown'].close()\n      this.handleSearch()\n    },\n    // 城市选择重置\n    citySelectReset() {\n      this.options['company_area_id'].label = '全部区域'\n      this.searchFormValue['company_area_id'] = ''\n      this.$refs['dropDown'].close()\n      this.handleSearch()\n    },\n    // 项目选择确认\n    projectSelectConfirm(e) {\n      let item = e.data[e.data.length - 1]\n      let values = e.values\n      this.options['tag_id'].label = item ? item.name : '全部项目'\n      this.searchFormValue['tag_id'] = values.length ? values[values.length - 1] : ''\n      this.$refs['dropDown'].close()\n      this.handleSearch()\n    },\n    // 项目选择重置\n    projectSelectReset() {\n      this.options['tag_id'].label = '全部项目'\n      this.searchFormValue['tag_id'] = ''\n      this.$refs['dropDown'].close()\n      this.handleSearch()\n    },\n    handleSearch() {\n      let params = JSON.parse(JSON.stringify(this.searchFormValue))\n      for (const key in params) {\n        const item = params[key]\n        if (item === '' || item === 999999) {\n          delete params[key]\n        }\n      }\n      this.$emit('search', params)\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\"></style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages-sub/instructorSite/components/instructorDropDown.vue'\nwx.createComponent(Component)"],"names":[],"mappings":"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"}