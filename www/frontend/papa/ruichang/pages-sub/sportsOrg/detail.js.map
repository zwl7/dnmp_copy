{"version":3,"file":"detail.js","sources":["../../../../../src/pages-sub/sportsOrg/detail.vue","../../../../../uniPage:/cGFnZXMtc3ViL3Nwb3J0c09yZy9kZXRhaWwudnVl"],"sourcesContent":["<template>\n  <navBar\n    navColor=\"transparent\"\n    title=\"站点详情\"\n    titleColor=\"#333\"\n    backColor=\"#333\"\n    :showBack=\"true\"\n  ></navBar>\n  <view class=\"train-detail-container\">\n    <view class=\"train-header\">\n      <swiper class=\"swiper-box\" :circular=\"true\" :autoplay=\"true\">\n        <swiper-item v-for=\"(item, index) in info.images_url\" :key=\"index\">\n          <view class=\"swiper-item\" @click=\"previewImage(item)\">\n            <image :src=\"item\" mode=\"aspectFill\" />\n          </view>\n        </swiper-item>\n      </swiper>\n      <view class=\"bottom-radius\"></view>\n    </view>\n    <view class=\"main-box pb-60\">\n      <view class=\"train-content\">\n        <view class=\"detail-title\">{{ info.name }}</view>\n        <view class=\"detail-status\">\n          <text v-for=\"(item, index) in info.tag_ids_arr\" :key=\"index\" class=\"status-type\">\n            {{ item.tag_id_str }}\n          </text>\n        </view>\n        <div class=\"detail-des\">\n          <view class=\"des-item\" v-if=\"false\">\n            <view class=\"left\">\n              <uv-icon name=\"clock\" color=\"#A5ADBA\" size=\"15\" class=\"d-icon\"></uv-icon>\n              <text class=\"d-name\">营业时间</text>\n            </view>\n            <text class=\"d-text\">无</text>\n          </view>\n          <view class=\"des-item\" v-if=\"false\">\n            <uv-icon name=\"clock\" color=\"#A5ADBA\" size=\"15\"></uv-icon>\n            <text class=\"d-name\">培训时间</text>\n            <text class=\"d-text sle\">无</text>\n          </view>\n          <view class=\"des-item\">\n            <view class=\"i-left\">\n              <uv-icon name=\"map\" color=\"#A5ADBA\" size=\"16\"></uv-icon>\n              <text class=\"d-name\">地址详情</text>\n              <view class=\"d-text\">\n                {{ info.address }}\n              </view>\n            </view>\n            <view class=\"right-icon\">\n              <view class=\"i-phone\" @click=\"toPhone(info)\">\n                <uni-icons\n                  custom-prefix=\"iconfont\"\n                  type=\"iconfont-dianhua\"\n                  size=\"20\"\n                  :color=\"themePrimaryColorGetter\"\n                ></uni-icons>\n              </view>\n              <uni-icons\n                custom-prefix=\"iconfont\"\n                type=\"iconfont-locationfill\"\n                size=\"20\"\n                :color=\"themePrimaryColorGetter\"\n                @click=\"toLocation(info)\"\n              ></uni-icons>\n            </view>\n          </view>\n        </div>\n      </view>\n      <view class=\"line\"></view>\n      <view class=\"train-des\">\n        <view class=\"des\">\n          <view class=\"des-title\">详细介绍</view>\n          <view class=\"des-content\">\n            <rich-text :nodes=\"info.des\"></rich-text>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <view class=\"train-footer\">\n      <view class=\"footer-main\">\n        <view :class=\"['share', { collect: isCollect }]\" @click=\"toCollect\" v-if=\"false\">\n          <view class=\"icon\">\n            <image :src=\"isCollect ? collectFill : collect\" class=\"image\"></image>\n          </view>\n          <text>收藏</text>\n        </view>\n        <button class=\"share button\" open-type=\"share\">\n          <view class=\"icon\">\n            <image :src=\"shareIcon\" class=\"image\"></image>\n          </view>\n          <text>分享</text>\n        </button>\n        <bottomButton class=\"apply-btn\" @click=\"toPhone\">电话咨询</bottomButton>\n      </view>\n      <uv-safe-bottom></uv-safe-bottom>\n    </view>\n  </view>\n</template>\n<script>\nimport mapFill from '@/static/images/map-fill.png'\nimport phoneFill from '@/static/images/phone-fill.png'\nimport navBar from '@/components/navBar/index.vue'\nimport { getWxSiteDetail, addWxCollect } from '@/apis/common.js'\nimport bottomButton from '@/components/bottomButton.vue'\nimport shareIcon from '@/static/images/share.png'\nimport collectFill from '@/static/images/star-fill.png'\nimport collect from '@/static/images/star.png'\nimport shareMixins from '@/mixins/shareMixins.js'\nimport { previewImage } from '@/utils/index'\nimport themeMixins from '@/mixins/themeMixins.js'\nexport default {\n  mixins: [shareMixins, themeMixins],\n  components: {\n    navBar,\n    bottomButton,\n  },\n  data() {\n    return {\n      previewImage,\n      collectFill,\n      collect,\n      shareIcon,\n      phoneFill,\n      mapFill,\n      info: {},\n      form: {},\n      isCollect: false,\n    }\n  },\n  onUnload() {},\n  onLoad(options) {\n    if (options.site_id) {\n      let form = {\n        site_id: options.site_id,\n      }\n      this.form = { ...form }\n      this.getDetail()\n    }\n  },\n  methods: {\n    toLocation() {\n      this.$toLocation(this.info)\n    },\n    toPhone() {\n      this.$callPhone(this.info)\n    },\n    toCollect() {\n      uni.$uv.throttle(async () => {\n        let flag = await getApp().judgeIsAuth()\n        if (!flag) {\n          return\n        }\n        let isCollect = true\n        if (this.info.is_collect == 1) {\n          isCollect = false\n        }\n        let params = {\n          type_id: 1,\n          type: 2,\n          small_type_id: this.info.type_id,\n          topic_id: this.form.site_id,\n          status: isCollect ? 1 : 2,\n        }\n        let res = await addWxCollect(params)\n        if (res.code == 200) {\n          this.starStatus = this.info.is_collect ? 2 : 1\n          if (this.info.is_collect == 1) {\n            uni.showToast({\n              type: 'fail',\n              title: '取消收藏',\n            })\n            this.isCollect = false\n            this.info.is_collect = 2\n          } else {\n            uni.showToast({\n              type: 'success',\n              title: '收藏成功',\n            })\n            this.isCollect = true\n            this.info.is_collect = 1\n          }\n        } else {\n          uni.showToast({\n            icon: 'none',\n            title: res.message,\n          })\n        }\n      }, 1000)\n    },\n    // toCollect () {\n    //   uni.$uv.throttle(async () => {\n    //     let flag = await getApp().judgeIsAuth()\n    //     if (!flag) {\n    //       return\n    //     }\n    //     this.starStatus = this.info.is_collect ? 2 : 1\n    //     if (this.info.is_collect == 1) {\n    //       uni.showToast({\n    //         type: 'fail',\n    //         title: '取消收藏'\n    //       })\n    //       this.isCollect = false\n    //     } else {\n    //       uni.showToast({\n    //         type: 'success',\n    //         title: '收藏成功'\n    //       })\n    //       this.isCollect = true\n    //     }\n\n    //     let params = {\n    //       type_id: 1,\n    //       type: 2,\n    //       small_type_id: this.info.type_id,\n    //       topic_id: this.form.site_id,\n    //       status: this.isCollect ? 1 : 2\n    //     }\n    //     let res = await addWxCollect(params)\n    //   }, 1000)\n    // },\n    async getDetail() {\n      let res = await getWxSiteDetail(this.form)\n      if (res.code == 200) {\n        res.data.des = this.$formatRichText(res.data.des, '暂无内容')\n        this.info = res.data\n        if (this.info.images_url.length == 0) {\n          this.info.images_url = [\n            'https://apitest.wesais.cn/images/20240221/84dfeedf99e52da3f3f98a6cc7c76fcc.png',\n          ]\n        }\n        this.isCollect = res.data.is_collect == 1 ? true : false\n        this.share.title = res.data.name\n      }\n    },\n    apply(form) {\n      uniStorage.set('APPLYFORM', {\n        trainId: form.train_activity_id,\n        title: form.promote_name,\n      })\n      uni.navigateTo({\n        url: `/pages/trainApply/index`,\n      })\n    },\n  },\n}\n</script>\n<style lang=\"scss\" scoped>\n$yc-primary: #1b8bff;\n$yc-primary-light: #6ad1ff;\n\n.train-detail-container {\n  padding-bottom: 100rpx;\n  min-height: 100vh;\n  box-sizing: border-box;\n  background: #fff;\n  .train-header {\n    height: 696rpx;\n    position: relative;\n    image {\n      display: block;\n      width: 100%;\n      height: 100%;\n    }\n    swiper {\n      height: 696rpx;\n    }\n    .swiper-item {\n      position: relative;\n      height: 696rpx;\n    }\n\n    .h-time {\n      position: absolute;\n      right: 32rpx;\n      bottom: 44rpx;\n      display: flex;\n      align-items: center;\n      font-size: 24rpx;\n      color: #fff;\n\n      .t-title {\n        font-weight: 500;\n      }\n\n      .count-down {\n        margin-left: 32rpx;\n\n        .time {\n          display: flex;\n          align-items: center;\n          font-size: 24rpx;\n          color: #f56c6c;\n\n          .time-item {\n            min-width: 46rpx;\n            height: 46rpx;\n            font-size: 28rpx;\n            text-align: center;\n            color: #fff;\n            background-color: #f56c6c;\n            border-radius: 8rpx;\n            font-weight: 600;\n            line-height: 46rpx;\n          }\n\n          .time-text {\n            padding: 0 8rpx;\n\n            &:last-child {\n              padding-right: 0;\n            }\n          }\n        }\n      }\n    }\n  }\n  .bottom-radius {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 32rpx;\n    background-color: #fff;\n    border-radius: 32rpx 32rpx 0 0;\n  }\n  .main-box {\n  }\n\n  .train-content {\n    position: relative;\n    padding: 0 32rpx 32rpx;\n    border-radius: 32rpx 32rpx 0 0;\n\n    .detail-title {\n      font-size: 36rpx;\n      font-weight: 610;\n    }\n    .detail-status {\n      padding: 24rpx 0;\n      font-size: 24rpx;\n\n      .status-text {\n        display: inline-block;\n        margin-bottom: 5rpx;\n        width: fit-content;\n        min-height: 30rpx;\n        padding: 4rpx 8rpx;\n        margin-right: 15rpx;\n        color: #fff;\n        background-color: #4cd964;\n\n        &.warning {\n          background-color: #f0ad4e;\n        }\n\n        &.error {\n          background-color: #dd524d;\n        }\n      }\n\n      .status-type {\n        display: inline-block;\n        margin-bottom: 5rpx;\n        width: fit-content;\n        margin-right: 5rpx;\n        padding: 4rpx 20rpx;\n        color: $yc-primary;\n        background: $yc-primary-light;\n        border: 1px solid $yc-primary-light;\n      }\n    }\n\n    .detail-des {\n      display: flex;\n      flex-direction: column;\n      font-size: 24rpx;\n      color: #606266;\n\n      .des-item {\n        display: flex;\n        align-items: flex-start;\n        padding: 16rpx 0;\n\n        .left {\n          flex-shrink: 0;\n          display: flex;\n          align-items: center;\n        }\n        .d-name {\n          padding: 0 10rpx;\n          color: #909399;\n          flex-shrink: 0;\n        }\n\n        &:last-child {\n          justify-content: space-between;\n\n          .i-left {\n            display: flex;\n            align-items: flex-start;\n          }\n          .i-phone {\n            flex-shrink: 0;\n            margin-right: 46rpx;\n          }\n          .i-right {\n            flex-shrink: 0;\n            // border-radius: 50%;\n          }\n        }\n\n        .right-icon {\n          flex-shrink: 0;\n          display: flex;\n          padding-left: 16rpx;\n        }\n      }\n    }\n  }\n\n  .apply-count {\n    position: relative;\n    display: flex;\n    align-items: center;\n    margin-bottom: 16rpx;\n    font-size: 24rpx;\n    color: #909399;\n    background-color: #fff;\n\n    .img-wrap {\n      padding: 24rpx 32rpx;\n      margin-right: 8rpx;\n\n      img,\n      image {\n        margin-right: -18rpx;\n        width: 56rpx;\n        height: 56rpx;\n        border-radius: 50%;\n      }\n    }\n  }\n  .line {\n    height: 30rpx;\n    background-color: #f6f7f9;\n  }\n  .train-des {\n    position: relative;\n    // top: -30rpx;\n    padding: 32rpx 32rpx 10rpx;\n\n    .des-title {\n      font-size: 32rpx;\n      font-weight: 610;\n    }\n\n    .des-item {\n      display: flex;\n      flex-direction: column;\n      padding-bottom: 32rpx;\n      font-weight: 500;\n      font-size: 28rpx;\n\n      .i-title {\n        padding-bottom: 16rpx;\n        font-size: 28rpx;\n        font-weight: 500;\n      }\n\n      &:last-child {\n        padding-top: 16rpx;\n        color: #606266;\n      }\n    }\n    .des-content {\n      margin-top: 16rpx;\n    }\n  }\n\n  .train-footer {\n    position: fixed;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: #fff;\n    box-shadow: 0 2px 5px rgb(66 64 64 / 20%);\n    .footer-main {\n      display: flex;\n      align-items: center;\n      padding: 10rpx 32rpx 10rpx 0;\n      .icon {\n        width: 40rpx;\n        height: 40rpx;\n        .image {\n          width: 100%;\n          height: 100%;\n        }\n      }\n    }\n\n    .button {\n      background-color: #fff;\n      padding: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex-direction: column;\n\n      &::after {\n        border: none;\n      }\n\n      width: 100%;\n      height: 100%;\n      background-color: transparent;\n    }\n    .collect {\n      color: $yc-primary !important;\n      ::v-deep .uni-icons {\n        color: $yc-primary !important;\n      }\n    }\n    .share {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      font-size: 20rpx;\n      color: #969799;\n      width: 112rpx;\n      line-height: 1;\n      //   line-height: 1.8;\n      text {\n        line-height: 1.8;\n      }\n    }\n\n    .apply-btn {\n      height: 80rpx;\n      font-size: 28rpx;\n      color: #fff;\n      background: linear-gradient(227.21deg, #1b8bff 0%, #6ad1ff 100%);\n      border-radius: 200rpx;\n      flex: 1;\n      line-height: 80rpx;\n    }\n  }\n}\n\n.des-content {\n  font-size: 30rpx;\n  color: #303133;\n  letter-spacing: 0;\n  line-height: 52rpx;\n  white-space: pre-wrap !important;\n  max-width: 100% !important;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages-sub/sportsOrg/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["shareMixins","themeMixins","previewImage","collectFill","collect","shareIcon","phoneFill","mapFill","uni","addWxCollect","getWxSiteDetail"],"mappings":"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"}