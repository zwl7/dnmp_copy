{"version":3,"file":"index.js","sources":["../../../../../../src/pagesSub/platform/yunLesson/index.vue","../../../../../../uniPage:/cGFnZXNTdWIvcGxhdGZvcm0veXVuTGVzc29uL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <navBar\n      :navColor=\"navColor\"\n      title=\"云课堂\"\n      titleColor=\"#323233\"\n      backColor=\"#323233\"\n      :showBack=\"true\"\n    ></navBar>\n    <view class=\"nav_top_bg\">\n      <image :src=\"topBgImage\" class=\"image\"></image>\n    </view>\n    <view class=\"main_content_container\">\n      <view class=\"tab_container\" :style=\"{ top: navBarHeight + 'px', backgroundColor: navColor }\">\n        <uv-tabs\n          :list=\"tab_list\"\n          :scrollable=\"tabScrollable\"\n          :lineColor=\"themeTabsLineColorGetter\"\n          :activeStyle=\"{\n            color: '#253858',\n            fontWeight: '610',\n          }\"\n          :inactiveStyle=\"{\n            color: '#505F79',\n            fontWeight: '400',\n          }\"\n          @change=\"changeTab\"\n        ></uv-tabs>\n      </view>\n      <view class=\"page-pad\" v-if=\"topItem\">\n        <yunLessonItem type=\"top\" :info=\"topItem\" @click=\"handleClick(topItem)\"></yunLessonItem>\n      </view>\n      <view class=\"main_list\">\n        <view class=\"main_list_item\" v-for=\"(item, index) in mainList\" :key=\"index\">\n          <yunLessonItem type=\"normal\" :info=\"item\" @click=\"handleClick(item)\"></yunLessonItem>\n        </view>\n      </view>\n      <empty v-if=\"showEmpty\"></empty>\n      <loadMore :status=\"loadStatus\" v-if=\"showLoadMore\" />\n    </view>\n  </view>\n</template>\n\n<script>\nimport navBar from '@/components/navBar/index.vue'\nimport yunLessonItem from './components/yunLessonItem.vue'\nimport listMixins from '@/mixins/listMixins.js'\nimport { getNewsList, getWxNewsType } from '@/apis/common.js'\nimport shareMixins from '@/mixins/shareMixins.js'\nimport themeMixins from '@/mixins/themeMixins.js'\nexport default {\n  mixins: [listMixins, shareMixins, themeMixins],\n  components: {\n    navBar,\n    yunLessonItem,\n  },\n  data() {\n    return {\n      topBgImage: this.getThemeIcon('yun_lesson_bg'),\n      navBarHeight: 0,\n      navColor: 'transparent',\n      tabColor: 'transparent',\n      tab_type: 1006,\n      tag_ids: '',\n      tab_list: [],\n      unique_code: '',\n    }\n  },\n  computed: {\n    topItem() {\n      return this.list[0] ?? ''\n    },\n    mainList() {\n      if (this.list.length > 1) {\n        let list = JSON.parse(JSON.stringify(this.list))\n        return list.slice(1)\n      } else {\n        return []\n      }\n    },\n    tabScrollable() {\n      return this.tab_list.length > 5\n    },\n  },\n  async onLoad(options) {\n    const app = getApp()\n    let { navBarHeight } = app.globalData\n    this.navBarHeight = navBarHeight\n    if (options.unique_code) {\n      this.unique_code = options.unique_code\n    }\n    await this.getTopList()\n    this.getList()\n  },\n  onPageScroll(event) {\n    let scrollTop = event.scrollTop\n    if (scrollTop > 60) {\n      this.navColor = '#d7eafe'\n    } else {\n      this.navColor = 'transparent'\n    }\n  },\n\n  methods: {\n    changeTab(e) {\n      this.tag_ids = e.value\n      this.resetData()\n    },\n    // 获取类型顶部\n    getTopList() {\n      return new Promise(async (resolve) => {\n        let param = {}\n        if (this.unique_code) {\n          param = {\n            unique_code: this.unique_code,\n          }\n        }\n        const res = await getWxNewsType(param)\n        const arr = res.data[0].label.split(',')\n        const label = [{ name: '全部', value: '全部' }]\n        arr.map((e, index) => {\n          label.push({\n            name: e,\n            value: e,\n          })\n        })\n        this.tab_list = label.length > 1 ? label : []\n        this.tab_type = res.data[0].value\n        this.tag_ids = label[0].value\n        resolve(1)\n      })\n    },\n    async getList(refresh) {\n      const param = {\n        page: this.page,\n        size: 10,\n        type: this.tab_type,\n        kind_id: 2,\n        tag_ids: this.tag_ids,\n      }\n      console.log(param)\n      if (param.tag_ids && param.tag_ids === '全部') {\n        delete param.tag_ids\n      }\n      this.loading = true\n      let res = await getNewsList(param)\n      this.getListExtend(res, refresh)\n    },\n    handleDataCallBack(list) {\n      let showList = []\n      list.forEach((e) => {\n        let obj = { show_image: '', show_time: '', ...e }\n        if (e.images_url.length > 0) {\n          obj.show_image = e.images_url[0]\n        }\n        let show_time = e.released_time ? e.released_time : e.c_time\n        obj.show_time = this.$timeFrom(new Date(show_time).getTime(), 'yyyy-mm-dd hh:MM:ss')\n        showList.push(obj)\n      })\n      return showList\n    },\n    handleClick(item) {\n      let { url, news_id } = item\n      if (url) {\n        uni.navigateTo({\n          url: '/pages/view/webView?url=' + encodeURIComponent(url),\n        })\n        return\n      }\n      uni.navigateTo({\n        url: '/pagesSub/platform/yunLesson/detail?news_id=' + news_id,\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  box-sizing: border-box;\n  min-height: 100vh;\n  background: $hubei-list-page-bg-color;\n}\n\n.main_content_container {\n  position: relative;\n}\n\n.nav_top_bg {\n  height: 290rpx;\n\n  .image {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.tab_container {\n  position: sticky;\n  box-shadow: 0 -1px $hubei-list-page-bg-color;\n  top: 0;\n  left: 0;\n  z-index: 100;\n  background-color: transparent;\n}\n\n.page-pad {\n  padding: 0 32rpx 22rpx 32rpx;\n  margin-top: 30rpx;\n  box-sizing: border-box;\n}\n\n.main_list {\n  padding: 0 32rpx 0 32rpx;\n  box-sizing: border-box;\n  display: flex;\n  flex-wrap: wrap;\n\n  .main_list_item {\n    width: 50%;\n    box-sizing: border-box;\n    margin-bottom: 22rpx;\n\n    &:nth-child(odd) {\n      padding-right: 11rpx;\n    }\n\n    &:nth-child(even) {\n      padding-left: 11rpx;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/platform/yunLesson/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["listMixins","shareMixins","themeMixins","getWxNewsType","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,MAAA,SAAA,MAAA;AACA,MAAA,gBAAA,MAAA;AAKA,MAAA,YAAA;AAAA,EACA,QAAA,CAAAA,kBAAAA,YAAAC,mBAAA,aAAAC,8BAAA;AAAA;IAEA;AAAA;;EAGA,OAAA;AACA,WAAA;AAAA,MACA,YAAA,KAAA,aAAA,eAAA;AAAA,MACA,cAAA;AAAA;;;;;MAMA,aAAA;AAAA,IACA;AAAA;EAEA,UAAA;AAAA,IACA,UAAA;;AACA,cAAA,UAAA,KAAA,CAAA,MAAA,YAAA;AAAA;;;AAIA,YAAA,OAAA,KAAA,MAAA,KAAA,UAAA,KAAA,IAAA,CAAA;AACA,eAAA,KAAA,MAAA,CAAA;AAAA;AAEA,eAAA,CAAA;AAAA,MACA;AAAA;IAEA,gBAAA;;;;EAIA,OAAA,SAAA;AAAA;AACA,YAAA,MAAA,OAAA;AACA,UAAA,EAAA,aAAA,IAAA,IAAA;;;AAGA,aAAA,cAAA,QAAA;AAAA,MACA;AACA,YAAA,KAAA,WAAA;;;;EAGA,aAAA,OAAA;;AAEA,QAAA,YAAA,IAAA;;;;IAIA;AAAA;EAGA,SAAA;AAAA;AAEA,WAAA,UAAA,EAAA;AACA,WAAA,UAAA;AAAA;;;AAIA,aAAA,IAAA,QAAA,CAAA,YAAA;;AAEA,YAAA,KAAA,aAAA;AACA,kBAAA;AAAA;UAEA;AAAA,QACA;AACA,cAAA,MAAA,MAAAC,YAAAA,cAAA,KAAA;AACA,cAAA,MAAA,IAAA,KAAA,CAAA,EAAA,MAAA,MAAA,GAAA;AACA,cAAA,QAAA,CAAA,EAAA,MAAA,MAAA,OAAA,KAAA,CAAA;AACA,YAAA,IAAA,CAAA,GAAA,UAAA;;YAEA,MAAA;AAAA,YACA,OAAA;AAAA;;AAGA,aAAA,WAAA,MAAA,SAAA,IAAA,QAAA,CAAA;AACA,aAAA,WAAA,IAAA,KAAA,CAAA,EAAA;;AAEA,gBAAA,CAAA;AAAA;;IAGA,QAAA,SAAA;AAAA;;UAEA,MAAA,KAAA;AAAA,UACA,MAAA;AAAA,UACA,MAAA,KAAA;AAAA,UACA,SAAA;AAAA,UACA,SAAA,KAAA;AAAA,QACA;AACA,gBAAA,IAAA,KAAA;AACA,YAAA,MAAA,WAAA,MAAA,YAAA,MAAA;AACA,iBAAA,MAAA;AAAA,QACA;AACA,aAAA,UAAA;;AAEA,aAAA,cAAA,KAAA,OAAA;AAAA;;;;AAIA,WAAA,QAAA,CAAA,MAAA;AACA,YAAA,MAAA,iBAAA,YAAA,IAAA,WAAA,MAAA;;;QAGA;;AAEA,YAAA,YAAA,KAAA,UAAA,IAAA,KAAA,SAAA,EAAA,QAAA,GAAA,qBAAA;AACA,iBAAA,KAAA,GAAA;AAAA;;;IAIA,YAAA,MAAA;AACA,UAAA,EAAA,KAAA,YAAA;AACA,UAAA,KAAA;AACAC,sBAAAA,MAAA,WAAA;AAAA;;;MAIA;AACAA,oBAAAA,MAAA,WAAA;AAAA;;;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7KA,GAAG,WAAW,eAAe;"}