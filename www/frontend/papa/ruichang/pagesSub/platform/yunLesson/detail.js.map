{"version":3,"file":"detail.js","sources":["../../../../../../src/pagesSub/platform/yunLesson/detail.vue","../../../../../../uniPage:/cGFnZXNTdWIvcGxhdGZvcm0veXVuTGVzc29uL2RldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"video-detail-container\">\n    <video\n      class=\"video\"\n      :src=\"video_url\"\n      :direction=\"90\"\n      autoplay\n      @fullscreenchange=\"fullscreenchange\"\n    />\n    <view class=\"video-content\">\n      <view class=\"top\">\n        <view class=\"v-title\">{{ info.name }}</view>\n        <view class=\"v-statistics flex-direction-row flx-justify-between\">\n          <view class=\"flex\">\n            <pa-tag :text=\"info.type_str\"></pa-tag>\n            <div class=\"play-count\">{{ info.visit_count }}播放</div>\n            <div class=\"time\">{{ info.show_time }}</div>\n          </view>\n          <view class=\"f-right-item flex-direction-row\" @click=\"handlePraise\">\n            <text class=\"text\">{{ info.love_count || 0 }}</text>\n            <uv-icon :name=\"info.is_love ? praiseFill : praise\" size=\"15\"></uv-icon>\n          </view>\n        </view>\n      </view>\n      <view class=\"report\" v-if=\"video_type != 'fit' && info.status == 2\" @click=\"openInform(item)\">\n        <uni-icons\n          custom-prefix=\"iconfont\"\n          type=\"icon-report\"\n          color=\"#C8C9CC\"\n          size=\"16\"\n        ></uni-icons>\n        <view class=\"title\">举报</view>\n      </view>\n      <view class=\"brief-text\">\n        <view class=\"brief-title\">简介</view>\n        <view class=\"brief-content\">\n          <rich-text :nodes=\"info.des\" space=\"emsp\"></rich-text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n<script>\nimport shareMixins from '@/mixins/shareMixins.js'\nimport { getNewsDetail, wxMemberDataReport } from '@/apis/common.js'\nimport { formatRichText } from '@/utils/index'\nimport praiseFill from '@/static/images/praise-fill.png'\nimport praise from '@/static/images/praise.png'\nexport default {\n  mixins: [shareMixins],\n  data() {\n    return {\n      praiseFill,\n      praise,\n      load_finish: false,\n      info: {\n        des: ``,\n      },\n      news_id: '',\n      video_url: '',\n    }\n  },\n  onLoad(options) {\n    this.news_id = options.news_id\n    this.getNewsDetail()\n    this.share = {\n      title: '',\n      withShareTicket: true,\n    }\n  },\n  methods: {\n    handlePraise() {\n      uni.$uv.throttle(async () => {\n        let flag = await getApp().judgeIsAuth()\n        if (!flag) {\n          return\n        }\n        let res = await wxMemberDataReport({\n          resource_type: 12,\n          resource_id: this.news_id,\n          action: !this.info.is_love ? 'add' : 'cancel',\n        })\n        if (res.code == 200) {\n          this.info.is_love = !this.info.is_love\n          let loveNum = Number(this.info.love_count || 0)\n          this.info.love_count = this.info.is_love ? loveNum + 1 : loveNum - 1\n          //  uni.showToast({\n          //   type: \"fail\",\n          //   title: \"取消收藏\",\n          // });\n        } else {\n          uni.showToast({\n            type: 'none',\n            title: res.message,\n          })\n        }\n      }, 1000)\n    },\n    async getNewsDetail() {\n      let res = await getNewsDetail({\n        news_id: this.news_id,\n      })\n      if (res.code == 200) {\n        let data = res.data\n        data.des = formatRichText(data.des)\n        if (!data.des) {\n          data.des = '暂无简介'\n        }\n        let show_time = data.released_time ? data.released_time : data.c_time\n        data.show_time = this.$timeFrom(new Date(show_time).getTime(), 'yyyy-mm-dd hh:MM:ss')\n        this.info = data\n        this.load_finish = true\n        this.video_url = data.video_url[0].video_url\n        if (data.url) {\n          this.$openUrl(data.url)\n        }\n        this.share.title = res.data.name\n      } else {\n        console.error(res)\n      }\n    },\n    fullscreenchange(e) {\n      console.log(e)\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.video-detail-container {\n  .video {\n    width: 100%;\n    height: 422rpx;\n    display: block;\n    margin: 0 auto;\n  }\n  .video-content {\n    padding: 32rpx;\n    padding-bottom: 100px;\n    margin-bottom: 24rpx;\n    background-color: #fff;\n    position: relative;\n    .top {\n      // padding-right: 50rpx;\n    }\n    .v-title {\n      font-size: 36rpx;\n      font-weight: 600;\n    }\n    .v-statistics {\n      // display: flex;\n      // align-items: center;\n      margin: 20rpx 0 40rpx;\n      font-size: 24rpx;\n      color: #969799;\n      .tag {\n        color: #408bff;\n        border-radius: 4rpx;\n        border: 1px solid #408bff;\n        padding: 0 8rpx;\n      }\n      .play-count {\n        padding: 0 32rpx;\n      }\n      .time {\n        padding: 0 8rpx;\n      }\n      .f-right-item {\n        .text {\n          padding-right: 10rpx;\n        }\n      }\n    }\n    .brief-text {\n      font-size: 26rpx;\n      color: #646566;\n      .brief-title {\n        font-size: 32rpx;\n        padding-bottom: 16rpx;\n        font-weight: 600;\n        color: #323233;\n      }\n      .brief-content {\n        text-indent: 2em;\n        font-size: 28rpx;\n        color: #606266;\n        letter-spacing: 0;\n        line-height: 48rpx;\n        white-space: normal !important;\n        max-width: 100% !important;\n      }\n    }\n\n    .report {\n      position: absolute;\n      top: 32rpx;\n      right: 32rpx;\n      color: #c8c9cc;\n      font-size: 22rpx;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n  }\n  .coach-content {\n    padding: 32rpx;\n    background-color: #fff;\n    .introduce {\n      display: flex;\n      align-items: center;\n      padding-bottom: 32rpx;\n      border-bottom: 1px solid #ebedf0;\n      .coach-photo {\n        width: 90rpx;\n        height: 90rpx;\n        border-radius: 50%;\n        margin-right: 24rpx;\n      }\n      .coach-info {\n        display: flex;\n        flex-direction: column;\n        font-size: 24rpx;\n        color: #969799;\n        flex: 1;\n        .coach-name {\n          color: #323233;\n          font-size: 32rpx;\n          font-weight: 600;\n          padding-bottom: 10rpx;\n        }\n      }\n    }\n    .course {\n      border: 1px solid red;\n    }\n  }\n  .footer {\n    display: flex;\n    justify-content: center;\n    color: #646566;\n    font-size: 28rpx;\n    background-color: #fff;\n    padding: 32rpx;\n    .f-item {\n      display: flex;\n      align-items: center;\n      background-color: #fff;\n      line-height: 1;\n      .count {\n        padding-left: 16rpx;\n      }\n      &:last-child {\n        padding-left: 226rpx;\n      }\n    }\n  }\n}\n//  分享\n.share .share-container {\n  padding: 40rpx 0 0;\n  border-radius: 24rpx 24rpx 0 0;\n  background-color: #fff;\n  text-align: center;\n  .s-title {\n    font-size: 28rpx;\n    padding-bottom: 40rpx;\n  }\n  .s-list {\n    display: flex;\n    justify-content: space-between;\n    font-size: 24rpx;\n    padding: 0 32rpx 16rpx;\n    border-bottom: 16rpx solid $hubei-primary-bg-grey;\n    .s-item-btn {\n      flex: 1;\n      background-color: #fff;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      image {\n        width: 96rpx;\n        height: 96rpx;\n        margin-bottom: 16rpx;\n      }\n      .i-name {\n        line-height: normal;\n        font-size: 24rpx;\n      }\n    }\n  }\n  .s-footer {\n    font-size: 32rpx;\n    color: #646566;\n    padding: 26rpx 0;\n  }\n}\n.bottm_box ::v-deep .bottom-button {\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n  padding-top: 0 !important;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/platform/yunLesson/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["shareMixins","praiseFill","praise","uni","wxMemberDataReport","getNewsDetail","formatRichText"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,MAAA,YAAA;AAAA,EACA,QAAA,CAAAA,mBAAAA,WAAA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,kBACAC,cAAA;AAAA,MACA,QAAAC,cAAA;AAAA,MACA,aAAA;AAAA,MACA,MAAA;AAAA,QACA,KAAA;AAAA,MACA;AAAA,MACA,SAAA;AAAA,MACA,WAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA,SAAA;AACA,SAAA,UAAA,QAAA;AACA,SAAA,cAAA;AACA,SAAA,QAAA;AAAA,MACA,OAAA;AAAA,MACA,iBAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,eAAA;AACAC,0BAAA,IAAA,SAAA,MAAA;AACA,YAAA,OAAA,MAAA,OAAA,EAAA,YAAA;AACA,YAAA,CAAA,MAAA;AACA;AAAA,QACA;AACA,YAAA,MAAA,MAAAC,+BAAA;AAAA,UACA,eAAA;AAAA,UACA,aAAA,KAAA;AAAA,UACA,QAAA,CAAA,KAAA,KAAA,UAAA,QAAA;AAAA,QACA,CAAA;AACA,YAAA,IAAA,QAAA,KAAA;AACA,eAAA,KAAA,UAAA,CAAA,KAAA,KAAA;AACA,cAAA,UAAA,OAAA,KAAA,KAAA,cAAA,CAAA;AACA,eAAA,KAAA,aAAA,KAAA,KAAA,UAAA,UAAA,IAAA,UAAA;AAAA,eAKA;AACAD,wBAAAA,MAAA,UAAA;AAAA,YACA,MAAA;AAAA,YACA,OAAA,IAAA;AAAA,UACA,CAAA;AAAA,QACA;AAAA,MACA,IAAA,GAAA;AAAA,IACA;AAAA,IACA,gBAAA;AAAA;AACA,YAAA,MAAA,MAAAE,0BAAA;AAAA,UACA,SAAA,KAAA;AAAA,QACA,CAAA;AACA,YAAA,IAAA,QAAA,KAAA;AACA,cAAA,OAAA,IAAA;AACA,eAAA,MAAAC,2BAAA,KAAA,GAAA;AACA,cAAA,CAAA,KAAA,KAAA;AACA,iBAAA,MAAA;AAAA,UACA;AACA,cAAA,YAAA,KAAA,gBAAA,KAAA,gBAAA,KAAA;AACA,eAAA,YAAA,KAAA,UAAA,IAAA,KAAA,SAAA,EAAA,QAAA,GAAA,qBAAA;AACA,eAAA,OAAA;AACA,eAAA,cAAA;AACA,eAAA,YAAA,KAAA,UAAA,CAAA,EAAA;AACA,cAAA,KAAA,KAAA;AACA,iBAAA,SAAA,KAAA,GAAA;AAAA,UACA;AACA,eAAA,MAAA,QAAA,IAAA,KAAA;AAAA,eACA;AACA,kBAAA,MAAA,GAAA;AAAA,QACA;AAAA,MACA;AAAA;AAAA,IACA,iBAAA,GAAA;AACA,cAAA,IAAA,CAAA;AAAA,IACA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5HA,GAAG,WAAW,eAAe;"}