{"version":3,"file":"index.js","sources":["../../../../../../src/pagesSub/platform/sportsSite/index.vue","../../../../../../uniPage:/cGFnZXNTdWIvcGxhdGZvcm0vc3BvcnRzU2l0ZS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <navBar\n      :navColor=\"navColor\"\n      title=\"站点\"\n      moduleKey=\"association\"\n      searchColor=\"#f3f9ff\"\n      titleColor=\"#323233\"\n      backColor=\"#323233\"\n      :showBack=\"true\"\n    ></navBar>\n    <view class=\"nav_top_bg\">\n      <image :src=\"topBgImage\" class=\"image\"></image>\n    </view>\n    <view class=\"main_content_container\">\n      <view class=\"tab_container\" :style=\"{ top: navBarHeight + 'px' }\">\n        <dropDown\n          sign=\"associationItem\"\n          ref=\"dropDown\"\n          :options=\"options\"\n          :customStyle=\"customStyle\"\n          @change=\"changeDropDown\"\n          @open=\"openDrop\"\n        >\n          <view v-show=\"selectType == 'belong_place_id'\">\n            <dropDownCitySelect\n              :defaultSelected=\"areaSelected\"\n              :options=\"areaOptions\"\n              :show-location=\"false\"\n              :show-distance=\"false\"\n              @confirm=\"citySelectConfirm\"\n              @reset=\"citySelectReset\"\n            />\n          </view>\n        </dropDown>\n      </view>\n      <view class=\"page-pad\" v-for=\"(item, index) in list\" :key=\"index\">\n        <associationItem :info=\"item\" @click=\"toDetail(item)\"></associationItem>\n      </view>\n      <empty v-if=\"showEmpty\"></empty>\n      <loadMore :status=\"loadStatus\" v-if=\"showLoadMore\" />\n    </view>\n  </view>\n</template>\n<script>\nimport navBar from '@/components/navBar/index.vue'\nimport associationItem from './components/associationItem.vue'\nimport dropDownCitySelect from '@/components/dropDown/dropDownCitySelect.vue'\nimport dropDown from '@/components/dropDown/index.vue'\nimport {\n  getWxActivityType,\n  getSportsOrganizationType,\n  getWxSiteList,\n  getCompanyAreaAll,\n} from '@/apis/common.js'\nimport listMixins from '@/mixins/listMixins.js'\nimport shareMixins from '@/mixins/shareMixins.js'\nimport themeMixins from '@/mixins/themeMixins.js'\nexport default {\n  mixins: [listMixins, shareMixins, themeMixins],\n  components: {\n    navBar,\n    dropDown,\n    associationItem,\n    dropDownCitySelect,\n  },\n  data() {\n    return {\n      topBgImage: this.getThemeIcon('association_top_bg'),\n      navBarHeight: 0,\n      navColor: 'transparent',\n      customStyle: {\n        backgroundColor: 'transparent',\n      },\n      searchParams: {},\n      areaSelected: [],\n      areaOptions: [],\n      selectType: '',\n      options: {\n        belong_place_id: {\n          label: '市/县',\n          value: '',\n          activeIndex: 0,\n          child: [],\n          useSlot: true,\n        },\n        style_id: {\n          label: '站点类型',\n          value: '',\n          activeIndex: 0,\n          child: [\n            {\n              label: '全部',\n              value: '',\n            },\n            { label: '广场', value: 0 },\n            { label: '公园', value: 1 },\n            { label: '城市社区', value: 2 },\n            { label: '农村社区', value: 3 },\n            { label: '其他', value: 4 },\n          ],\n        },\n        // type_id: {\n        //   label: \"类型\",\n        //   value: \"\",\n        //   activeIndex: 0,\n        //   child: [],\n        // },\n        distance: {\n          label: '距离',\n          value: '',\n          activeIndex: 0,\n          child: [\n            {\n              label: '不限制',\n              value: '',\n            },\n            {\n              label: '1km',\n              value: '1000',\n            },\n            {\n              label: '3km',\n              value: '3000',\n            },\n            {\n              label: '5km',\n              value: '5000',\n            },\n            {\n              label: '20km',\n              value: '20000',\n            },\n          ],\n        },\n      },\n    }\n  },\n  onLoad() {\n    const app = getApp()\n    let { navBarHeight } = app.globalData\n    this.navBarHeight = navBarHeight\n    // this.getSportTag();\n    // this.getOrganizationType()\n    this.getCompanyAreaList()\n    this.getList()\n  },\n  onPageScroll(event) {\n    this.$refs.dropDown.init()\n    let scrollTop = event.scrollTop\n    if (scrollTop > 60) {\n      this.navColor = '#cae8fe'\n      this.customStyle.backgroundColor = '#cae8fe'\n    } else {\n      this.navColor = 'transparent'\n      this.customStyle.backgroundColor = 'transparent'\n    }\n  },\n  methods: {\n    openDrop(e) {\n      console.log(e)\n      this.selectType = e.name\n    },\n    async getCompanyAreaList() {\n      let res = await getCompanyAreaAll({})\n      this.areaOptions = res.data\n    },\n    toDetail(info) {\n      console.log(info)\n      uni.navigateTo({\n        url: `/pagesSub/platform/sportsOrg/detail?site_id=${info.site_id}`,\n      })\n    },\n    changeDropDown(res) {\n      let obj = {}\n      res.map((e) => {\n        obj[e.name] = e.value\n      })\n      this.searchParams = obj\n      this.resetData()\n    },\n    // 获取下拉运动项目\n    async getSportTag() {\n      let res = await getWxActivityType({})\n      let list = [{ label: '类型', value: '' }]\n      res.data.map((e) => {\n        list.push({ label: e.text, value: e.value })\n      })\n      this.options.type_id.child = list\n    },\n    // 获取组织类型\n    async getOrganizationType() {\n      let res = await getSportsOrganizationType({ page: 1, size: 1000, status: 1 })\n      let list = [{ label: '全部类型', value: '' }]\n      res.data.list.map((e) => {\n        list.push({ label: e.name, value: e.type_id })\n      })\n      this.options.site_type.child = list\n    },\n    async getList(refresh) {\n      let param = {\n        page: this.page,\n        size: 10,\n        type_id: '10',\n      }\n      param = Object.assign(param, this.searchParams)\n      this.loading = true\n      let res = await getWxSiteList(param)\n      this.getListExtend(res, refresh)\n    },\n    handleDataCallBack(list) {\n      let showList = []\n      list.forEach((e) => {\n        let obj = { show_image: e.c_image_url, show_distance: '', ...e }\n        obj.show_distance = this.$distanceFormat(e.distance)\n        showList.push(obj)\n      })\n      return showList\n    },\n    citySelectConfirm(e) {\n      this.options['belong_place_id'].label = e ? e.label : '全部区域'\n      this.searchParams['belong_place_id'] = e.districtId ? e.districtId : ''\n      this.resetData()\n      this.$refs['dropDown'].close()\n    },\n    citySelectReset() {},\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  background: $hubei-list-page-bg-color;\n  min-height: 100vh;\n  box-sizing: border-box;\n}\n\n.main_content_container {\n  position: relative;\n}\n\n.nav_top_bg {\n  height: 294rpx;\n\n  .image {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.tab_container {\n  position: sticky;\n  box-shadow: 0 -1px $hubei-list-page-bg-color;\n  top: 0;\n  left: 0;\n  z-index: 100;\n}\n\n.page-pad {\n  padding: 20rpx 32rpx 0 32rpx;\n  box-sizing: border-box;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/platform/sportsSite/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["listMixins","shareMixins","themeMixins","getCompanyAreaAll","uni","getWxActivityType","getSportsOrganizationType","getWxSiteList"],"mappings":"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"}