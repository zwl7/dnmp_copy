{"version":3,"file":"index.js","sources":["../../../../../../src/pagesSub/platform/stadium/index.vue","../../../../../../uniPage:/cGFnZXNTdWIvcGxhdGZvcm0vc3RhZGl1bS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"page-content\">\n      <navBar\n        :navColor=\"navColor\"\n        :isFixed=\"true\"\n        titleColor=\"#323233\"\n        title=\"场馆\"\n        searchTitle=\"\"\n        :showBack=\"true\"\n        moduleKey=\"stadium\"\n      ></navBar>\n      <view :style=\"{ height: navBarHeight + 'px' }\"></view>\n      <view class=\"nav_top_bg\">\n        <image :src=\"topBgImage\" class=\"image\" @click=\"handleClickTopBg\"></image>\n      </view>\n      <uv-sticky :offset-top=\"navBarHeight\">\n        <dropDown\n          sign=\"stadium\"\n          ref=\"dropDown\"\n          :options=\"options\"\n          :customStyle=\"customStyle\"\n          @change=\"changeDropDown\"\n          @open=\"openDrop\"\n        >\n          <view v-show=\"selectType == 'street_id'\">\n            <dropDownCitySelect\n              :defaultSelected=\"areaSelected\"\n              :options=\"areaOptions\"\n              :show-location=\"false\"\n              :show-distance=\"false\"\n              @confirm=\"citySelectConfirm\"\n              @reset=\"citySelectReset\"\n            />\n          </view>\n        </dropDown>\n      </uv-sticky>\n      <view class=\"container\">\n        <view v-for=\"(item, index) in list\" :key=\"index\" style=\"margin-bottom: 24rpx\">\n          <stadiumItem\n            :info=\"item\"\n            @click=\"handleClick(item)\"\n            @reserve=\"handleReserve(item)\"\n          ></stadiumItem>\n        </view>\n        <empty v-if=\"showEmpty\"></empty>\n        <loadMore :status=\"loadStatus\" v-if=\"showLoadMore\" />\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport navBar from '@/components/navBar/index.vue'\nimport dropDown from '@/components/dropDown/index.vue'\nimport stadiumItem from './components/stadiumItem.vue'\nimport listMixins from '@/mixins/listMixins.js'\nimport shareMixins from '@/mixins/shareMixins.js'\nimport stadiumReserve from '@/mixins/stadiumReserve.js'\nimport { getCompanyProject, getCompanyAreaAll } from '@/apis/common.js'\nimport { getWxStadiumList } from '@/apis/stadium.js'\nimport dropDownCitySelect from '@/components/dropDown/dropDownCitySelect.vue'\nimport themeMixins from '@/mixins/themeMixins.js'\nexport default {\n  mixins: [listMixins, stadiumReserve, shareMixins, themeMixins],\n  components: {\n    navBar,\n    dropDown,\n    stadiumItem,\n    dropDownCitySelect,\n  },\n  data() {\n    return {\n      topBgImage: 'https://cdn-static.papa.com.cn/social/themeStatic/SkyBlue/stadium_join_card.png',\n      status: 'nomore',\n      navBarHeight: 0,\n      navColor: 'transparent',\n      customStyle: {\n        backgroundColor: 'transparent',\n      },\n      searchParams: {},\n      selectType: '',\n      areaOptions: [],\n      areaSelected: [],\n      options: {\n        street_id: {\n          label: '区域',\n          value: '',\n          activeIndex: 0,\n          child: [],\n          useSlot: true,\n        },\n        sport_tag_id: {\n          label: '全部项目',\n          value: '',\n          activeIndex: 0,\n          child: [],\n        },\n        distance: {\n          label: '距离',\n          value: '',\n          activeIndex: 0,\n          child: [\n            {\n              label: '不限制',\n              value: '',\n            },\n            {\n              label: '1km',\n              value: '1000',\n            },\n            {\n              label: '3km',\n              value: '3000',\n            },\n            {\n              label: '5km',\n              value: '5000',\n            },\n            {\n              label: '20km',\n              value: '20000',\n            },\n          ],\n        },\n        // service_status: {\n        //   label: '预订状态',\n        //   value: '',\n        //   activeIndex: 0,\n        //   child: [\n        //     {\n        //       label: '全部场馆',\n        //       value: '',\n        //     },\n        //     {\n        //       label: '可预订',\n        //       value: 1,\n        //     },\n        //     {\n        //       label: '不可预订',\n        //       value: 2,\n        //     },\n        //   ],\n        // },\n      },\n    }\n  },\n  onLoad() {\n    const app = getApp()\n    this.navBarHeight = this.$store.app.menuInfo.navBarHeight\n    this.getSportTag()\n    this.getCompanyAreaList()\n    this.getList()\n  },\n  onPageScroll(event) {\n    this.$refs.dropDown.init()\n    let scrollTop = event.scrollTop\n    if (scrollTop > 60) {\n      this.navColor = '#cae8fe'\n      this.customStyle.backgroundColor = '#cae8fe'\n    } else {\n      this.navColor = 'transparent'\n      this.customStyle.backgroundColor = 'transparent'\n    }\n  },\n  methods: {\n    // 点击顶部背景图\n    handleClickTopBg() {\n      uni.showToast({\n        title: '敬请期待',\n        icon: 'none',\n      })\n    },\n    openDrop(e) {\n      console.log(e)\n      this.selectType = e.name\n    },\n    changeDropDown(res) {\n      let obj = {}\n      res.map((e) => {\n        obj[e.name] = e.value\n      })\n      this.searchParams = obj\n      this.resetData()\n    },\n    // 获取下拉运动项目\n    async getSportTag() {\n      let res = await getCompanyProject({ type: 3 })\n      let list = [{ label: '全部项目', value: '' }]\n      res.data.map((e) => {\n        list.push({ label: e.option_name, value: e.option_value })\n      })\n      this.options.sport_tag_id.child = list\n    },\n    async getCompanyAreaList() {\n      let res = await getCompanyAreaAll({})\n      this.areaOptions = res.data\n    },\n    async getList(refresh) {\n      let param = {\n        page: this.page,\n        size: 10,\n        // large_stadium: 1\n      }\n      param = Object.assign(param, this.searchParams)\n      this.loading = true\n      let res = await getWxStadiumList(param)\n      this.getListExtend(res, refresh)\n    },\n    handleDataCallBack(list) {\n      let showList = []\n      list.forEach((e) => {\n        let obj = { show_image: '', show_distance: '', ...e }\n        if (e.images_url && e.images_url.length > 0) {\n          obj.show_image = e.images_url[0]\n        }\n        obj.show_distance = this.$distanceFormat(e.distance)\n        showList.push(obj)\n      })\n      return showList\n    },\n    handleClick(item) {\n      uni.navigateTo({\n        url: `/pagesSub/platform/stadium/detail?stadium_id=${item.stadium_id}`,\n      })\n    },\n    // citySelectConfirm(e) {\n    //   console.log(e)\n    //   this.options['street_id'].label = e ? e.label : '全部区域'\n    //   this.searchParams['street_id'] = e.districtId ? e.districtId : ''\n    //   this.resetData()\n    //   this.$refs['dropDown'].close()\n    // },\n    citySelectConfirm(e) {\n      let item = e.data[e.data.length - 1]\n      let values = e.values\n      this.options['street_id'].label = item ? item.name : '全部区域'\n      this.searchParams['street_id'] = values.length ? values[values.length - 1] : ''\n      this.resetData()\n      this.$refs['dropDown'].close()\n    },\n    citySelectReset() {},\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.page {\n  background-color: $hubei-list-page-bg-color;\n  min-height: 100vh;\n  box-sizing: border-box;\n}\n.page-content {\n  background: linear-gradient(180deg, #c9e3ff 0%, $hubei-list-page-bg-color 100%);\n  background-size: 100% 340rpx;\n  background-repeat: no-repeat;\n}\n.nav_top_bg {\n  height: 140rpx;\n  padding: 0 32rpx;\n  box-sizing: border-box;\n  margin-top: 12rpx;\n\n  .image {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n}\n.container {\n  padding: 16rpx 32rpx;\n  box-sizing: border-box;\n}\n:deep(.uv-drop-down-item .item-text) {\n  overflow: unset !important;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/platform/stadium/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getCompanyProject","getCompanyAreaAll","getWxStadiumList"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,MAAA,SAAA,MAAA;AACA,MAAA,WAAA,MAAA;AACA,MAAA,cAAA,MAAA;AAMA,MAAA,qBAAA,MAAA;AAEA,MAAA,YAAA;AAAA;;IAGA;AAAA,IACA;AAAA;IAEA;AAAA;EAEA,OAAA;AACA,WAAA;AAAA,MACA,YAAA;AAAA,MACA,QAAA;AAAA,MACA,cAAA;AAAA;;;;MAKA,cAAA,CAAA;AAAA;MAEA,aAAA,CAAA;AAAA,MACA,cAAA,CAAA;AAAA,MACA,SAAA;AAAA;;UAGA,OAAA;AAAA;UAEA,OAAA,CAAA;AAAA;;;;UAKA,OAAA;AAAA;UAEA,OAAA,CAAA;AAAA;QAEA,UAAA;AAAA;UAEA,OAAA;AAAA;UAEA,OAAA;AAAA,YACA;AAAA;cAEA,OAAA;AAAA;YAEA;AAAA;;;YAIA;AAAA;;;YAIA;AAAA;;;YAIA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;IA0BA;AAAA;EAEA,SAAA;AACA,WAAA;;AAEA,SAAA,YAAA;;;;EAIA,aAAA,OAAA;;;AAGA,QAAA,YAAA,IAAA;;AAEA,WAAA,YAAA,kBAAA;AAAA;;AAGA,WAAA,YAAA,kBAAA;AAAA,IACA;AAAA;EAEA,SAAA;AAAA;AAAA,IAEA,mBAAA;AACAA,oBAAAA,MAAA,UAAA;AAAA;;;;;;AAOA,WAAA,aAAA,EAAA;AAAA;IAEA,eAAA,KAAA;AACA,UAAA,MAAA,CAAA;;AAEA,YAAA,EAAA,IAAA,IAAA,EAAA;AAAA;AAEA,WAAA,eAAA;AACA,WAAA,UAAA;AAAA;;IAGA,cAAA;AAAA;AACA,YAAA,MAAA,MAAAC,YAAAA,kBAAA,EAAA,MAAA,EAAA,CAAA;AACA,YAAA,OAAA,CAAA,EAAA,OAAA,QAAA,OAAA,GAAA,CAAA;AACA,YAAA,KAAA,IAAA,CAAA,MAAA;;;AAGA,aAAA,QAAA,aAAA,QAAA;AAAA;;;;AAGA,YAAA,MAAA,MAAAC,YAAAA,kBAAA,CAAA,CAAA;;;;IAGA,QAAA,SAAA;AAAA;AACA,YAAA,QAAA;AAAA,UACA,MAAA,KAAA;AAAA,UACA,MAAA;AAAA;AAAA,QAEA;AACA,gBAAA,OAAA,OAAA,OAAA,KAAA,YAAA;AACA,aAAA,UAAA;AACA,YAAA,MAAA,MAAAC,aAAAA,iBAAA,KAAA;AACA,aAAA,cAAA,KAAA,OAAA;AAAA;;;;AAIA,WAAA,QAAA,CAAA,MAAA;AACA,YAAA,MAAA,iBAAA,YAAA,IAAA,eAAA,MAAA;AACA,YAAA,EAAA,cAAA,EAAA,WAAA,SAAA,GAAA;;QAEA;;AAEA,iBAAA,KAAA,GAAA;AAAA;;;IAIA,YAAA,MAAA;AACAH,oBAAAA,MAAA,WAAA;AAAA,QACA,KAAA,gDAAA,KAAA,UAAA;AAAA;;;;;;;;;IAUA,kBAAA,GAAA;AACA,UAAA,OAAA,EAAA,KAAA,EAAA,KAAA,SAAA,CAAA;AACA,UAAA,SAAA,EAAA;;AAEA,WAAA,aAAA,WAAA,IAAA,OAAA,SAAA,OAAA,OAAA,SAAA,CAAA,IAAA;AACA,WAAA,UAAA;;;IAGA,kBAAA;AAAA,IAAA;AAAA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClPA,GAAG,WAAW,eAAe;"}