{"version":3,"file":"form.js","sources":["../../../../../../src/pagesSub/sportsService/serviceUndertake/form.vue","../../../../../../uniPage:/cGFnZXNTdWIvc3BvcnRzU2VydmljZS9zZXJ2aWNlVW5kZXJ0YWtlL2Zvcm0udnVl"],"sourcesContent":["<template>\n  <view class=\"service-form\">\n    <uv-form ref=\"form\" :model=\"formData\" :rules=\"rules\">\n      <view class=\"form-content\">\n        <view class=\"form-group\">\n          <view class=\"form-title\">分享的服务活动</view>\n          <uv-form-item label=\"活动标题\" prop=\"title\">\n            <uv-input v-model=\"formData.title\" placeholder=\"请输入活动标题\" :maxlength=\"50\" />\n          </uv-form-item>\n\n          <uv-form-item label=\"活动内容\" prop=\"content\">\n            <uv-textarea\n              v-model=\"formData.content\"\n              placeholder=\"请输入活动内容描述\"\n              :maxlength=\"500\"\n              height=\"120\"\n            />\n          </uv-form-item>\n\n          <uv-form-item label=\"现场照片\" prop=\"images\">\n            <ImgUpload\n              v-model=\"formData.images\"\n              :max=\"6\"\n              @delete=\"handleDeleteImage\"\n              @success=\"handleUploadSuccess\"\n            />\n          </uv-form-item>\n\n          <uv-form-item label=\"服务时间\" prop=\"serviceTime\">\n            <uv-datetime-picker\n              v-model=\"formData.serviceTime\"\n              mode=\"datetime\"\n              :show=\"showTimePicker\"\n              @confirm=\"handleTimeConfirm\"\n              @cancel=\"showTimePicker = false\"\n            />\n            <view class=\"time-trigger\" @click=\"showTimePicker = true\">\n              {{ formData.serviceTime || '请选择服务时间' }}\n              <uv-icon name=\"arrow-right\" size=\"16\" />\n            </view>\n          </uv-form-item>\n\n          <uv-form-item label=\"服务地点\" prop=\"address\">\n            <view class=\"location-trigger\" @click=\"chooseLocation\">\n              {{ formData.address || '请选择服务地点' }}\n              <uv-icon name=\"arrow-right\" size=\"16\" />\n            </view>\n          </uv-form-item>\n\n          <uv-form-item label=\"参与人数\" prop=\"peopleCount\">\n            <uv-input v-model=\"formData.peopleCount\" type=\"number\" placeholder=\"请输入参与人数\" />\n          </uv-form-item>\n        </view>\n      </view>\n    </uv-form>\n\n    <view class=\"footer\">\n      <button class=\"submit-btn\" @click=\"handleSubmit\">发布</button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport ImgUpload from '@/components/upload/imgs.vue'\n\nexport default {\n  components: {\n    ImgUpload,\n  },\n\n  data() {\n    return {\n      formData: {\n        title: '',\n        content: '',\n        images: [],\n        serviceTime: '',\n        address: '',\n        latitude: '',\n        longitude: '',\n        peopleCount: '',\n      },\n      showTimePicker: false,\n      rules: {\n        title: [{ required: true, message: '请输入活动标题' }],\n        content: [{ required: true, message: '请输入活动内容' }],\n        images: [{ required: true, message: '请上传现场照片' }],\n        serviceTime: [{ required: true, message: '请选择服务时间' }],\n        address: [{ required: true, message: '请选择服务地点' }],\n        peopleCount: [{ required: true, message: '请输入参与人数' }],\n      },\n    }\n  },\n\n  methods: {\n    // 处理图片上传成功\n    handleUploadSuccess(urls) {\n      this.formData.images = this.formData.images.concat(urls)\n    },\n\n    // 处理删除图片\n    handleDeleteImage(index) {\n      this.formData.images.splice(index, 1)\n    },\n\n    // 处理时间选择确认\n    handleTimeConfirm(e) {\n      this.formData.serviceTime = e.value\n      this.showTimePicker = false\n    },\n\n    // 选择地点\n    chooseLocation() {\n      uni.chooseLocation({\n        success: (res) => {\n          this.formData.address = res.address\n          this.formData.latitude = res.latitude\n          this.formData.longitude = res.longitude\n        },\n        fail: (err) => {\n          console.error('选择地点失败:', err)\n        },\n      })\n    },\n\n    // 提交表单\n    handleSubmit() {\n      this.$refs.form.validate(async (valid) => {\n        if (valid) {\n          try {\n            uni.showLoading({\n              title: '提交中...',\n            })\n\n            // TODO: 调用发布接口\n            await new Promise((resolve) => setTimeout(resolve, 1000))\n\n            uni.hideLoading()\n            uni.showToast({\n              title: '发布成功',\n              icon: 'success',\n            })\n\n            setTimeout(() => {\n              uni.navigateBack()\n            }, 1500)\n          } catch (error) {\n            uni.hideLoading()\n            uni.showToast({\n              title: '发布失败',\n              icon: 'error',\n            })\n          }\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.service-form {\n  min-height: 100vh;\n  padding: 20px;\n  background-color: #f5f5f5;\n\n  .form-content {\n    padding: 20px;\n    background-color: #fff;\n    border-radius: 12px;\n\n    .form-title {\n      margin-bottom: 20px;\n      font-size: 16px;\n      font-weight: bold;\n      color: #333;\n    }\n\n    .time-trigger,\n    .location-trigger {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 12px 0;\n      color: #333;\n      border-bottom: 1px solid #eee;\n    }\n  }\n\n  .footer {\n    position: fixed;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    padding: 20px;\n    background-color: #fff;\n\n    .submit-btn {\n      width: 100%;\n      height: 44px;\n      font-size: 16px;\n      line-height: 44px;\n      color: #fff;\n      text-align: center;\n      background-color: #2979ff;\n      border: none;\n      border-radius: 22px;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/sportsService/serviceUndertake/form.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AA+DA,kBAAA,MAAA;AAEA,MAAA,YAAA;AAAA,EACA,YAAA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,OAAA;AACA,WAAA;AAAA,MACA,UAAA;AAAA,QACA,OAAA;AAAA,QACA,SAAA;AAAA,QACA,QAAA,CAAA;AAAA,QACA,aAAA;AAAA,QACA,SAAA;AAAA,QACA,UAAA;AAAA,QACA,WAAA;AAAA,QACA,aAAA;AAAA,MACA;AAAA,MACA,gBAAA;AAAA,MACA,OAAA;AAAA,QACA,OAAA,CAAA,EAAA,UAAA,MAAA,SAAA,UAAA,CAAA;AAAA,QACA,SAAA,CAAA,EAAA,UAAA,MAAA,SAAA,UAAA,CAAA;AAAA,QACA,QAAA,CAAA,EAAA,UAAA,MAAA,SAAA,UAAA,CAAA;AAAA,QACA,aAAA,CAAA,EAAA,UAAA,MAAA,SAAA,UAAA,CAAA;AAAA,QACA,SAAA,CAAA,EAAA,UAAA,MAAA,SAAA,UAAA,CAAA;AAAA,QACA,aAAA,CAAA,EAAA,UAAA,MAAA,SAAA,UAAA,CAAA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EAEA,SAAA;AAAA;AAAA,IAEA,oBAAA,MAAA;AACA,WAAA,SAAA,SAAA,KAAA,SAAA,OAAA,OAAA,IAAA;AAAA,IACA;AAAA;AAAA,IAGA,kBAAA,OAAA;AACA,WAAA,SAAA,OAAA,OAAA,OAAA,CAAA;AAAA,IACA;AAAA;AAAA,IAGA,kBAAA,GAAA;AACA,WAAA,SAAA,cAAA,EAAA;AACA,WAAA,iBAAA;AAAA,IACA;AAAA;AAAA,IAGA,iBAAA;AACAA,oBAAAA,MAAA,eAAA;AAAA,QACA,SAAA,CAAA,QAAA;AACA,eAAA,SAAA,UAAA,IAAA;AACA,eAAA,SAAA,WAAA,IAAA;AACA,eAAA,SAAA,YAAA,IAAA;AAAA,QACA;AAAA,QACA,MAAA,CAAA,QAAA;AACA,kBAAA,MAAA,WAAA,GAAA;AAAA,QACA;AAAA,MACA,CAAA;AAAA,IACA;AAAA;AAAA,IAGA,eAAA;AACA,WAAA,MAAA,KAAA,SAAA,CAAA,UAAA;AACA,YAAA,OAAA;AACA,cAAA;AACAA,0BAAAA,MAAA,YAAA;AAAA,cACA,OAAA;AAAA,YACA,CAAA;AAGA,kBAAA,IAAA,QAAA,CAAA,YAAA,WAAA,SAAA,GAAA,CAAA;AAEAA,0BAAAA,MAAA,YAAA;AACAA,0BAAAA,MAAA,UAAA;AAAA,cACA,OAAA;AAAA,cACA,MAAA;AAAA,YACA,CAAA;AAEA,uBAAA,MAAA;AACAA,4BAAAA,MAAA,aAAA;AAAA,YACA,GAAA,IAAA;AAAA,UACA,SAAA,OAAA;AACAA,0BAAAA,MAAA,YAAA;AACAA,0BAAAA,MAAA,UAAA;AAAA,cACA,OAAA;AAAA,cACA,MAAA;AAAA,YACA,CAAA;AAAA,UACA;AAAA,QACA;AAAA,MACA,EAAA;AAAA,IACA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5JA,GAAG,WAAW,eAAe;"}