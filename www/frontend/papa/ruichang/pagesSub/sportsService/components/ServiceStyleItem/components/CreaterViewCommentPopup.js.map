{"version":3,"file":"CreaterViewCommentPopup.js","sources":["../../../../../../../../src/pagesSub/sportsService/components/ServiceStyleItem/components/CreaterViewCommentPopup.vue","../../../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXNTdWIvc3BvcnRzU2VydmljZS9jb21wb25lbnRzL1NlcnZpY2VTdHlsZUl0ZW0vY29tcG9uZW50cy9DcmVhdGVyVmlld0NvbW1lbnRQb3B1cC52dWU"],"sourcesContent":["<template>\n  <centerPopue ref=\"myCenterPopue\" title=\"满意度评价\" :customStyle=\"{}\">\n    <view class=\"rate-popup\">\n      <view class=\"rate-desc\">综合评价</view>\n      <view class=\"items-center mb-40rpx\" style=\"gap: 48rpx\">\n        <uv-rate\n          ref=\"rateRef\"\n          :count=\"count\"\n          :value=\"getStartCount(ratingObj.overallRating)[0]\"\n          :size=\"'48rpx'\"\n          gutter=\"10\"\n          readonly\n          activeIcon=\"https://cdn-static.papa.com.cn/jingAn/icon/start-fill.svg\"\n          inactiveIcon=\"https://cdn-static.papa.com.cn/jingAn/icon/start.svg\"\n          touchable\n        ></uv-rate>\n        <view class=\"rate-text\">{{ getStartCount(ratingObj.overallRating)[1] || '未评分' }}</view>\n      </view>\n      <CommentPopupTab @change=\"changeTab\" :activeTab=\"activeTab\" />\n\n      <!-- 点单人评价 -->\n      <view v-show=\"activeTab === 0\">\n        <view class=\"rate-desc\">\n          <text>评价详情</text>\n        </view>\n        <view class=\"items-center\" style=\"gap: 48rpx\">\n          <uv-rate\n            ref=\"rateRef\"\n            :count=\"count\"\n            :value=\"getStartCount(ratingObj.rating)[0]\"\n            :size=\"'48rpx'\"\n            gutter=\"10\"\n            readonly\n            activeIcon=\"https://cdn-static.papa.com.cn/jingAn/icon/start-fill.svg\"\n            inactiveIcon=\"https://cdn-static.papa.com.cn/jingAn/icon/start.svg\"\n            touchable\n          ></uv-rate>\n          <view class=\"rate-text\">{{ getStartCount(ratingObj.rating)[1] || '未评分' }}</view>\n        </view>\n        <view class=\"rate-time\">\n          <text>{{ ratingObj.ratingTime }}</text>\n        </view>\n      </view>\n      <!-- 群众评价 -->\n      <view v-show=\"activeTab === 1\">\n        <view class=\"rate-desc\">\n          <text class=\"rate-desc-text\">评价详情</text>\n          <text class=\"rate-desc-right\">评价人数：{{ ratingObj.praiseNum }}</text>\n        </view>\n        <view class=\"rate-progress-box\">\n          <view class=\"rate-progress-item\" v-for=\"(item, index) in rateCircleList\" :key=\"index\">\n            <view class=\"rate-progress-item-text\">\n              <text class=\"rate-progress-item-text-title\">{{ item.text }}</text>\n              <text class=\"rate-progress-item-text-value\">{{ item.num }}</text>\n            </view>\n            <circle-progress\n              :progressColor=\"item.fillColor\"\n              fontColor=\"#838fa1\"\n              :lineWidth=\"8\"\n              :percentage=\"item.ratio\"\n            />\n          </view>\n        </view>\n      </view>\n    </view>\n  </centerPopue>\n</template>\n\n<script>\nimport CircleProgress from '@/components/CircleProgress/index.vue'\nimport centerPopue from '@/components/centerPopue/index.vue'\nimport CommentPopupTab from './CommentPopupTab.vue'\nexport default {\n  name: 'CreaterViewCommentPopup',\n  props: {\n    ratingObj: {\n      type: Object,\n      default: () => {\n        return {}\n      },\n    },\n  },\n  components: {\n    CircleProgress,\n    centerPopue,\n    CommentPopupTab,\n  },\n  data() {\n    return {\n      activeTab: 0, // 当前选中的tab 0:点单人评价 1:群众评价\n      showComment: false,\n      showRatePopup: false,\n      rating: 0,\n      rateTexts: ['很差', '一般', '满意', '不错', '非常满意'],\n      count: 5,\n      startcount: 0,\n      evaluteMode: 'edit', // view/edit\n      levelMap: {\n        1: 'https://cdn-static.papa.com.cn/jingAn/icon/nation-level.png',\n        2: 'https://cdn-static.papa.com.cn/jingAn/icon/first-level.png',\n        3: 'https://cdn-static.papa.com.cn/jingAn/icon/second-level.png',\n        4: 'https://cdn-static.papa.com.cn/jingAn/icon/three-level.png',\n        5: 'https://cdn-static.papa.com.cn/jingAn/icon/other-level.png',\n      },\n      myEvalue: {\n        common: 4,\n        detail: 3,\n      },\n      ratingMap: {\n        1: {\n          text: '非常差',\n          value: 'bad',\n          numKey: 'badNum',\n          ratioKey: 'badRatio',\n          fillColor: '#c2a0ff',\n        },\n        2: {\n          text: '差',\n          value: 'poor',\n          fillColor: '#ff8585',\n          ratioKey: 'poorRatio',\n          numKey: 'poorNum',\n        },\n        3: {\n          text: '一般',\n          value: 'avg',\n          fillColor: '#6cb4ff',\n          ratioKey: 'avgRatio',\n          numKey: 'avgNum',\n        },\n        4: {\n          text: '满意',\n          value: 'good',\n          fillColor: '#ff8585',\n          ratioKey: 'goodRatio',\n          numKey: 'goodNum',\n        },\n        5: {\n          text: '非常满意',\n          value: 'excellent',\n          fillColor: '#fdae44',\n          ratioKey: 'excellentRatio',\n          numKey: 'excellentNum',\n        },\n      },\n      rateCircleList: [],\n    }\n  },\n  watch: {\n    ratingObj: {\n      handler(val) {\n        // console.log({val});\n        // 填充rateCircleList 根据ratingMap与ratingObj\n        this.rateCircleList = Object.keys(this.ratingMap).map((key) => {\n          const ratingItem = this.ratingMap[key]\n          return {\n            ...ratingItem,\n            num: val[ratingItem.numKey],\n            ratio: val[ratingItem.ratioKey] * 100,\n          }\n        })\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  methods: {\n    open() {\n      this.$refs['myCenterPopue'].open()\n    },\n    close() {\n      this.$refs['myCenterPopue'].close()\n    },\n    changeTab(index) {\n      this.activeTab = index\n    },\n    // 根据枚举获取实际的星星颗数\n    getStartCount(enumText) {\n      let COUNT = 0\n      let text = ''\n      Object.keys(this.ratingMap).forEach((key) => {\n        if (this.ratingMap[key].value === enumText) {\n          COUNT = key\n          text = this.ratingMap[key].text\n        }\n      })\n      return [COUNT, text]\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.rate-popup {\n  width: 280px;\n  // padding: 24px;\n  text-align: left;\n  background: #fff;\n  border-radius: 16px;\n\n  .rate-desc {\n    margin-bottom: 16px;\n    margin-top: 40rpx;\n    font-size: 30rpx;\n    font-weight: 400;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .rate-desc-right {\n    font-size: 24rpx;\n    color: #999;\n  }\n\n  .rate-text {\n    font-size: 30rpx;\n    color: #666;\n  }\n\n  .rate-time {\n    font-size: 24rpx;\n    color: #999;\n    margin-top: 32rpx;\n    padding-left: 20rpx;\n  }\n}\n\n.rate-progress-box {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 32rpx 16rpx;\n\n  .rate-progress-item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .rate-progress-item-text {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin-right: 10rpx;\n      width: 120rpx;\n\n      .rate-progress-item-text-title {\n        font-size: 28rpx;\n        color: #606266;\n      }\n\n      .rate-progress-item-text-value {\n        font-size: 40rpx;\n        color: #303133;\n        margin-top: 20rpx;\n        font-weight: 500;\n      }\n    }\n  }\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/sportsService/components/ServiceStyleItem/components/CreaterViewCommentPopup.vue'\nwx.createComponent(Component)"],"names":[],"mappings":"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"}