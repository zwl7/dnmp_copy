{"version":3,"file":"VisitorViewCommentPopup.js","sources":["../../../../../../../../src/pagesSub/sportsService/components/ServiceStyleItem/components/VisitorViewCommentPopup.vue","../../../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXNTdWIvc3BvcnRzU2VydmljZS9jb21wb25lbnRzL1NlcnZpY2VTdHlsZUl0ZW0vY29tcG9uZW50cy9WaXNpdG9yVmlld0NvbW1lbnRQb3B1cC52dWU"],"sourcesContent":["<template>\n  <view>\n    <centerPopue ref=\"centerPopue\" title=\"服务评价\" :customStyle=\"{}\">\n      <view class=\"rate-popup\">\n        <view class=\"rate-desc\">\n          {{ evaluteMode == 'edit' ? '您对该服务活动是否满意？' : '总体评价' }}\n        </view>\n        <!-- #e6e9eb -->\n        <view class=\"items-center mb-40rpx\" style=\"gap: 48rpx\">\n          <uv-rate\n            ref=\"rateRef\"\n            :count=\"count\"\n            v-model=\"startcount\"\n            :size=\"'48rpx'\"\n            gutter=\"10\"\n            :readonly=\"evaluteMode == 'view'\"\n            activeIcon=\"https://cdn-static.papa.com.cn/jingAn/icon/start-fill.svg\"\n            inactiveIcon=\"https://cdn-static.papa.com.cn/jingAn/icon/start.svg\"\n            touchable\n          ></uv-rate>\n          <view class=\"rate-text\">{{ evaluteText }}</view>\n        </view>\n        <view class=\"btmBtn\" v-if=\"evaluteMode == 'edit'\" @click=\"handleSubmit\">\n          <bottomButton>\n            {{ evaluteMode == 'edit' ? '提交' : '' }}\n          </bottomButton>\n        </view>\n      </view>\n    </centerPopue>\n  </view>\n</template>\n\n<script>\nimport centerPopue from '@/components/centerPopue/index.vue'\nimport bottomButton from '@/components/bottomButton.vue'\nexport default {\n  name: 'VisitorViewCommentPopup',\n  components: {\n    centerPopue,\n    bottomButton,\n  },\n  props: {\n    // view/edit\n    evaluteMode: {\n      type: String,\n      default: 'view',\n    },\n    initStart: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    evaluteText() {\n      // ratingMap[startcount]?.text || initStart ? '非常差' : '请评分'\n      // console.log({initStart: this.initStart});\n      let text = ''\n      if (this.ratingMap[this.startcount + '']) {\n        text = this.ratingMap[this.startcount + '']?.text\n      }\n      return text || '请评分'\n    },\n  },\n  data() {\n    return {\n      showComment: false,\n      showRatePopup: false,\n      rating: 0,\n      rateTexts: ['很差', '一般', '满意', '不错', '非常满意'],\n      count: 5,\n      startcount: 0,\n      // evaluteMode: 'view', // view/edit\n      levelMap: {\n        1: 'https://cdn-static.papa.com.cn/jingAn/icon/nation-level.png',\n        2: 'https://cdn-static.papa.com.cn/jingAn/icon/first-level.png',\n        3: 'https://cdn-static.papa.com.cn/jingAn/icon/second-level.png',\n        4: 'https://cdn-static.papa.com.cn/jingAn/icon/three-level.png',\n        5: 'https://cdn-static.papa.com.cn/jingAn/icon/other-level.png',\n      },\n      myEvalue: {\n        common: 4,\n        detail: 3,\n      },\n      ratingMap: {\n        1: {\n          text: '非常差',\n          value: 'bad',\n        },\n        2: {\n          text: '较差',\n          value: 'poor',\n        },\n        3: {\n          text: '一般',\n          value: 'avg',\n        },\n        4: {\n          text: '满意',\n          value: 'good',\n        },\n        5: {\n          text: '非常满意',\n          value: 'excellent',\n        },\n      },\n    }\n  },\n  methods: {\n    handleSubmit() {\n      const map = {}\n      if (this.startcount === 0) {\n        uni.showToast({\n          title: '请选择评价',\n          icon: 'none',\n        })\n        return\n      }\n      const value = this.ratingMap[this.startcount].value\n      this.$emit('submit', value)\n    },\n    open() {\n      console.log('initStart', this.initStart)\n      this.$refs['centerPopue'].open()\n\n      let count = 0\n      if (this.evaluteMode === 'edit') {\n        count = 5\n        this.startcount = 0\n      } else {\n        Object.keys(this.ratingMap).forEach((key) => {\n          if (this.ratingMap[key].value === this.initStart) {\n            count = key\n          }\n        })\n        this.startcount = count\n      }\n\n      this.$nextTick(() => {\n        this.$refs['rateRef'].getRateItemRect()\n        this.$refs['rateRef'].getRateIconWrapRect()\n      })\n    },\n    close() {\n      this.$nextTick(() => {\n        this.$refs['centerPopue'].close()\n      })\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.rate-popup {\n  width: 280px;\n  // padding: 24px;\n  text-align: left;\n  background: #fff;\n  border-radius: 16px;\n\n  .rate-desc {\n    margin-bottom: 16px;\n    margin-top: 40rpx;\n    font-size: 30rpx;\n    font-weight: 400;\n  }\n\n  .rate-text {\n    font-size: 30rpx;\n    color: #666;\n  }\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/sportsService/components/ServiceStyleItem/components/VisitorViewCommentPopup.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;AAiCA,MAAK,cAAe,MAAW;AAC/B,qBAAqB,MAAW;AAChC,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,YAAY;AAAA,IACV;AAAA,IACA;AAAA,EACD;AAAA,EACD,OAAO;AAAA;AAAA,IAEL,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,cAAc;;AAGZ,UAAI,OAAO;AACX,UAAI,KAAK,UAAU,KAAK,aAAa,EAAE,GAAG;AACxC,gBAAO,UAAK,UAAU,KAAK,aAAa,EAAE,MAAnC,mBAAsC;AAAA,MAC/C;AACA,aAAO,QAAQ;AAAA,IAChB;AAAA,EACF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,aAAa;AAAA,MACb,eAAe;AAAA,MACf,QAAQ;AAAA,MACR,WAAW,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM;AAAA,MAC1C,OAAO;AAAA,MACP,YAAY;AAAA;AAAA,MAEZ,UAAU;AAAA,QACR,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MACJ;AAAA,MACD,UAAU;AAAA,QACR,QAAQ;AAAA,QACR,QAAQ;AAAA,MACT;AAAA,MACD,WAAW;AAAA,QACT,GAAG;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,QACD,GAAG;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,QACD,GAAG;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,QACD,GAAG;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,QACD,GAAG;AAAA,UACD,MAAM;AAAA,UACN,OAAO;AAAA,QACR;AAAA,MACF;AAAA,IACH;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,eAAe;AAEb,UAAI,KAAK,eAAe,GAAG;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAA;AACD;AAAA,MACF;AACA,YAAM,QAAQ,KAAK,UAAU,KAAK,UAAU,EAAE;AAC9C,WAAK,MAAM,UAAU,KAAK;AAAA,IAC3B;AAAA,IACD,OAAO;AACL,cAAQ,IAAI,aAAa,KAAK,SAAS;AACvC,WAAK,MAAM,aAAa,EAAE,KAAI;AAE9B,UAAI,QAAQ;AACZ,UAAI,KAAK,gBAAgB,QAAQ;AAC/B,gBAAQ;AACR,aAAK,aAAa;AAAA,aACb;AACL,eAAO,KAAK,KAAK,SAAS,EAAE,QAAQ,CAAC,QAAQ;AAC3C,cAAI,KAAK,UAAU,GAAG,EAAE,UAAU,KAAK,WAAW;AAChD,oBAAQ;AAAA,UACV;AAAA,QACD,CAAA;AACD,aAAK,aAAa;AAAA,MACpB;AAEA,WAAK,UAAU,MAAM;AACnB,aAAK,MAAM,SAAS,EAAE,gBAAe;AACrC,aAAK,MAAM,SAAS,EAAE,oBAAmB;AAAA,MAC1C,CAAA;AAAA,IACF;AAAA,IACD,QAAQ;AACN,WAAK,UAAU,MAAM;AACnB,aAAK,MAAM,aAAa,EAAE,MAAK;AAAA,MAChC,CAAA;AAAA,IACF;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJA,GAAG,gBAAgB,SAAS;"}