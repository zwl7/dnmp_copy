{"version":3,"file":"myStyle.js","sources":["../../../../../../src/pagesSub/sportsService/serviceStyle/myStyle.vue","../../../../../../uniPage:/cGFnZXNTdWIvc3BvcnRzU2VydmljZS9zZXJ2aWNlU3R5bGUvbXlTdHlsZS52dWU"],"sourcesContent":["<!-- 使用 type=\"home\" 属性设置首页，其他页面不需要设置，默认为page；推荐使用json5，更强大，且允许注释 -->\n<!-- <route lang=\"json5\" type=\"home\">\n{\n  layout: 'tabbar',\n  style: {\n    navigationStyle: 'custom',\n    navigationBarTitleText: '首页',\n  },\n}\n</route> -->\n<template>\n  <view>\n    <view>\n      <view class=\"main-box\">\n        <view class=\"list-item-box\" v-for=\"(item, index) in list\" :key=\"index\">\n          <ServiceStyleItem\n            :item=\"item\"\n            :is-detail=\"true\"\n            :is-rated=\"isRated\"\n            :is-my-comment=\"true\"\n            @like=\"onLike\"\n            @comment=\"onComment\"\n          />\n        </view>\n        <empty v-if=\"showEmpty\"></empty>\n        <loadMore :status=\"loadStatus\" v-if=\"showLoadMore\" />\n      </view>\n      <template #empty></template>\n    </view>\n  </view>\n</template>\n\n<script>\nimport shareMixins from '@/mixins/shareMixins'\nimport listMixins from '@/mixins/listMixins.js'\n\n// import { getVoluntaryActivityList } from '@/api/voluntaryActivity/index'\nimport ServiceStyleItem from '../components/ServiceStyleItem/index.vue'\nimport homeDropDown from './components/homeDropDown.vue'\nimport monthCard from './components/monthCard.vue'\nimport { getMonthStartAndEnd, formatTimeBase } from '@/utils/timeUtil'\nimport { getMyStyleList } from '@/apis/sportsService/serviceStyle'\n// import zPaging from 'z-paging/components/z-paging/z-paging.vue'\nexport default {\n  mixins: [shareMixins, listMixins],\n  components: {\n    ServiceStyleItem,\n    homeDropDown,\n    monthCard,\n    // zPaging,\n  },\n  data() {\n    return {\n      searchObj: {},\n      dataList: [],\n      scrollTop: 0,\n      count: 0,\n      timeObj: {\n        start_time: '',\n        end_time: '',\n      },\n      activityType: '',\n    }\n  },\n  onLoad(options) {\n    if (options.activityType) {\n      this.activity_type = options.activityType\n    }\n  },\n  onShow() {\n    // this.getSearchTime()\n    this.resetData()\n  },\n  methods: {\n    onChangeMonthData(data) {\n      console.log('[ data ] >', data)\n      this.getSearchTime(data.year, data.month)\n      this.resetData()\n    },\n    getSearchTime(year, month) {\n      if (!year || !month) {\n        let now = new Date()\n        year = now.getFullYear()\n        month = now.getMonth() + 1\n      }\n      let { start, end } = getMonthStartAndEnd(year, month)\n      this.timeObj = {\n        start_time: formatTimeBase(start, '{y}-{m}-{d}'),\n        end_time: formatTimeBase(end, '{y}-{m}-{d}'),\n      }\n    },\n    search(data) {\n      this.searchObj = data\n      this.getList()\n    },\n    getDataDemo() {\n      return new Promise((resolve) => {\n        setTimeout(() => {\n          resolve({\n            data: [\n              {\n                id: 1,\n                name: '活动名称',\n                time: '2022-01-01',\n                address: '活动地点',\n                type: '活动类型',\n                status: '活动状态',\n              },\n            ],\n            total: 10,\n          })\n        }, 1000)\n      })\n    },\n    async getList(refresh = false) {\n      let params = {\n        page: this.page,\n        size: 10,\n        // ...this.searchObj,\n        // ...this.timeObj,\n      }\n      // let res = await this.getDataDemo(params)\n      const res = await getMyStyleList(params)\n      console.log({ res })\n      if (res.code === 0) {\n        console.log(this.$refs.pagingRef)\n        res.data.listData.forEach((item) => {\n          console.log({ item })\n          item.images = item.image?.split(',')\n        })\n        // console.log({ data });\n        // this.$refs.pagingRef?.complete(data)\n        this.getListExtend(res, refresh)\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.main-box {\n  padding: 32rpx 24rpx;\n}\n\n.month-card-box {\n  position: relative;\n  padding: 32rpx 32rpx 0;\n  background-color: #fff;\n}\n\n.sticky {\n  position: relative;\n}\n\n.list-item-box {\n  // border-bottom: 10px solid #f7f8fa;\n\n  &:last-child {\n    border-bottom: none;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/sportsService/serviceStyle/myStyle.vue'\nwx.createPage(MiniProgramPage)"],"names":["shareMixins","listMixins","getMonthStartAndEnd","formatTimeBase","getMyStyleList"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,MAAA,mBAAA,MAAA;AACA,qBAAA,MAAA;AACA,kBAAA,MAAA;AAIA,MAAA,YAAA;AAAA,EACA,QAAA,CAAAA,mBAAA,aAAAC,4BAAA;AAAA,EACA,YAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,EAEA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,WAAA,CAAA;AAAA,MACA,UAAA,CAAA;AAAA,MACA,WAAA;AAAA,MACA,OAAA;AAAA,MACA,SAAA;AAAA,QACA,YAAA;AAAA,QACA,UAAA;AAAA,MACA;AAAA,MACA,cAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA,SAAA;AACA,QAAA,QAAA,cAAA;AACA,WAAA,gBAAA,QAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;AAEA,SAAA,UAAA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,kBAAA,MAAA;AACA,cAAA,IAAA,cAAA,IAAA;AACA,WAAA,cAAA,KAAA,MAAA,KAAA,KAAA;AACA,WAAA,UAAA;AAAA,IACA;AAAA,IACA,cAAA,MAAA,OAAA;AACA,UAAA,CAAA,QAAA,CAAA,OAAA;AACA,YAAA,MAAA,oBAAA,KAAA;AACA,eAAA,IAAA,YAAA;AACA,gBAAA,IAAA,aAAA;AAAA,MACA;AACA,UAAA,EAAA,OAAA,QAAAC,eAAA,oBAAA,MAAA,KAAA;AACA,WAAA,UAAA;AAAA,QACA,YAAAC,eAAAA,eAAA,OAAA,aAAA;AAAA,QACA,UAAAA,eAAAA,eAAA,KAAA,aAAA;AAAA,MACA;AAAA,IACA;AAAA,IACA,OAAA,MAAA;AACA,WAAA,YAAA;AACA,WAAA,QAAA;AAAA,IACA;AAAA,IACA,cAAA;AACA,aAAA,IAAA,QAAA,CAAA,YAAA;AACA,mBAAA,MAAA;AACA,kBAAA;AAAA,YACA,MAAA;AAAA,cACA;AAAA,gBACA,IAAA;AAAA,gBACA,MAAA;AAAA,gBACA,MAAA;AAAA,gBACA,SAAA;AAAA,gBACA,MAAA;AAAA,gBACA,QAAA;AAAA,cACA;AAAA,YACA;AAAA,YACA,OAAA;AAAA,UACA,CAAA;AAAA,QACA,GAAA,GAAA;AAAA,MACA,CAAA;AAAA,IACA;AAAA,IACA,QAAA,UAAA,OAAA;AAAA;AACA,YAAA,SAAA;AAAA,UACA,MAAA,KAAA;AAAA,UACA,MAAA;AAAA;AAAA;AAAA,QAGA;AAEA,cAAA,MAAA,MAAAC,gCAAAA,eAAA,MAAA;AACA,gBAAA,IAAA,EAAA,IAAA,CAAA;AACA,YAAA,IAAA,SAAA,GAAA;AACA,kBAAA,IAAA,KAAA,MAAA,SAAA;AACA,cAAA,KAAA,SAAA,QAAA,CAAA,SAAA;;AACA,oBAAA,IAAA,EAAA,KAAA,CAAA;AACA,iBAAA,UAAA,UAAA,UAAA,mBAAA,MAAA;AAAA,UACA,CAAA;AAGA,eAAA,cAAA,KAAA,OAAA;AAAA,QACA;AAAA,MACA;AAAA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvIA,GAAG,WAAW,eAAe;"}