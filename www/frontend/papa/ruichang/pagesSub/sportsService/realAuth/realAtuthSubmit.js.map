{"version":3,"file":"realAtuthSubmit.js","sources":["../../../../../../src/pagesSub/sportsService/realAuth/realAtuthSubmit.vue","../../../../../../uniPage:/cGFnZXNTdWIvc3BvcnRzU2VydmljZS9yZWFsQXV0aC9yZWFsQXR1dGhTdWJtaXQudnVl"],"sourcesContent":["<template>\n  <div class=\"outerBox\">\n    <div class=\"greenBox\">\n      <uv-form labelPosition=\"left\" :model=\"form\" :rules=\"rules\" ref=\"form\" labelWidth=\"80\">\n        <uv-form-item label=\"姓名\" prop=\"name\" borderBottom :required=\"true\">\n          <uv-input\n            v-model=\"form.name\"\n            placeholder=\"请输入姓名\"\n            border=\"none\"\n            class=\"uni-input\"\n            cursor-spacing=\"0\"\n          ></uv-input>\n        </uv-form-item>\n        <uv-form-item label=\"身份证号\" prop=\"credentials_number\" borderBottom :required=\"true\">\n          <uv-input\n            v-model=\"form.credentials_number\"\n            placeholder=\"请输入身份证号\"\n            border=\"none\"\n            class=\"uni-input\"\n            cursor-spacing=\"0\"\n          ></uv-input>\n        </uv-form-item>\n      </uv-form>\n    </div>\n    <div class=\"tip\">\n      <uv-icon name=\"info-circle\"></uv-icon>\n      实名认证信息影响到后续身份认证，请如实填写姓名和身份证号码\n    </div>\n    <bottom-button @click=\"handleAdd\">提交</bottom-button>\n  </div>\n</template>\n\n<script>\nimport { sendPhoneCode, addStadiumApply } from '@/apis/common.js'\nimport { handleAuthenticate } from '@/apis/login.js'\nimport bottomButton from '@/components/bottomButton.vue'\nimport { reg_tel_phone, reg_cp } from '@/utils/reg'\nimport themeMixins from '@/mixins/themeMixins.js'\nexport default {\n  mixins: [themeMixins],\n  components: {\n    bottomButton,\n  },\n  data() {\n    return {\n      loading: false,\n      rules: {\n        name: {\n          type: 'string',\n          required: true,\n          message: '请填写姓名',\n          trigger: ['blur', 'change'],\n        },\n        credentials_number: {\n          type: 'string',\n          required: true,\n          pattern: reg_cp,\n          message: '身份证号格式不正确',\n          trigger: ['blur', 'change'],\n        },\n      },\n      form: {\n        name: '',\n        credentials_number: '',\n        platform: 'no',\n        phone: '',\n      },\n    }\n  },\n  onLoad(options) {\n    this.setNavigationBarColor()\n  },\n  methods: {\n    handleAdd() {\n      const app = getApp()\n      uni.redirectTo({\n        url: app.globalData.loginJumpPath,\n      })\n      this.$refs.form\n        .validate()\n        .then((res) => {\n          this.submit()\n        })\n        .catch((errors) => {})\n    },\n    async submit() {\n      if (this.loading) {\n        return\n      }\n      this.loading = true\n      let params = JSON.parse(JSON.stringify(this.form))\n      let func = handleAuthenticate\n      func(params).then((res) => {\n        if (res.code === 200) {\n          uni.showToast({\n            title: '实名认证成功',\n            icon: 'success',\n            duration: 2000,\n          })\n          let app = getApp()\n          app.globalData.mineRefresh = true\n          app.globalData.userInfo.is_auth = 1\n          setTimeout(() => {\n            if (app.globalData.loginJumpPath) {\n              uni.redirectTo({\n                url: app.globalData.loginJumpPath,\n              })\n              app.globalData.loginJumpPath = ''\n              return\n            }\n            uni.switchTab({\n              url: '/pages/tabbar/home/index',\n            })\n          }, 2000)\n        } else {\n          uni.showToast({\n            title: res.message,\n            icon: 'none',\n          })\n        }\n        this.loading = false\n      })\n    },\n    handleJumpPath(options) {\n      let app = getApp()\n      let { redirectType, redirectUrl } = options\n      if (redirectType === 'webview') {\n        let url = encodeURIComponent(redirectUrl)\n        app.globalData.loginJumpPath = '/pages/memberOauth2/authorize?redirectUrl=' + url\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.outerBox {\n  margin: 26rpx 32rpx;\n}\n.tip {\n  display: flex;\n  align-items: start;\n  gap: 20rpx;\n  font-size: 24rpx;\n  color: rgba(144, 147, 153, 1);\n  margin: 28rpx 0 60rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pagesSub/sportsService/realAuth/realAtuthSubmit.vue'\nwx.createPage(MiniProgramPage)"],"names":["themeMixins","reg_cp","uni","handleAuthenticate"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,qBAAA,MAAA;AAGA,MAAA,YAAA;AAAA,EACA,QAAA,CAAAA,mBAAAA,WAAA;AAAA,EACA,YAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,SAAA;AAAA,MACA,OAAA;AAAA,QACA,MAAA;AAAA,UACA,MAAA;AAAA,UACA,UAAA;AAAA,UACA,SAAA;AAAA,UACA,SAAA,CAAA,QAAA,QAAA;AAAA,QACA;AAAA,QACA,oBAAA;AAAA,UACA,MAAA;AAAA,UACA,UAAA;AAAA,UACA,SAAAC,UAAA;AAAA,UACA,SAAA;AAAA,UACA,SAAA,CAAA,QAAA,QAAA;AAAA,QACA;AAAA,MACA;AAAA,MACA,MAAA;AAAA,QACA,MAAA;AAAA,QACA,oBAAA;AAAA,QACA,UAAA;AAAA,QACA,OAAA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA,SAAA;AACA,SAAA,sBAAA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,YAAA;AACA,YAAA,MAAA,OAAA;AACAC,oBAAAA,MAAA,WAAA;AAAA,QACA,KAAA,IAAA,WAAA;AAAA,MACA,CAAA;AACA,WAAA,MAAA,KACA,SAAA,EACA,KAAA,CAAA,QAAA;AACA,aAAA,OAAA;AAAA,MACA,CAAA,EACA,MAAA,CAAA,WAAA;AAAA,MAAA,CAAA;AAAA,IACA;AAAA,IACA,SAAA;AAAA;AACA,YAAA,KAAA,SAAA;AACA;AAAA,QACA;AACA,aAAA,UAAA;AACA,YAAA,SAAA,KAAA,MAAA,KAAA,UAAA,KAAA,IAAA,CAAA;AACA,YAAA,OAAAC,WAAAA;AACA,aAAA,MAAA,EAAA,KAAA,CAAA,QAAA;AACA,cAAA,IAAA,SAAA,KAAA;AACAD,0BAAAA,MAAA,UAAA;AAAA,cACA,OAAA;AAAA,cACA,MAAA;AAAA,cACA,UAAA;AAAA,YACA,CAAA;AACA,gBAAA,MAAA,OAAA;AACA,gBAAA,WAAA,cAAA;AACA,gBAAA,WAAA,SAAA,UAAA;AACA,uBAAA,MAAA;AACA,kBAAA,IAAA,WAAA,eAAA;AACAA,8BAAAA,MAAA,WAAA;AAAA,kBACA,KAAA,IAAA,WAAA;AAAA,gBACA,CAAA;AACA,oBAAA,WAAA,gBAAA;AACA;AAAA,cACA;AACAA,4BAAAA,MAAA,UAAA;AAAA,gBACA,KAAA;AAAA,cACA,CAAA;AAAA,YACA,GAAA,GAAA;AAAA,iBACA;AACAA,0BAAAA,MAAA,UAAA;AAAA,cACA,OAAA,IAAA;AAAA,cACA,MAAA;AAAA,YACA,CAAA;AAAA,UACA;AACA,eAAA,UAAA;AAAA,QACA,CAAA;AAAA,MACA;AAAA;AAAA,IACA,eAAA,SAAA;AACA,UAAA,MAAA,OAAA;AACA,UAAA,EAAA,cAAA,gBAAA;AACA,UAAA,iBAAA,WAAA;AACA,YAAA,MAAA,mBAAA,WAAA;AACA,YAAA,WAAA,gBAAA,+CAAA;AAAA,MACA;AAAA,IACA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnIA,GAAG,WAAW,eAAe;"}