{"version":3,"file":"app.js","sources":["../../../src/App.vue","../../../src/main.ts"],"sourcesContent":["<script setup lang=\"ts\">\nimport { onLaunch, onShow, onHide } from '@dcloudio/uni-app'\nimport { useUserStore } from '@/store/index'\nimport { useAppStore } from '@/store/app'\nlet isLetUserInfo = false\nonLaunch(() => {\n  const userStore = useUserStore()\n  if (userStore.isLogin && !isLetUserInfo) {\n    userStore.getUserInfo()\n    isLetUserInfo = true\n  }\n  uni.$on('GET_USER_INFO', (data) => {\n    if (data.isLogin) userStore.getUserInfo()\n    isLetUserInfo = true\n  })\n  const appStore = useAppStore()\n  appStore.getSystemInfo()\n  appStore.getAppBaseInfo()\n  userStore.getCommonEnumFn()\n  userStore.getUserTodoCenterData()\n  setThemeTypeByAppId()\n  // // 加载远程字体\n  uni.loadFontFace({\n    family: 'YouSheBiaoTiHei', // 自定义字体名称（如：'MyCustomFont'）\n    source: \"url('https://cdn-static.papa.com.cn/ppcs_mp/YouSheBiaoTiHei-2.ttf')\",\n    global: true,\n    success() {\n      console.log('字体加载成功')\n    },\n    fail(err) {\n      console.error('字体加载失败:', err)\n    },\n  })\n})\n//根据appId设置主题类型\nconst setThemeTypeByAppId = () => {\n  const appId = uni.getAccountInfoSync().miniProgram.appId\n  const appStore = useAppStore()\n  //瑞昌\n  if (appId === 'wxfe01aae4d0ffdb44') {\n    appStore.setThemeType('SkyBlue')\n  }\n  //万载\n  if (appId === 'wx84a3e7594546d208') {\n    appStore.setThemeType('EcologicalGreen')\n  }\n}\nonShow(() => {})\nonHide(() => {\n  console.log('App Hide')\n})\n</script>\n\n<script lang=\"ts\">\nexport default {\n  globalData: {\n    demo: 1,\n    userInfo: {},\n  },\n  onLaunch() {\n    this.autoUpdate()\n  },\n  methods: {\n    // 检测更新\n    autoUpdate() {\n      if (uni.canIUse('getUpdateManager')) {\n        var manager = uni.getUpdateManager()\n        manager.onCheckForUpdate(function (t) {\n          if (t.hasUpdate) {\n            manager.onUpdateReady(function () {\n              uni.showModal({\n                title: '更新提示',\n                content: '新版本已经准备好，请重启应用',\n                showCancel: false,\n                success: function (t) {\n                  if (t.confirm) {\n                    manager.applyUpdate()\n                    console.log('新版本已经下载好')\n                  }\n                },\n              })\n            })\n            manager.onUpdateFailed(function () {\n              uni.showModal({\n                title: '已经有新版本了哟~',\n                content: '新版本已经上线啦，请您删除当前小程序，重新搜索打开哟',\n                showCancel: !1,\n                success: function (e) {},\n              })\n            })\n          }\n        })\n      } else {\n        uni.showModal({\n          title: '温馨提示',\n          concent: '当前微信版本过低，无法使用该功能，请升级至最新微信版本后重试。',\n        })\n      }\n    },\n    //根据用户登录状态进行判断 needReal true的话需要认证指导员\n    judgeIsAuth(\n      options = {\n        needReal: false,\n      },\n    ) {\n      return new Promise(async (resolve) => {\n        const userStore = useUserStore()\n        const isLogin = userStore.isLogin\n        const isAuthInstructor = userStore.isAuthInstructor\n        const { needReal } = options\n        if (!needReal && !isLogin) {\n          uni.showModal({\n            title: '提示',\n            content: '请先进行登录',\n            showCancel: true,\n            success: ({ confirm, cancel }) => {\n              if (confirm) {\n                uni.navigateTo({\n                  url: '/pages/login/index',\n                })\n              }\n            },\n          })\n          resolve(false)\n          return\n        }\n        if (needReal && !isAuthInstructor) {\n          if (!isLogin) {\n            uni.showModal({\n              title: '提示',\n              content: '请先进行登录',\n              showCancel: true,\n              success: ({ confirm, cancel }) => {\n                if (confirm) {\n                  uni.navigateTo({\n                    url: '/pages/login/index',\n                  })\n                }\n              },\n            })\n            resolve(false)\n            return\n          }\n          uni.showModal({\n            title: '提示',\n            content: '请先认证社体指导员',\n            showCancel: true,\n            success: ({ confirm, cancel }) => {\n              if (confirm) {\n                uni.navigateTo({ url: '/pages-sub/realname/index' })\n              }\n            },\n          })\n          resolve(false)\n          return\n        }\n\n        resolve(true)\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n@import './style/css/index.css';\n@import './style/scss/index.scss';\n// @import './style/css/common.css';\n/* stylelint-disable selector-type-no-unknown */\nbutton::after {\n  border: none;\n}\n\nswiper,\nscroll-view {\n  flex: 1;\n  height: 100%;\n  overflow: hidden;\n}\n\nimage {\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n}\n\n// 单行省略，优先使用 unocss: text-ellipsis\n.ellipsis {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n// 两行省略\n.ellipsis-2 {\n  display: -webkit-box;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n// 三行省略\n.ellipsis-3 {\n  display: -webkit-box;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n}\n</style>\n","import { createSSRApp } from 'vue'\nimport dayjs from 'dayjs'\nimport isBetween from 'dayjs/plugin/isBetween'\nimport duration from 'dayjs/plugin/duration'\nimport App from './App.vue'\nimport store from './store'\nimport { log } from './utils/logUtils/prettyLog'\nimport { routeInterceptor, requestInterceptor, prototypeInterceptor } from './interceptors'\nimport 'virtual:uno.css'\n\nimport api from './apis/index'\nimport ViaIcon from './icons/components/ViaIcon/index.vue'\nimport { useDialog, useLoading, useToast, jumpToPath } from './utils/modals/index'\nimport _showDictLabel from './utils/showDictLabel'\nimport dict from './utils/dict'\nimport { useAssets } from './utils/assets/local'\nimport uvUi from '@climblee/uv-ui'\nimport '@climblee/uv-ui/index.scss'\nimport empty from '@/components/empty.vue'\nimport loadMore from '@/components/loadMore.vue'\nimport bottomButton from '@/components/bottomButton.vue'\nimport paTag from '@/components/paTag/index.vue'\nimport paBackToTop from '@/components/paBackToTop/index.vue'\nimport appMount from './mixins/appMount.js'\nimport navBar from './components/navBar/index.vue'\n\n// @ts-ignore\nuni.$log = log\nexport function createApp() {\n  const app = createSSRApp(App)\n  app.use(store)\n  app.use(routeInterceptor)\n  app.use(requestInterceptor)\n  app.use(prototypeInterceptor)\n  app.use(uvUi)\n  app.use(appMount)\n\n  app.use(api)\n  app.component('ViaIcon', ViaIcon)\n  app.config.globalProperties.$dialog = useDialog\n  app.config.globalProperties.$toast = useToast\n  app.config.globalProperties.$loading = useLoading\n  app.config.globalProperties.$jumpToPath = jumpToPath\n\n  app.config.globalProperties.$showDictLabel = _showDictLabel\n  app.config.globalProperties.$dict = dict\n  dayjs.extend(isBetween)\n  dayjs.extend(duration)\n  app.config.globalProperties.$dayjs = dayjs\n  app.component('empty', empty)\n  app.component('loadMore', loadMore)\n  app.component('bottomButton', bottomButton)\n  app.component('appMount', appMount)\n  app.component('paTag', paTag)\n  app.component('paBackToTop', paBackToTop)\n  app.component('navBar', navBar)\n  // 静态资源加载工具\n  app.config.globalProperties.$assets = useAssets\n  return {\n    app,\n    Pinia: store.Pinia,\n  }\n}\n"],"names":["uni","t","useUserStore","onLaunch","useAppStore","onShow","onHide","log","createSSRApp","App","store","routeInterceptor","requestInterceptor","prototypeInterceptor","uvUi","appMount","api","useDialog","useToast","useLoading","jumpToPath","_showDictLabel","dict","dayjs","isBetween","duration","useAssets"],"mappings":"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"}