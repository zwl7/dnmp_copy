{"version":3,"file":"uv-drop-down-item.js","sources":["../../../../../../../src/components/dropDown/my-drop-down/uv-drop-down-item/uv-drop-down-item.vue","../../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvY29tcG9uZW50cy9kcm9wRG93bi9teS1kcm9wLWRvd24vdXYtZHJvcC1kb3duLWl0ZW0vdXYtZHJvcC1kb3duLWl0ZW0udnVl"],"sourcesContent":["<template>\n  <view class=\"uv-drop-down-item\" @click=\"clickHandler\">\n    <!-- \t\t<uv-text :text=\"label\" :size=\"getTextStyle.size\" :color=\"getTextStyle.color\" lines=\"1\"\n\t\t\t:custom-style=\"{marginRight: '10rpx',maxWidth:'200rpx'}\"></uv-text> -->\n    <text :style=\"{ fontSize: getTextStyle.size, color: getTextStyle.color }\" class=\"item-text\">\n      {{ label }}\n    </text>\n    <view class=\"uv-icon\">\n      <uv-icon\n        custom-prefix=\"iconfont\"\n        :name=\"getDownIcon.name\"\n        :size=\"getDownIcon.size\"\n        :color=\"getDownIcon.color\"\n        v-if=\"[1, '1'].indexOf(type) == -1\"\n      ></uv-icon>\n    </view>\n  </view>\n</template>\n<script>\nimport mpMixin from '@climblee/uv-ui/libs/mixin/mpMixin.js'\nimport mixin from '@climblee/uv-ui/libs/mixin/mixin.js'\n/**\n * DropDown 下拉框\n * @description 下拉筛选\n * @tutorial https://ext.dcloud.net.cn/plugin?name=uv-drop-down\n * @property {String | Number} name 字段标识\n * @property {String | Number} type 类型 1 没有筛选项，直接进行选中和不选中  2 有多个选项\n * @property {String | Number} label 筛选项的文本\n * @property {Boolean} isDrop 该项是否打开\n */\nexport default {\n  name: 'uv-drop-down-item',\n  mixins: [mpMixin, mixin],\n  emits: ['click'],\n  props: {\n    name: {\n      type: [String, Number],\n      default: '',\n    },\n    // 类型 1 没有筛选项，直接进行选中和不选中  2 有多个选项\n    type: {\n      type: [String, Number],\n      default: '2',\n    },\n    // 筛选的文本\n    label: {\n      type: [String],\n      default: '',\n    },\n    // 筛选值\n    value: {\n      type: [String, Number, null],\n      default: '',\n    },\n    // 是否下拉菜单打开\n    isDrop: {\n      type: Boolean,\n      default: false,\n    },\n    // 是否延迟执行\n    sleep: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      parentData: {\n        defaultValue: [],\n        textSize: '28rpx',\n        textColor: '#303133',\n        textActiveSize: '28rpx',\n        textActiveColor: '#3c9cff',\n        extraIcon: {},\n        extraActiveIcon: {},\n        sign: '',\n        clickHandler: Function,\n      },\n      active: false,\n      isDroped: false,\n      elId: '',\n    }\n  },\n  watch: {\n    isDrop: {\n      handler(newVal) {\n        this.isDroped = newVal\n      },\n      immediate: true,\n    },\n    value: {\n      handler(newVal) {\n        this.active = this.parentData.defaultValue.indexOf(newVal) == -1\n      },\n      immediate: true,\n    },\n    ['parentData.defaultValue']: {\n      handler(newVal) {\n        this.active = newVal.indexOf(this.value) == -1\n      },\n      immediate: true,\n    },\n  },\n  computed: {\n    getDownIcon() {\n      const style = {\n        size: '28rpx',\n        color: '#303133',\n        ...this.parentData.extraIcon,\n      }\n      if (this.active || this.isDroped) {\n        style.color = this.parentData.extraActiveIcon?.color\n          ? this.parentData.extraActiveIcon?.color\n          : '#3c9cff'\n        style.size = this.parentData.extraActiveIcon?.size\n          ? this.parentData.extraActiveIcon?.size\n          : '30rpx'\n      }\n      if (this.isDroped) {\n        style.name = this.parentData.extraActiveIcon?.name\n      }\n      return style\n    },\n    getTextStyle() {\n      const style = {\n        size: this.parentData.textSize,\n        color: this.parentData.textColor,\n      }\n      if (this.active || this.isDroped) {\n        style.size = this.parentData.textActiveSize\n        style.color = this.parentData.textActiveColor\n      }\n      return style\n    },\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init() {\n      this.elId = this.$uv.guid()\n      this.getParentData('uv-drop-down')\n      if (!this.parent) {\n        this.$uv.error('uv-drop-down必须搭配uv-drop-down-item组件使用')\n      }\n      uni.$on('HANDLE_DROPDOWN_ONE', (id) => {\n        if (this.isDroped && this.elId != id) {\n          this.isDroped = false\n        }\n      })\n      uni.$on(`${this.parentData.sign}_CLOSEPOPUP`, async () => {\n        if (this.isDroped) {\n          this.isDroped = false\n        }\n      })\n    },\n    async clickHandler() {\n      let data = {}\n      uni.$emit('HANDLE_DROPDOWN_ONE', this.elId)\n      this.getParentData('uv-drop-down')\n      switch (+this.type) {\n        case 1:\n          this.active = !this.active\n          data = {\n            name: this.name,\n            active: this.active,\n            type: this.type,\n          }\n          break\n        case 2:\n          this.isDroped = !this.isDroped\n          data = {\n            name: this.name,\n            active: this.isDroped,\n            type: this.type,\n          }\n          break\n      }\n      // TODO 延迟执行 防止父组件还未渲染完成就执行点击事件 需要完善\n      console.log(this.sleep)\n      setTimeout(() => {\n        this.parentData.clickHandler(data)\n        uni.$emit(`${this.parentData.sign}_CLICKMENU`, {\n          show: +this.type > 1 && this.isDroped,\n        })\n        this.$emit('click', data)\n      }, this.sleep)\n    },\n  },\n}\n</script>\n<style scoped lang=\"scss\">\n@import '@climblee/uv-ui/libs/css/components.scss';\n\n.uv-drop-down-item {\n  @include flex;\n  align-items: center;\n  padding: 0 20rpx;\n  box-sizing: border-box;\n  flex: 1;\n  justify-content: center;\n  height: 96rpx;\n  overflow: hidden;\n\n  .item-text {\n    margin-right: 8rpx;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .uv-icon {\n    transform: scale(0.5);\n  }\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/components/dropDown/my-drop-down/uv-drop-down-item/uv-drop-down-item.vue'\nwx.createComponent(Component)"],"names":["mpMixin","mixin","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,QAAQ,CAACA,cAAO,SAAEC,mBAAK;AAAA,EACvB,OAAO,CAAC,OAAO;AAAA,EACf,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACV;AAAA;AAAA,IAED,MAAM;AAAA,MACJ,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACV;AAAA;AAAA,IAED,OAAO;AAAA,MACL,MAAM,CAAC,MAAM;AAAA,MACb,SAAS;AAAA,IACV;AAAA;AAAA,IAED,OAAO;AAAA,MACL,MAAM,CAAC,QAAQ,QAAQ,IAAI;AAAA,MAC3B,SAAS;AAAA,IACV;AAAA;AAAA,IAED,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA;AAAA,IAED,OAAO;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,YAAY;AAAA,QACV,cAAc,CAAE;AAAA,QAChB,UAAU;AAAA,QACV,WAAW;AAAA,QACX,gBAAgB;AAAA,QAChB,iBAAiB;AAAA,QACjB,WAAW,CAAE;AAAA,QACb,iBAAiB,CAAE;AAAA,QACnB,MAAM;AAAA,QACN,cAAc;AAAA,MACf;AAAA,MACD,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,MAAM;AAAA,IACR;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,QAAQ;AAAA,MACN,QAAQ,QAAQ;AACd,aAAK,WAAW;AAAA,MACjB;AAAA,MACD,WAAW;AAAA,IACZ;AAAA,IACD,OAAO;AAAA,MACL,QAAQ,QAAQ;AACd,aAAK,SAAS,KAAK,WAAW,aAAa,QAAQ,MAAM,KAAK;AAAA,MAC/D;AAAA,MACD,WAAW;AAAA,IACZ;AAAA,IACD,CAAC,yBAAyB,GAAG;AAAA,MAC3B,QAAQ,QAAQ;AACd,aAAK,SAAS,OAAO,QAAQ,KAAK,KAAK,KAAK;AAAA,MAC7C;AAAA,MACD,WAAW;AAAA,IACZ;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,cAAc;;AACZ,YAAM,QAAQ;AAAA,QACZ,MAAM;AAAA,QACN,OAAO;AAAA,SACJ,KAAK,WAAW;AAErB,UAAI,KAAK,UAAU,KAAK,UAAU;AAChC,cAAM,UAAQ,UAAK,WAAW,oBAAhB,mBAAiC,UAC3C,UAAK,WAAW,oBAAhB,mBAAiC,QACjC;AACJ,cAAM,SAAO,UAAK,WAAW,oBAAhB,mBAAiC,SAC1C,UAAK,WAAW,oBAAhB,mBAAiC,OACjC;AAAA,MACN;AACA,UAAI,KAAK,UAAU;AACjB,cAAM,QAAO,UAAK,WAAW,oBAAhB,mBAAiC;AAAA,MAChD;AACA,aAAO;AAAA,IACR;AAAA,IACD,eAAe;AACb,YAAM,QAAQ;AAAA,QACZ,MAAM,KAAK,WAAW;AAAA,QACtB,OAAO,KAAK,WAAW;AAAA,MACzB;AACA,UAAI,KAAK,UAAU,KAAK,UAAU;AAChC,cAAM,OAAO,KAAK,WAAW;AAC7B,cAAM,QAAQ,KAAK,WAAW;AAAA,MAChC;AACA,aAAO;AAAA,IACR;AAAA,EACF;AAAA,EACD,UAAU;AACR,SAAK,KAAI;AAAA,EACV;AAAA,EACD,SAAS;AAAA,IACP,OAAO;AACL,WAAK,OAAO,KAAK,IAAI,KAAI;AACzB,WAAK,cAAc,cAAc;AACjC,UAAI,CAAC,KAAK,QAAQ;AAChB,aAAK,IAAI,MAAM,uCAAuC;AAAA,MACxD;AACAC,oBAAAA,MAAI,IAAI,uBAAuB,CAAC,OAAO;AACrC,YAAI,KAAK,YAAY,KAAK,QAAQ,IAAI;AACpC,eAAK,WAAW;AAAA,QAClB;AAAA,MACD,CAAA;AACDA,oBAAG,MAAC,IAAI,GAAG,KAAK,WAAW,IAAI,eAAe,MAAY;AACxD,YAAI,KAAK,UAAU;AACjB,eAAK,WAAW;AAAA,QAClB;AAAA,MACD,EAAA;AAAA,IACF;AAAA,IACK,eAAe;AAAA;AACnB,YAAI,OAAO,CAAA;AACXA,sBAAAA,MAAI,MAAM,uBAAuB,KAAK,IAAI;AAC1C,aAAK,cAAc,cAAc;AACjC,gBAAQ,CAAC,KAAK,MAAI;AAAA,UAChB,KAAK;AACH,iBAAK,SAAS,CAAC,KAAK;AACpB,mBAAO;AAAA,cACL,MAAM,KAAK;AAAA,cACX,QAAQ,KAAK;AAAA,cACb,MAAM,KAAK;AAAA,YACb;AACA;AAAA,UACF,KAAK;AACH,iBAAK,WAAW,CAAC,KAAK;AACtB,mBAAO;AAAA,cACL,MAAM,KAAK;AAAA,cACX,QAAQ,KAAK;AAAA,cACb,MAAM,KAAK;AAAA,YACb;AACA;AAAA,QACJ;AAEA,gBAAQ,IAAI,KAAK,KAAK;AACtB,mBAAW,MAAM;AACf,eAAK,WAAW,aAAa,IAAI;AACjCA,wBAAG,MAAC,MAAM,GAAG,KAAK,WAAW,IAAI,cAAc;AAAA,YAC7C,MAAM,CAAC,KAAK,OAAO,KAAK,KAAK;AAAA,UAC9B,CAAA;AACD,eAAK,MAAM,SAAS,IAAI;AAAA,QACzB,GAAE,KAAK,KAAK;AAAA,MACd;AAAA;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5LA,GAAG,gBAAgB,SAAS;"}