{"version":3,"file":"index.js","sources":["../../../../../src/pages/trainRecord/index.vue","../../../../../uniPage:/cGFnZXMvdHJhaW5SZWNvcmQvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"activity-container\">\n    <z-paging\n      ref=\"pagingRef\"\n      auto-height\n      v-model=\"recordData\"\n      @query=\"queryList\"\n      empty-view-text=\"暂无内容\"\n      empty-view-img=\"https://cdn-static.papa.com.cn/yuncheng/empty/暂无内容.png\"\n      :empty-view-img-style=\"{ width: '160px', height: '160px' }\"\n    >\n      <template #top>\n        <uv-tabs\n          :list=\"list1\"\n          :scrollable=\"false\"\n          @click=\"handleStatus\"\n          :lineColor=\"activitedColor\"\n        ></uv-tabs>\n      </template>\n      <view class=\"r-container h-52\" v-for=\"item in recordData\" :key=\"item\" @click=\"toDetail(item)\">\n        <view class=\"r-header h-10 flex items-center mr-3 ml-3\">\n          <text class=\"uv-line-1\">{{ item.promote_name }}</text>\n          <uv-tags\n            class=\"r-tag\"\n            :text=\"getColorStyle('label', item.status)\"\n            :type=\"getColorStyle('color', item.status)\"\n            plain\n            shape=\"circle\"\n            size=\"mini\"\n          ></uv-tags>\n        </view>\n        <hr />\n        <view class=\"r-content mt-2\">\n          <view class=\"r-text\">\n            <div>项目</div>\n            <text>{{ item.projectName }}</text>\n          </view>\n          <view class=\"r-text\">\n            <div>姓名</div>\n            <text>{{ item.name }}</text>\n          </view>\n          <view class=\"r-text\">\n            <div>身份证号</div>\n            <text>{{ item.id_card }}</text>\n          </view>\n          <view class=\"r-text\">\n            <div>报名时间</div>\n            <text>{{ item.applayTime }}</text>\n          </view>\n        </view>\n      </view>\n    </z-paging>\n  </view>\n</template>\n\n<script>\nimport uniStorage from '@/utils/storages/uniStorage'\nexport default {\n  data() {\n    return {\n      recordData: [],\n      list1: [\n        {\n          value: 0,\n          name: '全部',\n        },\n        {\n          value: 1,\n          name: '待审核',\n        },\n        {\n          value: 2,\n          name: '通过',\n        },\n        {\n          value: 3,\n          name: '拒绝',\n        },\n      ],\n      pickTab: 0,\n    }\n  },\n  computed: {\n    activitedColor() {\n      return this.$store.app.themeConfig['--hubei-primary']\n    },\n  },\n  onUnload() {\n    uniStorage.remove('updated')\n  },\n  onShow() {\n    let refresh = uniStorage.get('updated')\n    if (refresh) {\n      this.queryList(1, 10)\n    }\n  },\n  methods: {\n    toDetail(item) {\n      uni.navigateTo({\n        url: `/pages-sub/trainApply/detail?train_activity_apply_id=${item.train_activity_apply_id}&train_activity_id=${item.train_activity_id}`,\n      })\n    },\n    getColorStyle(type, status) {\n      return this.$dict.getDictLabel('statusColor', status, { labelKey: type })\n    },\n    handleStatus(item) {\n      this.pickTab = item.value\n      this.queryList(1, 10)\n    },\n    async queryList(pageNo, pageSize) {\n      console.log('[ pageNo ] >', pageNo)\n      console.log('[ pageSize ] >', this.$refs)\n      let params = {\n        page: pageNo,\n        size: pageSize,\n      }\n      let status = this.pickTab\n      console.log(status)\n      if (status != 0 && status) {\n        params.status = status\n      }\n      let res = await this.$api.getWxTrainActivityApplyList(params)\n      if (res.code == 200) {\n        let data = res.data.list\n        data = data.map((item) => {\n          return {\n            // title: item.province_str + item.city_str + item.county_str + item.promote_level_str + (item.promote_name || \"\"),\n            applayTime: this.$dayjs(item.c_time * 1000).format('YYYY-MM-DD HH:mm:ss'),\n            projectName: item.promote_tag_ids_arr\n              .map((tItem) => {\n                return tItem.tag_id_str\n              })\n              .toString(),\n            ...item,\n          }\n        })\n        this.recordData = data\n        this.$refs.pagingRef?.complete(this.recordData)\n      } else {\n        this.$toast(res.message)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.activity-container {\n  .r-container {\n    margin: 20rpx 40rpx 0rpx 40rpx;\n    padding: 10rpx;\n    border-radius: 8rpx;\n    background: white;\n\n    .r-header {\n      justify-content: space-between;\n      .r-title {\n        overflow: auto;\n      }\n\n      .r-tag {\n        float: right;\n      }\n    }\n\n    hr {\n      opacity: 0.1;\n      background: rgba(235, 237, 240, 1);\n    }\n\n    .r-content {\n      font-size: 26rpx;\n      color: rgba(96, 98, 102, 1);\n\n      .r-text {\n        padding: 20rpx;\n        display: flex;\n        flex-direction: row;\n\n        :first-child {\n          width: 150rpx;\n        }\n      }\n    }\n  }\n\n  // .z-paging-content {\n  //   margin-top: 80rpx;\n  //   padding-bottom: 30rpx;\n  // }\n  // :deep(.zp-l-container) {\n  //   margin-top: 15rpx;\n  // }\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages/trainRecord/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniStorage","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA,MAAA,YAAA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,YAAA,CAAA;AAAA,MACA,OAAA;AAAA,QACA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA;AAAA,QACA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA;AAAA,QACA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA;AAAA,QACA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA;AAAA,MACA;AAAA,MACA,SAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,UAAA;AAAA,IACA,iBAAA;AACA,aAAA,KAAA,OAAA,IAAA,YAAA,iBAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,WAAA;AACAA,8BAAA,WAAA,OAAA,SAAA;AAAA,EACA;AAAA,EACA,SAAA;AACA,QAAA,UAAAA,qCAAA,IAAA,SAAA;AACA,QAAA,SAAA;AACA,WAAA,UAAA,GAAA,EAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,SAAA,MAAA;AACAC,oBAAAA,MAAA,WAAA;AAAA,QACA,KAAA,wDAAA,KAAA,uBAAA,sBAAA,KAAA,iBAAA;AAAA,MACA,CAAA;AAAA,IACA;AAAA,IACA,cAAA,MAAA,QAAA;AACA,aAAA,KAAA,MAAA,aAAA,eAAA,QAAA,EAAA,UAAA,KAAA,CAAA;AAAA,IACA;AAAA,IACA,aAAA,MAAA;AACA,WAAA,UAAA,KAAA;AACA,WAAA,UAAA,GAAA,EAAA;AAAA,IACA;AAAA,IACA,UAAA,QAAA,UAAA;AAAA;;AACA,gBAAA,IAAA,gBAAA,MAAA;AACA,gBAAA,IAAA,kBAAA,KAAA,KAAA;AACA,YAAA,SAAA;AAAA,UACA,MAAA;AAAA,UACA,MAAA;AAAA,QACA;AACA,YAAA,SAAA,KAAA;AACA,gBAAA,IAAA,MAAA;AACA,YAAA,UAAA,KAAA,QAAA;AACA,iBAAA,SAAA;AAAA,QACA;AACA,YAAA,MAAA,MAAA,KAAA,KAAA,4BAAA,MAAA;AACA,YAAA,IAAA,QAAA,KAAA;AACA,cAAA,OAAA,IAAA,KAAA;AACA,iBAAA,KAAA,IAAA,CAAA,SAAA;AACA,mBAAA;AAAA;AAAA,cAEA,YAAA,KAAA,OAAA,KAAA,SAAA,GAAA,EAAA,OAAA,qBAAA;AAAA,cACA,aAAA,KAAA,oBACA,IAAA,CAAA,UAAA;AACA,uBAAA,MAAA;AAAA,cACA,CAAA,EACA,SAAA;AAAA,eACA;AAAA,UAEA,CAAA;AACA,eAAA,aAAA;AACA,qBAAA,MAAA,cAAA,mBAAA,SAAA,KAAA;AAAA,eACA;AACA,eAAA,OAAA,IAAA,OAAA;AAAA,QACA;AAAA,MACA;AAAA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9IA,GAAG,WAAW,eAAe;"}