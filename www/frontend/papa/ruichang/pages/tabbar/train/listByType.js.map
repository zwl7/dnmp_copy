{"version":3,"file":"listByType.js","sources":["../../../../../../src/pages/tabbar/train/listByType.vue","../../../../../../uniPage:/cGFnZXMvdGFiYmFyL3RyYWluL2xpc3RCeVR5cGUudnVl"],"sourcesContent":["<template>\n  <div>\n    <z-paging\n      ref=\"pagingRef\"\n      v-model=\"dataList\"\n      @query=\"queryList\"\n      :loading-more-custom-style=\"{ 'padding-bottom': '200rpx' }\"\n    >\n      <template #top>\n        <trainDropDown @search=\"search\" ref=\"homeDropDownRef\" />\n      </template>\n      <view class=\"main-box\">\n        <TrainItem v-for=\"item in dataList\" :key=\"item\" :item=\"item\" />\n        <view v-if=\"dataList.length == 0\" style=\"min-height: 100vh\">\n          <empty></empty>\n        </view>\n      </view>\n      <template #empty></template>\n    </z-paging>\n  </div>\n</template>\n\n<script>\nimport TrainItem from '@/components/TrainItem/index.vue'\nimport trainDropDown from './components/trainDropDown.vue'\nexport default {\n  components: {\n    TrainItem,\n    trainDropDown,\n  },\n  data() {\n    return {\n      area: '',\n      urls: [],\n      dataList: [],\n      areaGroupList: [\n        [\n          {\n            text: '全部区域',\n            value: 0,\n          },\n        ],\n      ],\n      tempDataObj: {},\n      searchObj: {},\n      train_type: 0,\n    }\n  },\n  onLoad(options) {\n    console.log('[ options ] >', options)\n\n    if (options.trainType) {\n      this.train_type = options.trainType\n    }\n    if (options.title) {\n      uni.setNavigationBarTitle({\n        title: options.title,\n      })\n    }\n  },\n  onHide() {\n    this.$refs.homeDropDownRef?.close()\n  },\n  methods: {\n    handleStatus(item) {\n      this.pickTab = item.value\n      this.queryList(1, 10)\n    },\n    search(data) {\n      this.searchObj = data\n      this.queryList(1, 10)\n    },\n    getLabel(data = [], key, keyArray = []) {\n      let label = []\n      data.forEach((item) => {\n        if (item[keyArray[0]] == key) {\n          label.push(item[keyArray[1]])\n        }\n        if (item[keyArray[2]] && item[keyArray[2]].length > 0) {\n          label = label.concat(this.getLabel(item[keyArray[2]], key, keyArray))\n        }\n      })\n      return label\n    },\n    async queryList(pageNo, pageSize) {\n      console.log('[ pageNo ] >', pageNo)\n      console.log('[ pageSize ] >', pageSize)\n      let resAreaGroupList = this.tempDataObj.areaGroupList\n      let params = {\n        page: pageNo,\n        size: pageSize,\n        ...this.searchObj,\n      }\n      if (this.train_type != 0) {\n        params.train_type = this.train_type\n      }\n      let res = await this.$api.getWxTrainActivityList(params)\n      if (res.code !== 200) {\n        this.$toast(res.message)\n        return\n      }\n      if (res.code == 200) {\n        let dealData = res.data.list.map((item) => {\n          let startTime = this.$dayjs(item.apply_start_time * 1000).format('YYYY-MM-DD')\n          let endTime = this.$dayjs(item.apply_end_time * 1000).format('YYYY-MM-DD')\n          let formatObj = {\n            tagStr: item.tag_ids_arr\n              .map((tagItem) => {\n                return tagItem.tag_id_str\n              })\n              .toString(),\n            startTime: startTime,\n            endTime: endTime,\n          }\n          return {\n            ...formatObj,\n            ...item,\n          }\n        })\n        this.dataList = dealData\n        this.$refs.pagingRef?.complete(dealData)\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.sticky {\n  top: -1px !important;\n  background-color: #fff;\n}\n.top-box {\n  background: #fff;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages/tabbar/train/listByType.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,kBAAA,MAAA;AACA,MAAA,gBAAA,MAAA;AACA,MAAA,YAAA;AAAA,EACA,YAAA;AAAA,IACA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,MAAA;AAAA,MACA,MAAA,CAAA;AAAA,MACA,UAAA,CAAA;AAAA,MACA,eAAA;AAAA,QACA;AAAA,UACA;AAAA,YACA,MAAA;AAAA,YACA,OAAA;AAAA,UACA;AAAA,QACA;AAAA,MACA;AAAA,MACA,aAAA,CAAA;AAAA,MACA,WAAA,CAAA;AAAA,MACA,YAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,OAAA,SAAA;AACA,YAAA,IAAA,iBAAA,OAAA;AAEA,QAAA,QAAA,WAAA;AACA,WAAA,aAAA,QAAA;AAAA,IACA;AACA,QAAA,QAAA,OAAA;AACAA,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA,QAAA;AAAA,MACA,CAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;;AACA,eAAA,MAAA,oBAAA,mBAAA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,aAAA,MAAA;AACA,WAAA,UAAA,KAAA;AACA,WAAA,UAAA,GAAA,EAAA;AAAA,IACA;AAAA,IACA,OAAA,MAAA;AACA,WAAA,YAAA;AACA,WAAA,UAAA,GAAA,EAAA;AAAA,IACA;AAAA,IACA,SAAA,OAAA,CAAA,GAAA,KAAA,WAAA,CAAA,GAAA;AACA,UAAA,QAAA,CAAA;AACA,WAAA,QAAA,CAAA,SAAA;AACA,YAAA,KAAA,SAAA,CAAA,CAAA,KAAA,KAAA;AACA,gBAAA,KAAA,KAAA,SAAA,CAAA,CAAA,CAAA;AAAA,QACA;AACA,YAAA,KAAA,SAAA,CAAA,CAAA,KAAA,KAAA,SAAA,CAAA,CAAA,EAAA,SAAA,GAAA;AACA,kBAAA,MAAA,OAAA,KAAA,SAAA,KAAA,SAAA,CAAA,CAAA,GAAA,KAAA,QAAA,CAAA;AAAA,QACA;AAAA,MACA,CAAA;AACA,aAAA;AAAA,IACA;AAAA,IACA,UAAA,QAAA,UAAA;AAAA;;AACA,gBAAA,IAAA,gBAAA,MAAA;AACA,gBAAA,IAAA,kBAAA,QAAA;AACA,aAAA,YAAA;AACA,YAAA,SAAA;AAAA,UACA,MAAA;AAAA,UACA,MAAA;AAAA,WACA,KAAA;AAEA,YAAA,KAAA,cAAA,GAAA;AACA,iBAAA,aAAA,KAAA;AAAA,QACA;AACA,YAAA,MAAA,MAAA,KAAA,KAAA,uBAAA,MAAA;AACA,YAAA,IAAA,SAAA,KAAA;AACA,eAAA,OAAA,IAAA,OAAA;AACA;AAAA,QACA;AACA,YAAA,IAAA,QAAA,KAAA;AACA,cAAA,WAAA,IAAA,KAAA,KAAA,IAAA,CAAA,SAAA;AACA,gBAAA,YAAA,KAAA,OAAA,KAAA,mBAAA,GAAA,EAAA,OAAA,YAAA;AACA,gBAAA,UAAA,KAAA,OAAA,KAAA,iBAAA,GAAA,EAAA,OAAA,YAAA;AACA,gBAAA,YAAA;AAAA,cACA,QAAA,KAAA,YACA,IAAA,CAAA,YAAA;AACA,uBAAA,QAAA;AAAA,cACA,CAAA,EACA,SAAA;AAAA,cACA;AAAA,cACA;AAAA,YACA;AACA,mBAAA,kCACA,YACA;AAAA,UAEA,CAAA;AACA,eAAA,WAAA;AACA,qBAAA,MAAA,cAAA,mBAAA,SAAA;AAAA,QACA;AAAA,MACA;AAAA;AAAA,EACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3HA,GAAG,WAAW,eAAe;"}