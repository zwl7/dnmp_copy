{"version":3,"file":"index.js","sources":["../../../../../../src/pages/tabbar/train/index.vue","../../../../../../uniPage:/cGFnZXMvdGFiYmFyL3RyYWluL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n  <div>\n    <z-paging\n      ref=\"pagingRef\"\n      v-model=\"dataList\"\n      @query=\"queryList\"\n      @scroll=\"pageScroll\"\n      :loading-more-custom-style=\"{ 'padding-bottom': '200rpx' }\"\n    >\n      <template #top></template>\n      <view class=\"main-box\">\n        <navBar\n          title=\"培训\"\n          :showBack=\"false\"\n          :fixed=\"false\"\n          :navColor=\"navColor\"\n          :titleColor=\"titleColor\"\n        />\n        <image\n          src=\"https://cdn-static.papa.com.cn/social/themeStatic/SkyBlue/train_page_header_top.png\"\n          class=\"header-top\"\n          mode=\"widthFix\"\n        />\n        <view class=\"top-box\" :style=\"{ top: navBarHeight - 2 + 'px' }\">\n          <uv-tabs\n            :list=\"list1\"\n            :scrollable=\"false\"\n            @click=\"handleStatus\"\n            :lineColor=\"activitedColor\"\n          ></uv-tabs>\n          <trainDropDown @search=\"search\" ref=\"homeDropDownRef\" />\n        </view>\n\n        <TrainItem v-for=\"(item, index) in dataList\" :key=\"index\" :item=\"item\" />\n        <view v-if=\"dataList.length == 0\" style=\"min-height: 100vh\">\n          <empty></empty>\n        </view>\n      </view>\n      <template #empty></template>\n      <!-- 返回顶部 -->\n      <paBackToTop :scroll-top=\"scrollTop\" @click=\"backToTop\" />\n    </z-paging>\n  </div>\n</template>\n\n<script>\nimport TrainItem from '@/components/TrainItem/index.vue'\nimport trainDropDown from './components/trainDropDown.vue'\nimport shareMixins from '@/mixins/shareMixins'\nimport navBar from '@/components/navBar/index.vue'\nexport default {\n  mixins: [shareMixins],\n  components: {\n    TrainItem,\n    trainDropDown,\n    navBar,\n  },\n  data() {\n    return {\n      area: '',\n      urls: [],\n      pickTab: 0,\n      dataList: [],\n      areaGroupList: [\n        [\n          {\n            text: '全部区域',\n            value: 0,\n          },\n        ],\n      ],\n      tempDataObj: {},\n      searchObj: {},\n      navBarHeight: 0,\n      navColor: 'transparent',\n      titleColor: 'transparent',\n      customStyle: {\n        backgroundColor: 'transparent',\n      },\n      list1: [\n        {\n          value: 0,\n          name: '全部活动',\n        },\n        {\n          value: 1,\n          name: '晋级培训',\n        },\n        {\n          value: 2,\n          name: '技能培训',\n        },\n      ],\n    }\n  },\n  computed: {\n    activitedColor() {\n      return this.$store.app.themeConfig['--hubei-primary']\n    },\n    themeType() {\n      return this.$store.app.themeType\n    },\n    showList() {\n      if (this.themeType == 'SkyBlue') {\n        return [\n          {\n            value: 0,\n            name: '全部活动',\n          },\n          {\n            value: 1,\n            name: '晋级培训',\n          },\n          {\n            value: 2,\n            name: '技能培训',\n          },\n        ]\n      } else {\n        return [\n          {\n            value: 0,\n            name: '全部活动',\n          },\n          {\n            value: 1,\n            name: '晋级培训',\n          },\n          {\n            value: 2,\n            name: '技能培训',\n          },\n          {\n            value: 3,\n            name: '校园培训',\n          },\n        ]\n      }\n    },\n  },\n  onLoad(options) {\n    this.navBarHeight = this.$store.app.menuInfo.navBarHeight\n  },\n  onHide() {\n    this.$refs.homeDropDownRef?.close()\n  },\n  methods: {\n    //返回顶部\n    backToTop() {\n      this.$refs.pagingRef?.scrollToTop()\n    },\n    pageScroll(event) {\n      let scrollTop = event.detail.scrollTop\n      this.scrollTop = scrollTop\n      if (scrollTop > 100) {\n        this.navColor = '#fff'\n        this.titleColor = '#333'\n      } else {\n        this.navColor = 'transparent'\n        this.titleColor = 'transparent'\n      }\n    },\n    resetData() {\n      uni.showLoading({\n        title: '加载中',\n      })\n      this.dataList = []\n      this.$refs.pagingRef?.complete([])\n    },\n    handleStatus(item) {\n      this.pickTab = item.value\n      this.resetData()\n      this.queryList(1, 10)\n    },\n    search(data) {\n      this.searchObj = data\n      this.resetData()\n      this.queryList(1, 10)\n    },\n    getLabel(data = [], key, keyArray = []) {\n      let label = []\n      data.forEach((item) => {\n        if (item[keyArray[0]] == key) {\n          label.push(item[keyArray[1]])\n        }\n        if (item[keyArray[2]] && item[keyArray[2]].length > 0) {\n          label = label.concat(this.getLabel(item[keyArray[2]], key, keyArray))\n        }\n      })\n      return label\n    },\n    async queryList(pageNo, pageSize) {\n      console.log('[ pageNo ] >', pageNo)\n      console.log('[ pageSize ] >', pageSize)\n      let resAreaGroupList = this.tempDataObj.areaGroupList\n      let params = {\n        page: pageNo,\n        size: pageSize,\n        ...this.searchObj,\n      }\n      if (this.pickTab != 0) {\n        params.train_type = this.pickTab\n      }\n      let res = await this.$api.getWxTrainActivityList(params)\n      if (res.code == 200) {\n        let dealData = res.data.list.map((item) => {\n          let startTime = this.$dayjs(item.apply_start_time * 1000).format('YYYY-MM-DD')\n          let endTime = this.$dayjs(item.apply_end_time * 1000).format('YYYY-MM-DD')\n          let formatObj = {\n            tagStr: item.tag_ids_arr\n              .map((tagItem) => {\n                return tagItem.tag_id_str\n              })\n              .toString(),\n            startTime: startTime,\n            endTime: endTime,\n          }\n          return {\n            ...formatObj,\n            ...item,\n          }\n        })\n        // this.dataList = dealData\n        this.$refs.pagingRef?.complete(dealData)\n        uni.hideLoading()\n      }\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.sticky {\n  top: -1px !important;\n  background-color: #fff;\n}\n.top-box {\n  background: #fff;\n  position: sticky;\n  top: -1px;\n  z-index: 100;\n}\n.header-top {\n  // position: absolute;\n  // top: 0;\n  // left: 0;\n  display: block;\n  width: 100%;\n  height: 338rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages/tabbar/train/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["shareMixins","uni"],"mappings":"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"}