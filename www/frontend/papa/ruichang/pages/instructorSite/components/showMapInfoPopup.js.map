{"version":3,"file":"showMapInfoPopup.js","sources":["../../../../../../src/pages/instructorSite/components/showMapInfoPopup.vue","../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXMvaW5zdHJ1Y3RvclNpdGUvY29tcG9uZW50cy9zaG93TWFwSW5mb1BvcHVwLnZ1ZQ"],"sourcesContent":["<template>\n  <view>\n    <uv-popup ref=\"popup\" @change=\"change\" round=\"16\">\n      <view class=\"popup-box\">\n        <view class=\"line-box\">\n          <view class=\"line\" @click=\"close\"></view>\n        </view>\n        <instructorSiteItem\n          :info=\"mapInfo\"\n          :page-show-quit=\"false\"\n          :show-join=\"false\"\n        ></instructorSiteItem>\n        <view class=\"bottom-box\">\n          <view class=\"left\">\n            <image\n              :src=\"isCollect ? '/static/images/star-fill.png' : '/static/images/star.png'\"\n              class=\"favorite-icon\"\n              @click.stop=\"handleCollect\"\n            />\n            <text class=\"text\">{{ isCollect ? '已收藏' : '收藏' }}</text>\n          </view>\n          <view class=\"right\">\n            <button class=\"button\" @click=\"openMap\">去这里</button>\n          </view>\n        </view>\n      </view>\n    </uv-popup>\n  </view>\n</template>\n\n<script>\nimport instructorSiteItem from '@/components/InstructorSiteItem/index.vue'\nimport { debounce } from '@/utils/buttonClick'\nexport default {\n  components: {\n    instructorSiteItem,\n  },\n  props: {\n    mapInfo: {\n      type: Object,\n      default: () => {\n        return {}\n      },\n    },\n  },\n  data() {\n    return {\n      isCollect: false,\n    }\n  },\n  computed: {\n    showInfo() {\n      return this.mapInfo || {}\n    },\n  },\n  methods: {\n    change(e) {\n      // console.log(\"弹窗状态改变：\", e);\n    },\n    open() {\n      this.checkIfFavorited()\n      this.$refs.popup.open('bottom')\n    },\n    openMap() {\n      if (!this.mapInfo.lat || !this.mapInfo.lng) {\n        uni.showToast({\n          title: '站点暂未设置坐标',\n          icon: 'none',\n        })\n      }\n      uni.openLocation({\n        latitude: this.mapInfo.lat ? Number(this.mapInfo.lat) : 0,\n        longitude: this.mapInfo.lng ? Number(this.mapInfo.lng) : 0,\n        name: this.mapInfo.address,\n        address: this.mapInfo.address,\n      })\n    },\n\n    handleCollect: debounce(async function () {\n      try {\n        let flag = await getApp().judgeIsAuth()\n        if (!flag) {\n          return\n        }\n        const res = await this.$api.instructorSiteBehavior({\n          instructor_site_id: this.mapInfo.instructor_site_id,\n          cancel: this.isCollect ? 2 : 1,\n        })\n        if (res.code === 200) {\n          this.isCollect = !this.isCollect\n          uni.showToast({\n            title: this.isCollect ? '收藏成功' : '已取消收藏',\n            icon: 'none',\n          })\n        }\n      } catch (error) {\n        console.error('收藏操作失败:', error)\n      }\n    }, 500),\n    async checkIfFavorited() {\n      let res = await this.$api.getInstructorSiteDetail({\n        instructor_site_id: this.mapInfo.instructor_site_id,\n      })\n      if (res.code == 200) {\n        this.isCollect = res.data.is_love == 1\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.popup-box {\n  .line-box {\n    height: 88rpx;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .line {\n    width: 94rpx;\n    height: 6rpx;\n    border-radius: 6rpx;\n    background: rgba(100, 101, 102, 1);\n  }\n\n  .bottom-box {\n    height: 100rpx;\n    margin-top: 48rpx;\n    padding: 0 32rpx;\n    box-sizing: border-box;\n    border-top: 1rpx solid #ebeef0;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .left {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      min-width: 80rpx;\n\n      .favorite-icon {\n        width: 40rpx;\n        height: 40rpx;\n        margin-bottom: 8rpx;\n      }\n\n      .text {\n        font-size: 20rpx;\n        font-weight: 400;\n        line-height: 28rpx;\n        color: rgba(150, 151, 153, 1);\n        text-align: center;\n        vertical-align: top;\n        margin-top: 4rpx;\n      }\n    }\n\n    .right {\n      flex: 1;\n      padding-left: 32rpx;\n    }\n\n    .button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 28rpx;\n      color: #fff;\n      width: 100%;\n      height: 80rpx;\n      opacity: 1;\n      border-radius: 80rpx;\n      border: none;\n      background-color: $hubei-primary;\n    }\n\n    button::after {\n      border: none;\n    }\n  }\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages/instructorSite/components/showMapInfoPopup.vue'\nwx.createComponent(Component)"],"names":["uni","debounce"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA+BA,2BAA2B,MAAW;AAEtC,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS,MAAM;AACb,eAAO,CAAA;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA,IACb;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,WAAW;AACT,aAAO,KAAK,WAAW,CAAA;AAAA,IACxB;AAAA,EACF;AAAA,EACD,SAAS;AAAA,IACP,OAAO,GAAG;AAAA,IAET;AAAA,IACD,OAAO;AACL,WAAK,iBAAgB;AACrB,WAAK,MAAM,MAAM,KAAK,QAAQ;AAAA,IAC/B;AAAA,IACD,UAAU;AACR,UAAI,CAAC,KAAK,QAAQ,OAAO,CAAC,KAAK,QAAQ,KAAK;AAC1CA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAA;AAAA,MACH;AACAA,oBAAAA,MAAI,aAAa;AAAA,QACf,UAAU,KAAK,QAAQ,MAAM,OAAO,KAAK,QAAQ,GAAG,IAAI;AAAA,QACxD,WAAW,KAAK,QAAQ,MAAM,OAAO,KAAK,QAAQ,GAAG,IAAI;AAAA,QACzD,MAAM,KAAK,QAAQ;AAAA,QACnB,SAAS,KAAK,QAAQ;AAAA,MACvB,CAAA;AAAA,IACF;AAAA,IAED,eAAeC,kBAAQ,SAAC,WAAkB;AAAA;AACxC,YAAI;AACF,cAAI,OAAO,MAAM,OAAM,EAAG,YAAW;AACrC,cAAI,CAAC,MAAM;AACT;AAAA,UACF;AACA,gBAAM,MAAM,MAAM,KAAK,KAAK,uBAAuB;AAAA,YACjD,oBAAoB,KAAK,QAAQ;AAAA,YACjC,QAAQ,KAAK,YAAY,IAAI;AAAA,UAC9B,CAAA;AACD,cAAI,IAAI,SAAS,KAAK;AACpB,iBAAK,YAAY,CAAC,KAAK;AACvBD,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,KAAK,YAAY,SAAS;AAAA,cACjC,MAAM;AAAA,YACP,CAAA;AAAA,UACH;AAAA,QACA,SAAO,OAAO;AACd,kBAAQ,MAAM,WAAW,KAAK;AAAA,QAChC;AAAA,MACD;AAAA,OAAE,GAAG;AAAA,IACA,mBAAmB;AAAA;AACvB,YAAI,MAAM,MAAM,KAAK,KAAK,wBAAwB;AAAA,UAChD,oBAAoB,KAAK,QAAQ;AAAA,QAClC,CAAA;AACD,YAAI,IAAI,QAAQ,KAAK;AACnB,eAAK,YAAY,IAAI,KAAK,WAAW;AAAA,QACvC;AAAA,MACD;AAAA;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3GA,GAAG,gBAAgB,SAAS;"}