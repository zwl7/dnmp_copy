{"version":3,"file":"SiteInstructors.js","sources":["../../../../../../src/pages-sub/instructorSite/components/SiteInstructors.vue","../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXMtc3ViL2luc3RydWN0b3JTaXRlL2NvbXBvbmVudHMvU2l0ZUluc3RydWN0b3JzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"site-instructors\">\n    <view class=\"flex justify-between items-center out-box\">\n      <view class=\"des-content-title\">站点指导员</view>\n      <view>\n        <uv-button size=\"small\" plain shape=\"circle\" type=\"primary\" @click=\"joinInstructorSite\">\n          <uv-icon name=\"plus\" size=\"14\" :color=\"activitedColor\"></uv-icon>\n          <text>加入站点</text>\n        </uv-button>\n      </view>\n    </view>\n    <view v-if=\"list.length\" class=\"instructor-list\">\n      <view v-for=\"(item, index) in list\" :key=\"index\" class=\"instructor-item\">\n        <InstructorItem :info=\"item\" />\n      </view>\n    </view>\n    <view v-else class=\"empty-tip\">\n      <empty />\n    </view>\n  </view>\n</template>\n\n<script>\nimport InstructorItem from '@/components/InstructorItem/index.vue'\nimport { getSiteinstructorList } from '@/api/instructorSite/index'\nexport default {\n  name: 'SiteInstructors',\n  components: {\n    InstructorItem,\n  },\n  props: {\n    siteId: {\n      type: String,\n      required: true,\n    },\n    join_status: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      list: [],\n      defaultAvatar: '/static/images/default-avatar.png',\n    }\n  },\n  computed: {\n    themeConfig() {\n      return this.$store.app.themeConfig\n    },\n    activitedColor() {\n      return this.$store.app.themeConfig['hubei-primary']\n    },\n    isJoin() {\n      return this.join_status === 1\n    },\n  },\n  created() {\n    this.getInstructorList()\n  },\n  methods: {\n    async getInstructorList() {\n      try {\n        const res = await getSiteinstructorList({\n          instructor_site_id: this.siteId,\n          page: 1,\n          size: 999,\n        })\n        if (res.code != 200) {\n          this.$toast(res.message)\n          return\n        }\n        res.data.list.map((e) => {\n          e.total_service_num = e.voluntary_num\n          e.total_service_duration = e.voluntary_activity_duration\n        })\n        this.list = res.data.list\n      } catch (error) {\n        console.error('获取指导员列表失败:', error)\n      }\n    },\n    async joinInstructorSite() {\n      let flag = await getApp().judgeIsAuth({ needReal: true })\n      console.log(flag)\n      if (!flag) {\n        return\n      }\n      uni.showModal({\n        title: '提示',\n        content: '加入站点后可在站点指导员列表中显示个人信息，您确定加入站点吗？',\n        success: (res) => {\n          if (res.confirm) {\n            this.joinInstructorSiteApi()\n          }\n        },\n      })\n    },\n    async joinInstructorSiteApi() {\n      let res = await this.$api.joinOrQuitInstructorSite({\n        instructor_site_id: this.siteId,\n        cancel: this.isJoin ? 2 : 1,\n      })\n      if (res.code !== 200) {\n        this.$toast(res.message)\n        return\n      }\n      this.$toast('加入站点成功')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.site-instructors {\n  padding: 20rpx 0;\n\n  .instructor-list {\n    padding: 0 22rpx;\n    .instructor-item {\n      width: 100%;\n      margin-top: 32rpx;\n    }\n  }\n}\n\n.des-content-title {\n  font-size: 30rpx;\n  color: $hubei-text-color-primary;\n  font-weight: 600;\n  line-height: 1;\n}\n.out-box {\n  padding: 0 22rpx;\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages-sub/instructorSite/components/SiteInstructors.vue'\nwx.createComponent(Component)"],"names":["getSiteinstructorList","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,MAAO,iBAAgB,MAAW;AAElC,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,QAAQ;AAAA,MACN,MAAM;AAAA,MACN,UAAU;AAAA,IACX;AAAA,IACD,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACF;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,MAAM,CAAE;AAAA,MACR,eAAe;AAAA,IACjB;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,cAAc;AACZ,aAAO,KAAK,OAAO,IAAI;AAAA,IACxB;AAAA,IACD,iBAAiB;AACf,aAAO,KAAK,OAAO,IAAI,YAAY,eAAe;AAAA,IACnD;AAAA,IACD,SAAS;AACP,aAAO,KAAK,gBAAgB;AAAA,IAC7B;AAAA,EACF;AAAA,EACD,UAAU;AACR,SAAK,kBAAiB;AAAA,EACvB;AAAA,EACD,SAAS;AAAA,IACD,oBAAoB;AAAA;AACxB,YAAI;AACF,gBAAM,MAAM,MAAMA,+CAAsB;AAAA,YACtC,oBAAoB,KAAK;AAAA,YACzB,MAAM;AAAA,YACN,MAAM;AAAA,UACP,CAAA;AACD,cAAI,IAAI,QAAQ,KAAK;AACnB,iBAAK,OAAO,IAAI,OAAO;AACvB;AAAA,UACF;AACA,cAAI,KAAK,KAAK,IAAI,CAAC,MAAM;AACvB,cAAE,oBAAoB,EAAE;AACxB,cAAE,yBAAyB,EAAE;AAAA,UAC9B,CAAA;AACD,eAAK,OAAO,IAAI,KAAK;AAAA,QACrB,SAAO,OAAO;AACd,kBAAQ,MAAM,cAAc,KAAK;AAAA,QACnC;AAAA,MACD;AAAA;AAAA,IACK,qBAAqB;AAAA;AACzB,YAAI,OAAO,MAAM,OAAM,EAAG,YAAY,EAAE,UAAU,KAAM,CAAA;AACxD,gBAAQ,IAAI,IAAI;AAChB,YAAI,CAAC,MAAM;AACT;AAAA,QACF;AACAC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,SAAS;AAAA,UACT,SAAS,CAAC,QAAQ;AAChB,gBAAI,IAAI,SAAS;AACf,mBAAK,sBAAqB;AAAA,YAC5B;AAAA,UACD;AAAA,QACF,CAAA;AAAA,MACF;AAAA;AAAA,IACK,wBAAwB;AAAA;AAC5B,YAAI,MAAM,MAAM,KAAK,KAAK,yBAAyB;AAAA,UACjD,oBAAoB,KAAK;AAAA,UACzB,QAAQ,KAAK,SAAS,IAAI;AAAA,QAC3B,CAAA;AACD,YAAI,IAAI,SAAS,KAAK;AACpB,eAAK,OAAO,IAAI,OAAO;AACvB;AAAA,QACF;AACA,aAAK,OAAO,QAAQ;AAAA,MACrB;AAAA;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5GA,GAAG,gBAAgB,SAAS;"}