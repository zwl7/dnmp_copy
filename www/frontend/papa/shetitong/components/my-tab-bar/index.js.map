{"version":3,"file":"index.js","sources":["../../../../../src/components/my-tab-bar/index.vue","../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvY29tcG9uZW50cy9teS10YWItYmFyL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"tabbar-container\">\n    <view\n      v-for=\"(item, index) in list\"\n      :key=\"item.text\"\n      class=\"tabbar-item\"\n      @click=\"handleChangBar(index)\"\n    >\n      <view class=\"tabbar-item-box\">\n        <view class=\"tabbar-item-box\" v-if=\"index != 2\">\n          <uv-icon\n            :name=\"current === index ? item.selectedIconPath : item.iconPath\"\n            color=\"#000\"\n            :size=\"22\"\n          ></uv-icon>\n\n          <text :class=\"['text', current === index ? 'active' : '']\">\n            {{ item.text }}\n          </text>\n        </view>\n\n        <view class=\"middle-btn\" v-else>\n          <uv-icon\n            :name=\"current === index ? item.selectedIconPath : item.iconPath\"\n            color=\"#000\"\n            :size=\"47\"\n          ></uv-icon>\n          <text :class=\"['text', current === index ? 'active' : '']\">\n            {{ item.text }}\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport store from '@/store/index'\nimport { useDialog, useToast } from '@/utils/modals'\nimport { useAssets } from '@/utils/assets/local'\nimport center from '@/static/tabbar/center.png'\nimport center2 from '@/static/tabbar/center2.png'\nexport default {\n  name: 'MyTabBar',\n  props: {},\n  data() {\n    return {\n      current: 0,\n      list: [\n        {\n          pagePath: '/pages/tabbar/home/index',\n          iconPath: this.getIconByTheme().index.iconPath,\n          selectedIconPath: this.getIconByTheme().index.selectedIconPath,\n          text: '首页',\n        },\n        {\n          pagePath: '/pages/tabbar/train/index',\n          iconPath: this.getIconByTheme().train.iconPath,\n          selectedIconPath: this.getIconByTheme().train.selectedIconPath,\n          text: '培训',\n        },\n        {\n          pagePath: '',\n          iconPath: this.getIconByTheme().center.iconPath,\n          selectedIconPath: this.getIconByTheme().center.selectedIconPath,\n          text: '服务发布',\n          midButton: true,\n        },\n        {\n          pagePath: '/pages/tabbar/commonPage/index',\n          iconPath: this.getIconByTheme().common.iconPath,\n          selectedIconPath: this.getIconByTheme().common.selectedIconPath,\n          text: this.getTitle(),\n        },\n        {\n          pagePath: '/pages/tabbar/personal/index',\n          iconPath: this.getIconByTheme().mine.iconPath,\n          selectedIconPath: this.getIconByTheme().mine.selectedIconPath,\n          text: '我的',\n        },\n      ],\n    }\n  },\n\n  created(options) {\n    // 解决原生 tabBar 未隐藏导致有2个 tabBar 的问题\n    // #ifdef APP-PLUS | H5\n    // uni.hideTabBar({\n    //   fail(err) {\n    //     console.log('hideTabBar fail: ', err)\n    //   },\n    //   success(res) {\n    //     console.log('hideTabBar success: ', res)\n    //   },\n    // })\n    // #endif\n  },\n\n  methods: {\n    getIconByTheme() {\n      let obj = {\n        index: {\n          iconPath: useAssets('tabbar/blue_index.png'),\n          selectedIconPath: useAssets('tabbar/blue_index_select.png'),\n        },\n        train: {\n          iconPath: useAssets('tabbar/blue_train.png'),\n          selectedIconPath: useAssets('tabbar/blue_train_select.png'),\n        },\n        common: {\n          iconPath: useAssets('tabbar/blue_instruct.png'),\n          selectedIconPath: useAssets('tabbar/blue_instruct_select.png'),\n        },\n        mine: {\n          iconPath: useAssets('tabbar/blue_mine.png'),\n          selectedIconPath: useAssets('tabbar/blue_mine_select.png'),\n        },\n        center: {\n          iconPath: center,\n          selectedIconPath: center,\n        },\n      }\n\n      if (store.useAppStore().themeType == '2') {\n        obj = {\n          index: {\n            iconPath: this.getTabbarIcon('tabbar-home'),\n            selectedIconPath: this.getTabbarIcon('tabbar-home-select'),\n          },\n          train: {\n            iconPath: this.getTabbarIcon('tabbar-train'),\n            selectedIconPath: this.getTabbarIcon('tabbar-train-select'),\n          },\n          common: {\n            iconPath: this.getTabbarIcon('tabbar-zd'),\n            selectedIconPath: this.getTabbarIcon('tabbar-zd-select'),\n          },\n          mine: {\n            iconPath: this.getTabbarIcon('tabbar-mine'),\n            selectedIconPath: this.getTabbarIcon('tabbar-mine-select'),\n          },\n          center: {\n            iconPath: center2,\n            selectedIconPath: center2,\n          },\n        }\n      }\n      return obj\n    },\n    getTitle() {\n      return store.useAppStore().themeType == '1' ? '指导员' : '站点'\n    },\n    getTabbarIcon(icon) {\n      return `https://cdn-static.papa.com.cn/social/${icon}.png`\n    },\n    setCurrent() {\n      const currentRoute = getCurrentPages()[getCurrentPages().length - 1].route\n      const active = this.list.findIndex((i) => i.pagePath.indexOf(currentRoute) !== -1)\n      this.current = active\n    },\n    handleChangBar(e) {\n      if (!this.list[e].pagePath) {\n        const userStore = store.useUserStore()\n        if (!userStore.isLogin) {\n          uni.redirectTo({ url: '/pages/login/index' })\n          return\n        }\n        const is_auth_instructor = Number(userStore.userInfo.is_auth_instructor)\n        if (is_auth_instructor == 0) {\n          useDialog('发布志愿服务活动需认证为社体指导员', {\n            showCancelButton: true,\n            confirmText: '去认证',\n          })\n            .then(() => {\n              uni.navigateTo({ url: '/pages-sub/realname/index' })\n            })\n            .catch(() => {})\n          return\n        }\n        uni.navigateTo({ url: '/pages-sub/releaseDynamic/index' })\n        return\n      }\n      if (this.current == e) return\n      this.setCurrent()\n      uni.switchTab({\n        url: this.list[e].pagePath,\n      })\n    },\n  },\n  mounted() {\n    this.setCurrent()\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.tabbar-container {\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: space-between;\n  text-align: center;\n  background-color: #fff;\n  box-shadow: 0 2px 10px rgb(49 158 255 / 20%);\n  z-index: 10;\n  padding-bottom: 24rpx;\n\n  .tabbar-item {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 20rpx 0 0;\n    font-size: 20rpx;\n    flex: 1;\n    line-height: 1.5;\n    color: #909399;\n\n    .text {\n      padding-top: 8rpx;\n\n      &.active {\n        color: #253858;\n      }\n    }\n  }\n  .tabbar-item-box {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n  }\n\n  .mid {\n    position: relative;\n    top: -50%;\n    padding: 26rpx 26rpx 0;\n    background-color: #fff;\n    border-top-left-radius: 100%;\n    border-top-right-radius: 100%;\n  }\n  .middle-btn {\n    position: absolute;\n    width: 94rpx;\n    height: 94rpx;\n    top: 50%;\n    left: -50%;\n    transform: translate(-50%, -50%);\n    padding: 26rpx 26rpx 12rpx;\n    background-color: #fff;\n    border-top-left-radius: 100%;\n    border-top-right-radius: 100%;\n  }\n}\n\n.modal-btn {\n  display: flex;\n  align-items: center;\n\n  .m-btn {\n    height: 36px;\n    color: #303133;\n    border-radius: 100px;\n    flex: 1;\n\n    &:last-child {\n      margin-left: 15px;\n    }\n  }\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/components/my-tab-bar/index.vue'\nwx.createComponent(Component)"],"names":["useAssets","center","store","center2","uni","useDialog"],"mappings":"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"}