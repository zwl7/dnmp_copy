{"version":3,"file":"mapTouch.js","sources":["../../../../src/components/mapTouch.vue","../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvY29tcG9uZW50cy9tYXBUb3VjaC52dWU"],"sourcesContent":["<template>\n  <movable-area class=\"movableArea\" :style=\"{ height: windowHeight + 'px' }\">\n    <movable-view\n      id=\"id\"\n      class=\"movableView\"\n      direction=\"all\"\n      @change=\"movechange\"\n      :y=\"seletHeight\"\n      :disabled=\"disabled\"\n      :style=\"{ height: windowHeightIn + 'px' }\"\n    >\n      <!-- 头部插槽 -->\n      <view @touchstart=\"touchstart\" @touchend=\"touchend\">\n        <slot name=\"header\"></slot>\n      </view>\n      <scroll-view\n        scroll-top=\"0\"\n        scroll-y=\"true\"\n        class=\"scroll-Y\"\n        :style=\"{ paddingBottom: seletHeight + 'px' }\"\n        @catchm=\"handleTouchMove\"\n      >\n        <!-- 内容插槽 -->\n        <slot name=\"body\"></slot>\n      </scroll-view>\n    </movable-view>\n  </movable-area>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      serchText: '',\n      initSeletHeight: 0,\n      seletHeight: 700,\n      Height: 600,\n      windowHeight: '', //外层活动框高度\n      windowHeightIn: '', //内层层活动框高度\n      disabled: true,\n    }\n  },\n  created(options) {\n    setTimeout((res) => {\n      uni.getSystemInfo({\n        success: (res) => {\n          this.windowHeight = res.windowHeight * 2\n          this.windowHeightIn = res.windowHeight\n          this.seletHeight = res.windowHeight - 140\n          this.initSeletHeight = res.windowHeight - 140\n\n          console.log({\n            windowHeight: this.windowHeight,\n            windowHeightIn: this.windowHeightIn,\n            seletHeight: this.seletHeight,\n            initSeletHeight: this.initSeletHeight,\n          })\n        },\n      })\n    }, 50)\n  },\n  methods: {\n    // 手指松开事件\n    touchend(e) {\n      const query = uni.createSelectorQuery().in(this)\n      query\n        .select('#id')\n        .boundingClientRect((data) => {\n          let topHeight = data.top.toFixed(1) * 1\n          let seletHeightCopy = this.seletHeight\n          if (this.seletHeight <= this.Height) {\n            if (topHeight > 50) {\n              if (topHeight > 50 && topHeight < 300) {\n                seletHeightCopy = 300\n              } else {\n                seletHeightCopy = this.initSeletHeight\n              }\n            } else {\n              seletHeightCopy = this.initSeletHeight\n            }\n          } else {\n            if (topHeight < 300) {\n              seletHeightCopy = 0\n            } else {\n              seletHeightCopy = 300\n            }\n          }\n          console.log(seletHeightCopy)\n          this.seletHeight = seletHeightCopy\n          this.disabled = true\n        })\n        .exec()\n    },\n    // 拖动触发\n    movechange(e) {\n      this.Height = e.detail.y\n    },\n    touchstart(e) {\n      this.disabled = false\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\npage {\n  background: #f6f6f6;\n}\n.scroll-Y {\n  height: calc(100% - 150rpx);\n  box-sizing: border-box;\n}\n.movableArea {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 190vh;\n  pointer-events: none; //设置area元素不可点击，则事件便会下移至页面下层元素\n}\n\n.movableView {\n  width: 100vw;\n  height: 100vh;\n  background: #fff;\n  pointer-events: auto; //可以点击\n  border-radius: 40rpx 40rpx 0 0;\n}\n\n.content {\n  display: block;\n  line-height: 1.2;\n  overflow: hidden;\n  white-space: nowrap;\n  pointer-events: auto;\n  position: fixed;\n  z-index: 999;\n  bottom: 0;\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/components/mapTouch.vue'\nwx.createComponent(Component)"],"names":["uni","res"],"mappings":";;AA8BA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,aAAa;AAAA,MACb,QAAQ;AAAA,MACR,cAAc;AAAA;AAAA,MACd,gBAAgB;AAAA;AAAA,MAChB,UAAU;AAAA,IACZ;AAAA,EACD;AAAA,EACD,QAAQ,SAAS;AACf,eAAW,CAAC,QAAQ;AAClBA,oBAAAA,MAAI,cAAc;AAAA,QAChB,SAAS,CAACC,SAAQ;AAChB,eAAK,eAAeA,KAAI,eAAe;AACvC,eAAK,iBAAiBA,KAAI;AAC1B,eAAK,cAAcA,KAAI,eAAe;AACtC,eAAK,kBAAkBA,KAAI,eAAe;AAE1C,kBAAQ,IAAI;AAAA,YACV,cAAc,KAAK;AAAA,YACnB,gBAAgB,KAAK;AAAA,YACrB,aAAa,KAAK;AAAA,YAClB,iBAAiB,KAAK;AAAA,UACvB,CAAA;AAAA,QACF;AAAA,MACF,CAAA;AAAA,OACA,EAAE;AAAA,EACN;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,SAAS,GAAG;AACV,YAAM,QAAQD,cAAG,MAAC,oBAAqB,EAAC,GAAG,IAAI;AAC/C,YACG,OAAO,KAAK,EACZ,mBAAmB,CAAC,SAAS;AAC5B,YAAI,YAAY,KAAK,IAAI,QAAQ,CAAC,IAAI;AACtC,YAAI,kBAAkB,KAAK;AAC3B,YAAI,KAAK,eAAe,KAAK,QAAQ;AACnC,cAAI,YAAY,IAAI;AAClB,gBAAI,YAAY,MAAM,YAAY,KAAK;AACrC,gCAAkB;AAAA,mBACb;AACL,gCAAkB,KAAK;AAAA,YACzB;AAAA,iBACK;AACL,8BAAkB,KAAK;AAAA,UACzB;AAAA,eACK;AACL,cAAI,YAAY,KAAK;AACnB,8BAAkB;AAAA,iBACb;AACL,8BAAkB;AAAA,UACpB;AAAA,QACF;AACA,gBAAQ,IAAI,eAAe;AAC3B,aAAK,cAAc;AACnB,aAAK,WAAW;AAAA,MACjB,CAAA,EACA,KAAI;AAAA,IACR;AAAA;AAAA,IAED,WAAW,GAAG;AACZ,WAAK,SAAS,EAAE,OAAO;AAAA,IACxB;AAAA,IACD,WAAW,GAAG;AACZ,WAAK,WAAW;AAAA,IACjB;AAAA,EACF;AACH;;;;;;;;;;;;;;;ACpGA,GAAG,gBAAgB,SAAS;"}