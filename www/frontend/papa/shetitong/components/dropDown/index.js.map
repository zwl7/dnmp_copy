{"version":3,"file":"index.js","sources":["../../../../../src/components/dropDown/index.vue","../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvY29tcG9uZW50cy9kcm9wRG93bi9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view style=\"position: relative; max-height: 50vh\">\n    <uv-drop-down\n      ref=\"dropDown\"\n      :sign=\"sign\"\n      :extra-icon=\"{ name: 'down', color: '#CDD0D6', size: '16rpx' }\"\n      :extra-active-icon=\"{ name: 'up', color: activitedColor, size: '16rpx' }\"\n      :textActiveColor=\"activitedColor\"\n      :defaultValue=\"defaultValue\"\n      @click=\"selectMenu\"\n      :custom-style=\"customStyle\"\n      text-size=\"27rpx\"\n      textActiveSize=\"27rpx\"\n      text-color=\"#606266\"\n    >\n      <uv-drop-down-item\n        v-for=\"(item, index) in options\"\n        :key=\"index\"\n        :name=\"index\"\n        type=\"2\"\n        :sleep=\"sleep\"\n        :label=\"dropItem(index).label\"\n        :value=\"dropItem(index).value\"\n        :ref=\"index\"\n      ></uv-drop-down-item>\n    </uv-drop-down>\n    <uv-drop-down-popup\n      ref=\"dropDownPopup\"\n      :sign=\"sign\"\n      :click-overlay-on-close=\"true\"\n      :currentDropItem=\"currentDropItem\"\n      @clickItem=\"clickItem\"\n      @popupChange=\"change\"\n      :use-slot=\"currentDropItem ? currentDropItem.useSlot : false\"\n    >\n      <slot></slot>\n    </uv-drop-down-popup>\n  </view>\n</template>\n<script>\nimport uvDropDown from './my-drop-down/uv-drop-down/uv-drop-down'\nimport uvDropDownItem from './my-drop-down/uv-drop-down-item/uv-drop-down-item'\nimport uvDropDownPopup from './my-drop-down/uv-drop-down-popup/uv-drop-down-popup'\nexport default {\n  name: 'dropDown',\n  components: {\n    uvDropDown,\n    uvDropDownItem,\n    uvDropDownPopup,\n  },\n  props: {\n    options: {\n      type: Object,\n      default: () => {\n        return {\n          order: {\n            label: '综合排序',\n            value: 'all',\n            activeIndex: 0,\n            child: [],\n          },\n          type: {\n            label: '文档格式',\n            value: 'all',\n            activeIndex: 0,\n            child: [\n              {\n                label: '全部',\n                value: 'all',\n              },\n              {\n                label: 'PDF',\n                value: 'pdf',\n              },\n              {\n                label: 'WROD',\n                value: 'word',\n              },\n              {\n                label: 'PPT',\n                value: 'ppt',\n              },\n            ],\n          },\n        }\n      },\n    },\n    customStyle: {\n      type: Object,\n      default: () => {\n        return {\n          boxShadow: '0px 12px 12px  rgba(44, 101, 158, 0.08)',\n        }\n      },\n    },\n    sign: {\n      type: String,\n      default: 'dropDown_1',\n    },\n    resultArray: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n    // 是否延迟弹出  主要针对首页这种 下拉框在中间的情形\n    sleep: {\n      type: Number,\n      default: 0,\n    },\n  },\n  watch: {\n    options: {\n      deep: true,\n      immediate: true,\n      handler: function (newval, oldval) {\n        if (newval) {\n          let keys = Object.keys(newval)\n          let defaultValue = []\n          for (let var1 in newval) {\n            if (newval[var1].child.length > 0) {\n              defaultValue.push(newval[var1].child[0].value)\n            }\n          }\n          keys.map((c) => {\n            if (this.$refs[c]) {\n              this.$refs[c][0].init()\n            }\n          })\n          this.defaultValue = defaultValue\n        }\n      },\n    },\n  },\n  computed: {\n    dropItem(name) {\n      return (name) => {\n        const result = {}\n        if (this.resultArray.length > 0) {\n          this.result = this.resultArray\n        }\n        const find = this.result.find((item) => item.name === name)\n        if (find) {\n          result.label = find.label\n          result.value = find.value\n        } else {\n          result.label = this.options[name].label\n          result.value = this.options[name].value\n        }\n        return result\n      }\n    },\n    currentDropItem() {\n      return {\n        ...this.options[this.activeName],\n        activeColor: this.activitedColor,\n      }\n    },\n    themeConfig() {\n      return this.$store.app.themeConfig\n    },\n    activitedColor() {\n      return this.$store.app.themeConfig['hubei-primary']\n    },\n  },\n  data() {\n    return {\n      useSlot: false,\n      defaultValue: [],\n      result: [],\n      activeName: '',\n    }\n  },\n  methods: {\n    close() {\n      this.$refs['dropDownPopup'].close()\n    },\n    init() {\n      this.$refs.dropDown.init()\n    },\n    change(e) {\n      this.$emit('popupChange', e)\n    },\n    selectMenu(e) {\n      const { name, active, type } = e\n      this.activeName = name\n      this.init()\n      this.$emit('open', e)\n      const find = this.result.find((item) => item.name == this.activeName)\n      if (find) {\n        const findIndex = this.options[this.activeName].child.findIndex(\n          (item) => item.label == find.label && item.value == find.value,\n        )\n        this.options[this.activeName].activeIndex = findIndex\n      } else {\n        this.options[this.activeName].activeIndex = 0\n      }\n    },\n    clickItem(e) {\n      let { label, value } = e\n      const findIndex = this.result.findIndex((item) => item.name == this.activeName)\n      if (this.defaultValue.indexOf(value) > -1 && this.options[this.activeName].label) {\n        label = this.options[this.activeName].label\n      }\n      // 已经存在筛选项\n      if (findIndex > -1) {\n        this.$set(this.result, findIndex, {\n          name: this.activeName,\n          label,\n          value,\n        })\n      } else {\n        this.result.push({\n          name: this.activeName,\n          label,\n          value,\n        })\n      }\n      // this.result = this.result.filter(item => this.defaultValue.indexOf(item.value) == -1);\n      this.$emit('change', this.result)\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .uv-drop-down-item data-v-b6164b16 {\n  margin-right: 2rpx;\n  padding: 0 18rpx;\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/components/dropDown/index.vue'\nwx.createComponent(Component)"],"names":["name"],"mappings":"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"}