{"version":3,"file":"uv-drop-down.js","sources":["../../../../../../../src/components/dropDown/my-drop-down/uv-drop-down/uv-drop-down.vue","../../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvY29tcG9uZW50cy9kcm9wRG93bi9teS1kcm9wLWRvd24vdXYtZHJvcC1kb3duL3V2LWRyb3AtZG93bi52dWU"],"sourcesContent":["<template>\r\n  <uv-sticky :disabled=\"!isSticky\">\r\n    <view ref=\"dropDownRef\" class=\"uv-drop-down\" :style=\"[$uv.addStyle(customStyle)]\">\r\n      <slot></slot>\r\n    </view>\r\n  </uv-sticky>\r\n</template>\r\n<script>\r\nimport mpMixin from '@climblee/uv-ui/libs/mixin/mpMixin.js'\r\nimport mixin from '@climblee/uv-ui/libs/mixin/mixin.js'\r\n// #ifdef APP-NVUE\r\nconst dom = uni.requireNativePlugin('dom')\r\n// #endif\r\n/**\r\n * DropDown 下拉框\r\n * @description 下拉筛选\r\n * @tutorial https://ext.dcloud.net.cn/plugin?name=uv-drop-down\r\n * @property {String | Number} sign 组件唯一标识，需要手动传\r\n * @property {Boolean} is-sticky = [true|false] 是否吸顶\r\n * @property {Array} default-value 默认值，表示参数value属于这里面的值，就说明是未选中即是默认展示的值。eg：上面示例中的{label: '全部',value: 'all'} 即是默认值。后续处理逻辑也可以根据是否是其中值进行过滤。\r\n * @property {String} textSize 每项字体大小\r\n * @property {String} textColor 每项文本颜色\r\n * @property {String} textActiveSize 每项选中状态字体大小\r\n * @property {String} textActiveColor 每项选中状态文本颜色\r\n * @property {Object} extraIcon 每项右侧图标\r\n * @property {Object} extraActiveIcon 每项选中后右侧图标\r\n */\r\nexport default {\r\n  name: 'uv-drop-down',\r\n  mixins: [mpMixin, mixin],\r\n  emits: ['click'],\r\n  props: {\r\n    isSticky: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    sign: {\r\n      type: [String, Number],\r\n      default: 'UVDROPDOWN',\r\n    },\r\n    defaultValue: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      },\r\n    },\r\n    textSize: {\r\n      type: String,\r\n      default: '28rpx',\r\n    },\r\n    textColor: {\r\n      type: String,\r\n      default: '#303133',\r\n    },\r\n    textActiveSize: {\r\n      type: String,\r\n      default: '28rpx',\r\n    },\r\n    textActiveColor: {\r\n      type: String,\r\n      default: '#3c9cff',\r\n    },\r\n    extraIcon: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          name: 'arrow-down',\r\n          size: '28rpx',\r\n          color: '#303133',\r\n        }\r\n      },\r\n    },\r\n    extraActiveIcon: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          name: 'arrow-up',\r\n          size: '28rpx',\r\n          color: '#3c9cff',\r\n        }\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    parentData() {\r\n      return [\r\n        this.defaultValue,\r\n        this.textSize,\r\n        this.textColor,\r\n        this.textActiveColor,\r\n        this.textActiveSize,\r\n        this.extraIcon,\r\n        this.extraActiveIcon,\r\n        this.sign,\r\n        this.clickHandler,\r\n      ]\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      uni.$emit(`${this.sign}_CLICKMENU`, {\r\n        show: false,\r\n      })\r\n      this.$nextTick(async () => {\r\n        const rect = await this.queryRect()\r\n        uni.$emit(`${this.sign}_GETRECT`, rect)\r\n      })\r\n    },\r\n    // 查询内容高度\r\n    queryRect() {\r\n      // #ifndef APP-NVUE\r\n      // 组件内部一般用this.$uvGetRect，对外的为getRect，二者功能一致，名称不同\r\n      return new Promise((resolve) => {\r\n        this.$uvGetRect(`.uv-drop-down`).then((size) => {\r\n          resolve(size)\r\n        })\r\n      })\r\n      // #endif\r\n      // #ifdef APP-NVUE\r\n      // nvue下，使用dom模块查询元素高度\r\n      // 返回一个promise，让调用此方法的主体能使用then回调\r\n      return new Promise((resolve) => {\r\n        dom.getComponentRect(this.$refs.dropDownRef, (res) => {\r\n          res.size.top = res.size.top <= 0 ? 0 : res.size.top\r\n          resolve(res.size)\r\n        })\r\n      })\r\n      // #endif\r\n    },\r\n    clickHandler(data) {\r\n      this.$emit('click', data)\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@import '@climblee/uv-ui/libs/css/components.scss';\r\n.uv-drop-down {\r\n  @include flex;\r\n  justify-content: space-between;\r\n  // background-color: #fff;\r\n  // border-bottom: 1px solid #ebeff4;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/components/dropDown/my-drop-down/uv-drop-down/uv-drop-down.vue'\nwx.createComponent(Component)"],"names":["mpMixin","mixin","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AA2BA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,QAAQ,CAACA,cAAO,SAAEC,mBAAK;AAAA,EACvB,OAAO,CAAC,OAAO;AAAA,EACf,OAAO;AAAA,IACL,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,MAAM;AAAA,MACJ,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACV;AAAA,IACD,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,SAAS,MAAM;AACb,eAAO,CAAC;AAAA,MACT;AAAA,IACF;AAAA,IACD,UAAU;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,gBAAgB;AAAA,MACd,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,iBAAiB;AAAA,MACf,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,WAAW;AAAA,MACT,MAAM;AAAA,MACN,UAAU;AACR,eAAO;AAAA,UACL,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACT;AAAA,MACD;AAAA,IACF;AAAA,IACD,iBAAiB;AAAA,MACf,MAAM;AAAA,MACN,UAAU;AACR,eAAO;AAAA,UACL,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACT;AAAA,MACD;AAAA,IACF;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,aAAa;AACX,aAAO;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,MACP;AAAA,IACD;AAAA,EACF;AAAA,EACD,UAAU;AACR,SAAK,KAAK;AAAA,EACX;AAAA,EACD,SAAS;AAAA,IACP,OAAO;AACLC,oBAAG,MAAC,MAAM,GAAG,KAAK,IAAI,cAAc;AAAA,QAClC,MAAM;AAAA,OACP;AACD,WAAK,UAAU,MAAY;AACzB,cAAM,OAAO,MAAM,KAAK,UAAU;AAClCA,sBAAG,MAAC,MAAM,GAAG,KAAK,IAAI,YAAY,IAAI;AAAA,QACvC;AAAA,IACF;AAAA;AAAA,IAED,YAAY;AAGV,aAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,aAAK,WAAW,eAAe,EAAE,KAAK,CAAC,SAAS;AAC9C,kBAAQ,IAAI;AAAA,SACb;AAAA,OACF;AAAA,IAYF;AAAA,IACD,aAAa,MAAM;AACjB,WAAK,MAAM,SAAS,IAAI;AAAA,IACzB;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;ACvIA,GAAG,gBAAgB,SAAS;"}