{"version":3,"file":"index.js","sources":["../../../../../src/components/InstructorSiteItem/index.vue","../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvY29tcG9uZW50cy9JbnN0cnVjdG9yU2l0ZUl0ZW0vaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"list_item_out\" @click.stop=\"toDetail\">\n    <view class=\"top\" v-if=\"showTopButton\">\n      <view class=\"title\">{{ info.name }}</view>\n      <view class=\"status\">\n        <uv-tags :text=\"showTypeIcon.text\" size=\"mini\" :type=\"showTypeIcon.type\"></uv-tags>\n      </view>\n    </view>\n    <view class=\"list_item\">\n      <view class=\"left\">\n        <image class=\"image\" :src=\"showImage\" mode=\"aspectFill\" />\n        <view class=\"left-mask uv-line-1\">{{ info.site_type_str }}</view>\n      </view>\n      <view class=\"right\">\n        <view class=\"row1\" v-if=\"!showTopButton\">\n          <view class=\"title\">{{ info.name }}</view>\n        </view>\n        <view class=\"row2\">\n          <view\n            class=\"sport_item\"\n            v-for=\"(sport_item, sindex) in tagList.slice(0, 5)\"\n            :key=\"sindex\"\n          >\n            {{ sport_item }}\n          </view>\n          <view v-if=\"tagList.length > 5\" class=\"sport_item\">...</view>\n        </view>\n        <view class=\"row3\">\n          <uv-icon name=\"map\" color=\"#A5ADBA\" size=\"16\"></uv-icon>\n          <text class=\"uv-line-1\">\n            {{ info.detail_address ? info.detail_address : '暂无地址' }}\n          </text>\n        </view>\n        <view class=\"row4\" v-if=\"showQuit\">\n          <view @click.stop=\"handleQuit\">\n            <uv-button type=\"info\" plain shape=\"circle\" size=\"mini\">取消加入</uv-button>\n          </view>\n        </view>\n        <view class=\"row4\" v-if=\"showJoinBtn\" @click.stop=\"handleJoinSite\">\n          <view>\n            <uv-button type=\"primary\" shape=\"circle\" size=\"mini\">加入站点</uv-button>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport defaultAvatar from '@/static/images/avatar.png'\nimport LevelIcon from '@/components/LevelIcon/index.vue'\nimport { joinOrQuitInstructorSite } from '@/api/instructorSite/index'\nexport default {\n  name: 'InstructorSiteItem',\n  components: {\n    LevelIcon,\n  },\n  emits: ['reserve', 'click'],\n  props: {\n    info: {\n      type: Object,\n      default: () => {\n        return {}\n      },\n    },\n    showType: {\n      type: String,\n      default: 'normal', // normal 正常  check 我的\n    },\n    pageShowQuit: {\n      type: Boolean,\n      default: true,\n    },\n    showJoin: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data() {\n    return {}\n  },\n  computed: {\n    showTypeIcon() {\n      // 1是待审核，2是审核通过，3是驳回\n      let statusMap = {\n        1: {\n          text: '待审核',\n          type: 'warning',\n        },\n        2: {\n          text: '审核通过',\n          type: 'success',\n        },\n        3: {\n          text: '驳回',\n          type: 'error',\n        },\n      }\n      return (\n        statusMap[this.info.join_status] || {\n          text: '未知',\n          type: 'info',\n        }\n      )\n    },\n    showTopButton() {\n      return this.showType === 'check'\n    },\n    showQuit() {\n      return this.pageShowQuit && this.info.join_status == 2\n    },\n    showJoinBtn() {\n      return this.showJoin && (this.info.join_status == '' || this.info.join_status == 3)\n    },\n    toDistance() {\n      let item = this.info\n      let distance = '位置未知'\n      return distance\n    },\n    tagList() {\n      return this.info.tag_ids_str ? this.info.tag_ids_str.split(',') : []\n    },\n    showImage() {\n      return this.info.images_array && this.info.images_array.length > 0\n        ? this.info.images_array[0]\n        : 'https://cdn-static.papa.com.cn/social/site-default.png'\n    },\n    getClass() {\n      if (this.info.rank_num < 4) {\n        return 'rank_' + this.info.rank_num\n      } else {\n        return 'rank_4'\n      }\n    },\n    showRank() {\n      return this.info.rank_num < 10\n    },\n  },\n  methods: {\n    getIcon(type, value) {\n      return this.$dict.getDictLabel('promoteLevelList', value, {\n        labelKey: type,\n      })\n    },\n    handleReserve() {\n      this.$emit('reserve', this.info)\n    },\n    toDetail() {\n      uni.navigateTo({\n        url: '/pages-sub/instructorSite/detail?instructor_site_id=' + this.info.instructor_site_id,\n      })\n    },\n    handleQuit() {\n      uni.showModal({\n        title: '提示',\n        content: '确定要取消加入吗？',\n        showCancel: true,\n        success: ({ confirm, cancel }) => {\n          if (confirm) {\n            this.handleQuitConfirm()\n          }\n        },\n      })\n    },\n    async handleQuitConfirm() {\n      let params = {\n        instructor_site_id: this.info.instructor_site_id,\n        cancel: 2,\n      }\n      let res = await joinOrQuitInstructorSite(params)\n      if (res.code !== 200) {\n        this.$toast(res.message)\n        return\n      }\n      this.$toast('取消加入成功')\n      this.$emit('refresh')\n    },\n    async handleJoinSite() {\n      let flag = await getApp().judgeIsAuth({ needReal: true })\n      if (!flag) {\n        return\n      }\n      uni.showModal({\n        title: '提示',\n        content: '加入站点后可在站点指导员列表中显示个人信息，您确定加入站点吗？',\n        showCancel: true,\n        success: ({ confirm, cancel }) => {\n          if (confirm) {\n            this.handleJoinSiteConfirm()\n          }\n        },\n      })\n    },\n    async handleJoinSiteConfirm() {\n      let params = {\n        instructor_site_id: this.info.instructor_site_id,\n        cancel: 1,\n      }\n      let res = await joinOrQuitInstructorSite(params)\n      if (res.code != 200) {\n        this.$toast(res.message)\n        return\n      }\n      uni.showToast({\n        title: '提交成功',\n        icon: 'none',\n      })\n      this.$emit('refresh')\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.list_item_out {\n  background: #fff;\n  box-shadow: 0px 1px 6px rgba(32, 60, 134, 0.07);\n  border-radius: 24rpx;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n.top {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 2rpx solid #ebedf0;\n  height: 80rpx;\n  padding: 0 24rpx;\n  font-size: 32rpx;\n  color: $hubei-text-color-primary;\n}\n.list_item {\n  position: relative;\n  box-sizing: border-box;\n  display: flex;\n  padding: 24rpx;\n  .left {\n    width: 260rpx;\n    height: 178rpx;\n    flex-grow: 0;\n    border-radius: 16rpx;\n    overflow: hidden;\n    position: relative;\n    .left-mask {\n      position: absolute;\n      width: 100%;\n      text-align: center;\n      bottom: 0;\n      height: 46rpx;\n      line-height: 46rpx;\n      background-color: $hubei-primary;\n      color: #fff;\n      font-size: 24rpx;\n    }\n  }\n\n  .image {\n    object-fit: cover;\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n\n  .right {\n    flex: 1;\n    padding-left: 26rpx;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n\n    .level {\n      padding-right: 10rpx;\n      margin-right: 16rpx;\n      height: 28rpx;\n      opacity: 1;\n      border-radius: 16rpx;\n      font-size: 22rpx;\n      font-weight: 400;\n\n      .text {\n        min-width: fit-content;\n      }\n    }\n\n    .row1 {\n      overflow: hidden;\n\n      .title {\n        font-family: PingFangSC-Regular;\n        font-size: 32rpx;\n        color: rgba(48, 49, 51, 1);\n        letter-spacing: 0;\n        line-height: 46rpx;\n        font-weight: 400;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n\n    .row2 {\n      display: flex;\n      overflow: auto;\n\n      .sport_item {\n        box-sizing: border-box;\n        flex-shrink: 0;\n        width: fit-content;\n        max-width: 100%;\n        height: 40rpx;\n        line-height: 36rpx;\n        border-radius: 4rpx;\n        margin-right: 10rpx;\n        margin-bottom: 6rpx;\n        background: $hubei-primary-light;\n        border: 1px solid $hubei-primary-disabled;\n        font-size: 24rpx;\n        color: $hubei-primary;\n        letter-spacing: 0;\n        text-align: center;\n        font-weight: 500;\n        padding: 0 20rpx;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n    }\n\n    .row3 {\n      overflow: hidden;\n      display: flex;\n      align-items: center;\n      color: #a8abb2;\n      font-size: 24rpx;\n    }\n    .row4 {\n      display: flex;\n      margin-top: 24rpx;\n      justify-content: flex-end;\n    }\n  }\n}\n\n.foo-right {\n  padding: 2rpx 24rpx;\n  flex-shrink: 0;\n  margin: 0;\n  font-size: 24rpx;\n  color: #fff;\n  border-radius: 200rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.flex_between {\n  display: flex;\n  align-items: center;\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/components/InstructorSiteItem/index.vue'\nwx.createComponent(Component)"],"names":["uni","joinOrQuitInstructorSite"],"mappings":"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"}