{"version":3,"file":"index.js","sources":["../../../../../../../../src/pages/tabbar/home/components/activityList/index.vue","../../../../../../../../uniComponent:/L1VzZXJzL2d1b3hpYW9taW5nL2NvZGUvcGFwYS1jb2RlL3BtLXluL3VuaWFwcC1zb2NpYWwtc3BvcnRzLW5ldy9zcmMvcGFnZXMvdGFiYmFyL2hvbWUvY29tcG9uZW50cy9hY3Rpdml0eUxpc3QvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view>\n    <view class=\"list-title-box\">\n      <activityListHeder :imageUrl=\"imageUrl\" @change=\"handleChange\" />\n    </view>\n    <view class=\"list-item-box\" v-for=\"(item, index) in dataList\" :key=\"index\">\n      <ActivityItem :item=\"item\" />\n    </view>\n    <view v-if=\"dataList.length == 0\">\n      <empty :marginTop=\"0\"></empty>\n    </view>\n    <view class=\"button-box\" v-if=\"dataList.length > 0\">\n      <uv-button\n        class=\"logout-btn mr-2 flex-1\"\n        type=\"primary\"\n        :plain=\"true\"\n        shape=\"circle\"\n        size=\"medium\"\n        @click=\"handleViewMore\"\n      >\n        查看更多\n      </uv-button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { getVoluntaryActivityList } from '@/api/voluntaryActivity/index'\nimport ActivityItem from '@/components/ActivityItem/index.vue'\nimport activityListHeder from './activityListHeder.vue'\nexport default {\n  name: 'activityList',\n  props: {\n    dataConfig: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  components: {\n    ActivityItem,\n    activityListHeder,\n  },\n  data() {\n    return {\n      dataList: [],\n      sort: 2, // 1:热度 2 时间 3 点赞\n    }\n  },\n  computed: {\n    imageUrl() {\n      return this.dataConfig?.headerLogoConfig?.url || ''\n    },\n  },\n  created() {\n    this.queryList(1, 10)\n  },\n  methods: {\n    async queryList(pageNo, pageSize) {\n      let params = {\n        page: pageNo,\n        size: pageSize,\n        sort: this.sort,\n      }\n      let res = await getVoluntaryActivityList(params)\n      if (res.code !== 200) {\n        this.$toast(res.message)\n        return\n      }\n      let dealData = res.data.list.map((item) => {\n        let formatObj = {\n          addressFormat: item.province_str + item.county_str + item.city_str + item.address,\n          startTime: this.$dayjs(item.c_time * 1000).format('YYYY-MM-DD HH:mm:ss'),\n        }\n        return {\n          ...formatObj,\n          ...item,\n        }\n      })\n      this.dataList = dealData\n    },\n    handleChange(e) {\n      console.log('[ e ] >', e)\n      this.sort = e == 'hot' ? 1 : 2\n      this.queryList(1, 10)\n    },\n    handleViewMore() {\n      uni.navigateTo({\n        url: '/pages-sub/activityList/index',\n      })\n    },\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.list-title-box {\n  padding: 32rpx;\n  box-sizing: border-box;\n}\n.list-item-box {\n  border-bottom: 10px solid #f7f8fa;\n  &:last-child {\n    border-bottom: none;\n  }\n}\n.button-box {\n  padding: 32rpx;\n  box-sizing: border-box;\n}\n</style>\n","import Component from '/Users/guoxiaoming/code/papa-code/pm-yn/uniapp-social-sports-new/src/pages/tabbar/home/components/activityList/index.vue'\nwx.createComponent(Component)"],"names":["getVoluntaryActivityList","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,MAAK,eAAgB,MAAW;AAChC,0BAA0B,MAAW;AACrC,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM;AAAA,MACN,SAAS,MAAM;AAAA,MAAE;AAAA,IAClB;AAAA,EACF;AAAA,EACD,YAAY;AAAA,IACV;AAAA,IACA;AAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,UAAU,CAAE;AAAA,MACZ,MAAM;AAAA;AAAA,IACR;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,WAAW;;AACT,eAAO,gBAAK,eAAL,mBAAiB,qBAAjB,mBAAmC,QAAO;AAAA,IAClD;AAAA,EACF;AAAA,EACD,UAAU;AACR,SAAK,UAAU,GAAG,EAAE;AAAA,EACrB;AAAA,EACD,SAAS;AAAA,IACD,UAAU,QAAQ,UAAU;AAAA;AAChC,YAAI,SAAS;AAAA,UACX,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM,KAAK;AAAA,QACb;AACA,YAAI,MAAM,MAAMA,4BAAAA,yBAAyB,MAAM;AAC/C,YAAI,IAAI,SAAS,KAAK;AACpB,eAAK,OAAO,IAAI,OAAO;AACvB;AAAA,QACF;AACA,YAAI,WAAW,IAAI,KAAK,KAAK,IAAI,CAAC,SAAS;AACzC,cAAI,YAAY;AAAA,YACd,eAAe,KAAK,eAAe,KAAK,aAAa,KAAK,WAAW,KAAK;AAAA,YAC1E,WAAW,KAAK,OAAO,KAAK,SAAS,GAAI,EAAE,OAAO,qBAAqB;AAAA,UACzE;AACA,iBAAO,kCACF,YACA;AAAA,QAEN,CAAA;AACD,aAAK,WAAW;AAAA,MACjB;AAAA;AAAA,IACD,aAAa,GAAG;AACd,cAAQ,IAAI,WAAW,CAAC;AACxB,WAAK,OAAO,KAAK,QAAQ,IAAI;AAC7B,WAAK,UAAU,GAAG,EAAE;AAAA,IACrB;AAAA,IACD,iBAAiB;AACfC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACN,CAAA;AAAA,IACF;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1FA,GAAG,gBAAgB,SAAS;"}