import{d as f,S as y,B as C,A as b,k as B,c as w,T as E,e as V,o as n,a as U,h as F,u as i,p as N,f as u,n as k,l as q,v as T,b as O,w as S,q as x,s as D,_ as W}from"./index-73817fb6.js";import{T as A,E as I}from"./style-6cf98c5c.js";import{u as R,a as z}from"./upload-d8b475c5.js";import{K}from"./tabs-3df7d807.js";const M={class:"button_box"},j=f({name:"WangEditor"}),H=f({...j,props:{value:{type:String,required:!0},toolbarConfig:{type:Object,required:!1,default:()=>({excludeKeys:[]})},editorConfig:{type:Object,required:!1,default:()=>({placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9...",MENU_CONF:{}})},height:{type:String,required:!1,default:"500px"},mode:{type:String,required:!1,default:"default"},hideToolBar:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showEditorAll:{type:Boolean,required:!1}},emits:["update:value","check-validate","edit"],setup(p,{expose:c,emit:d}){const l=p,o=y();C(),b(),K();const m=e=>{o.value=e};l.disabled&&B(()=>o.value.disable());const s=w({get(){return l.value},set(e){o.value.isEmpty()&&(e=""),d("update:value",e)}});l.editorConfig.MENU_CONF.uploadImage={async customUpload(e,r){if(!g())return;const t=new FormData;t.append("image",e);try{const{data:a}=await R(t);r(a.imgUrl)}catch{}},metaWithUrl:!0};const g=e=>!0;l.editorConfig.MENU_CONF.uploadVideo={async customUpload(e,r){if(!v())return;let t=new FormData;t.append("file",e);try{const{data:a}=await z(t);r(a.fileUrl)}catch{}}};const v=e=>!0,h=()=>{d("check-validate")};E(()=>{!o.value||o.value.destroy()}),c({editor:o});const _=()=>{d("edit")};return(e,r)=>{const t=V("el-button");return n(),U("div",{class:D(["editor-box",e.disabled?"editor-disabled":""])},[e.hideToolBar?N("v-if",!0):(n(),F(i(A),{key:0,class:"editor-toolbar",editor:o.value,defaultConfig:e.toolbarConfig,mode:e.mode},null,8,["editor","defaultConfig","mode"])),u(i(I),{style:k({height:e.height}),class:"editor-content",modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=a=>s.value=a),defaultConfig:e.editorConfig,mode:e.mode,onOnCreated:m,onOnBlur:h},null,8,["style","modelValue","defaultConfig","mode"]),q(O("div",M,[u(t,{type:"primary",onClick:_},{default:S(()=>[x("\u5168\u5C4F\u7F16\u8F91")]),_:1})],512),[[T,e.showEditorAll]])],2)}}});const Q=W(H,[["__scopeId","data-v-19fe6f83"],["__file","/Users/zwl/dnmp/www/frontend/ppos-sport-online/src/components/WangEditor/index.vue"]]);export{Q as W};
