import{d as I,J as T,K as w,L as j,M as K,c as b,r as C,e as d,o as E,a as D,f as a,w as p,b as l,p as h,N as M,m as B,s as P,h as Z,E as c,y as x,z as H,u as J,O,_ as G}from"./index-73817fb6.js";import{u as Q}from"./upload-d8b475c5.js";const S=n=>(x("data-v-ef94ac01"),n=n(),H(),n),W={class:"upload-box"},X={class:"upload-empty"},Y=["src"],ee=["onClick"],ue=S(()=>l("span",null,"\u67E5\u770B",-1)),se=["onClick"],te=S(()=>l("span",null,"\u5220\u9664",-1)),ae={class:"el-upload__tip"},le=I({name:"UploadImgs"}),ie=I({...le,props:{fileList:{type:Array,required:!0,default:()=>[]},api:{type:Function,required:!1},drag:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:5},fileSize:{type:Number,required:!1,default:5},fileType:{type:Array,required:!1,default:()=>["image/jpeg","image/png","image/gif"]},height:{type:String,required:!1,default:"150px"},width:{type:String,required:!1,default:"150px"},borderRadius:{type:String,required:!1,default:"8px"}},emits:["update:fileList"],setup(n,{emit:_}){const t=n;T(e=>({"ef94ac01-borderRadius":e.borderRadius,"ef94ac01-width":e.width,"ef94ac01-height":e.height}));const i=w(j,void 0),f=w(K,void 0),g=b(()=>t.disabled||(i==null?void 0:i.disabled)),m=b({set(e){_("update:fileList",e)},get(){return t.fileList}}),q=e=>{const u=e.size/1024/1024<t.fileSize,s=t.fileType;return s.includes(e.type)||c({title:"\u6E29\u99A8\u63D0\u793A",message:"\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01",type:"warning"}),u||c({title:"\u6E29\u99A8\u63D0\u793A",message:`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${t.fileSize}M\uFF01`,type:"warning"}),s.includes(e.type)&&u},k=async e=>{var s;let u=new FormData;u.append("image",e.file);try{const r=(s=t.api)!=null?s:Q,{data:v}=await r(u),y={fileUrl:v.imgUrl};e.onSuccess(y)}catch(r){e.onError(r)}},U=(e,u)=>{!e||(u.url=e.fileUrl,_("update:fileList",m.value),f!=null&&f.prop&&(i==null||i.validateField([f.prop])),c({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF01",type:"success"}))},L=e=>{let u=m.value.filter(s=>s.url!==e.url||s.name!==e.name);_("update:fileList",u)},z=()=>{c({title:"\u6E29\u99A8\u63D0\u793A",message:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01",type:"error"})},N=()=>{c({title:"\u6E29\u99A8\u63D0\u793A",message:`\u5F53\u524D\u6700\u591A\u53EA\u80FD\u4E0A\u4F20 ${t.limit} \u5F20\u56FE\u7247\uFF0C\u8BF7\u79FB\u9664\u540E\u4E0A\u4F20\uFF01`,type:"warning"})},A=C(""),F=C(!1),$=e=>{A.value=e.url,F.value=!0};return(e,u)=>{const s=d("el-icon"),r=d("ZoomIn"),v=d("Delete"),y=d("el-upload"),V=d("el-image-viewer");return E(),D("div",W,[a(y,{action:"#","list-type":"picture-card",class:P(["upload",g.value?"disabled":"",e.drag?"no-border":""]),"file-list":m.value,"onUpdate:fileList":u[1]||(u[1]=o=>m.value=o),multiple:!0,disabled:g.value,limit:e.limit,"http-request":k,"before-upload":q,"on-exceed":N,"on-success":U,"on-error":z,drag:e.drag,accept:e.fileType.join(",")},{file:p(({file:o})=>[l("img",{src:o.url,class:"upload-image"},null,8,Y),l("div",{class:"upload-handle",onClick:u[0]||(u[0]=M(()=>{},["stop"]))},[l("div",{class:"handle-icon",onClick:R=>$(o)},[a(s,null,{default:p(()=>[a(r)]),_:1}),ue],8,ee),g.value?h("v-if",!0):(E(),D("div",{key:0,class:"handle-icon",onClick:R=>L(o)},[a(s,null,{default:p(()=>[a(v)]),_:1}),te],8,se))])]),default:p(()=>[l("div",X,[B(e.$slots,"empty",{},()=>[a(s,null,{default:p(()=>[a(J(O))]),_:1}),h(" <span>\u8BF7\u4E0A\u4F20\u56FE\u7247</span> ")],!0)])]),_:3},8,["class","file-list","disabled","limit","drag","accept"]),l("div",ae,[B(e.$slots,"tip",{},void 0,!0)]),F.value?(E(),Z(V,{key:0,onClose:u[2]||(u[2]=o=>F.value=!1),"url-list":[A.value]},null,8,["url-list"])):h("v-if",!0)])}}});const re=G(ie,[["__scopeId","data-v-ef94ac01"],["__file","/Users/zwl/dnmp/www/frontend/ppos-sport-online/src/components/Upload/Imgs.vue"]]);export{re as I};
