import{d as $,A as z,r as h,$ as J,I as O,T as H,e as n,o as E,h as v,w as a,f as t,u as o,a as G,g as K,F as Q,q as d,y as W,z as X,b as L,_ as Y}from"./index-73817fb6.js";import{F as Z}from"./index-dfa22ab7.js";import{I as ee}from"./Imgs-dbc6d0a0.js";import{u as te}from"./useFormEdit-e635c879.js";import{u as ue,b as ae,c as oe}from"./project-7708919b.js";import{g as le}from"./saihui-f69ee65f.js";import"./upload-d8b475c5.js";import"./tabs-3df7d807.js";const se={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",trigger:"change"},{max:6,message:"\u6700\u591A6\u4E2A\u5B57\u7B26",trigger:"change"}],type_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE\u7C7B\u578B ",trigger:"change"}],match_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u8D5B\u4F1A ",trigger:"change"}],status:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE\u72B6\u6001 ",trigger:"change"}],imagesList:[{required:!0,message:"\u8BF7\u9009\u62E9\u6216\u4E0A\u4F20\u9879\u76EE\u56FE\u6807",trigger:"change"}],sort:[{required:!0,message:"\u8BF7\u8F93\u5165\u6392\u5E8F\u6743\u91CD",trigger:"change"}]},V=_=>(W("data-v-3715c290"),_=_(),X(),_),re=V(()=>L("span",{class:"tip"},"2M",-1)),ne=V(()=>L("span",{class:"tip"},"jpeg/jpg/png",-1)),ie=$({__name:"projectSet",setup(_){const{closeCurrent:g,ruleFormRef:F,setTitle:B,loading:j,addMethod:S,updateMethod:A}=te(),p=z(),c=h(p.query.project_id),u=J({name:"",images:"",imagesList:[],status:"1",type_id:"1",sort:0,match_id:""}),D=async s=>{s.validate(async(e,m)=>{if(e){let r=q(),i=S;c.value&&(r.project_id=c.value,i=A),(await i(c.value?ue:ae,r)).flag&&g()}})},w=()=>{g()},q=()=>{let s=JSON.parse(JSON.stringify(u)),e=s.imagesList.map(m=>m.url);return s.images=e.join(","),s.imagesList&&delete s.imagesList,s},x=async()=>{let s={project_id:c.value},e=await oe(s);if(e.code==200){u.name=e.data.name,u.status=String(e.data.status),u.sort=e.data.sort,u.type_id=String(e.data.type_id),u.match_id=e.data.match_id;let m=e.data.images.split(",").map((r,i)=>({name:String(i),url:r}));u.imagesList=m}},y=h([]),U=async()=>{let s=await le();s.code==200&&(y.value=s.data)};O(()=>{U(),p.query.project_id?(B(`\u9879\u76EE\u7F16\u8F91_${p.query.project_id}`),x()):B("\u9879\u76EE\u65B0\u589E")});const k=p.fullPath,I=p.name;return H(()=>{g(k,I)}),(s,e)=>{const m=n("el-input"),r=n("el-form-item"),i=n("el-option"),f=n("el-select"),N=n("el-input-number"),C=n("el-radio"),P=n("el-radio-group"),M=n("el-col"),b=n("el-button"),R=n("el-form");return E(),v(Z,null,{default:a(()=>[t(R,{model:o(u),rules:o(se),ref_key:"ruleFormRef",ref:F,"label-width":"120px"},{default:a(()=>[t(M,{span:10},{default:a(()=>[t(r,{label:"\u9879\u76EE\u540D\u79F0",prop:"name"},{default:a(()=>[t(m,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",modelValue:o(u).name,"onUpdate:modelValue":e[0]||(e[0]=l=>o(u).name=l)},null,8,["modelValue"])]),_:1}),t(r,{label:"\u9879\u76EE\u7C7B\u578B",prop:"type_id"},{default:a(()=>[t(f,{modelValue:o(u).type_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o(u).type_id=l),placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u9879\u76EE\u7C7B\u578B"},{default:a(()=>[t(i,{label:"\u7F51\u7EDC\u5BF9\u5F08",value:"1"}),t(i,{label:"\u98CE\u91C7\u5C55\u793A",value:"2"})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u6240\u5C5E\u8D5B\u4F1A",prop:"match_id"},{default:a(()=>[t(f,{modelValue:o(u).match_id,"onUpdate:modelValue":e[2]||(e[2]=l=>o(u).match_id=l),placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u8D5B\u4F1A"},{default:a(()=>[(E(!0),G(Q,null,K(o(y),(l,T)=>(E(),v(i,{key:T,label:l.name,value:l.match_id,disabled:l.status!==1},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u56FE\u6807",prop:"imagesList"},{default:a(()=>[t(ee,{fileList:o(u).imagesList,"onUpdate:fileList":e[3]||(e[3]=l=>o(u).imagesList=l),limit:1},{tip:a(()=>[d(" \u8BF7\u4E0A\u4F20\u5927\u5C0F\u4E0D\u8D85\u8FC7 "),re,d(" \u683C\u5F0F\u4E3A"),ne,d("\u7684\u56FE\u7247 ")]),_:1},8,["fileList"])]),_:1}),t(r,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[t(N,{modelValue:o(u).sort,"onUpdate:modelValue":e[4]||(e[4]=l=>o(u).sort=l),min:0},null,8,["modelValue"])]),_:1}),t(r,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[t(P,{modelValue:o(u).status,"onUpdate:modelValue":e[5]||(e[5]=l=>o(u).status=l)},{default:a(()=>[t(C,{label:"1"},{default:a(()=>[d("\u6B63\u5E38")]),_:1}),t(C,{label:"2"},{default:a(()=>[d("\u7981\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(r,null,{default:a(()=>[t(b,{type:"primary",loading:o(j),onClick:e[6]||(e[6]=l=>D(o(F)))},{default:a(()=>[d("\u521B\u5EFA")]),_:1},8,["loading"]),t(b,{onClick:w},{default:a(()=>[d("\u53D6\u6D88")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}});const Fe=Y(ie,[["__scopeId","data-v-3715c290"],["__file","/Users/zwl/dnmp/www/frontend/ppos-sport-online/src/views/system/projectSet.vue"]]);export{Fe as default};
