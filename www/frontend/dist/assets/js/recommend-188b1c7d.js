import{d as $,I as q,V as M,B as N,e as u,ab as H,o as g,h as b,w as t,f as e,u as o,q as r,l as Y,Y as j,t as _,_ as G}from"./index-73817fb6.js";import{I as J}from"./index-64271805.js";import{u as K}from"./useTable-c08e9eeb.js";import{u as h}from"./useHandleData-a9a9d16a.js";import{t as O,v as Q,w as W}from"./operatManage-c4d273ad.js";import{u as X}from"./index-1eb1379c.js";const Z=$({__name:"recommend",setup(ee){const D=n=>(n.list.map(a=>{a.publish_str="\u53D1\u5E03",a.status==1&&(a.publish_str="\u505C\u7528"),a.status==2&&(a.publish_str="\u53D1\u5E03")}),n),{tableData:F,pageable:d,searchParam:i,handleSizeChange:k,handleCurrentChange:z,getTableList:p,search:v,renderEmpty:B,loading:E}=K(O,D);q(()=>{p()}),M(()=>i,X(p,300),{deep:!0});const C=N(),x=()=>{C.push({name:"addRecommend"})},A=n=>{C.push({name:"addRecommend",query:{recommend_id:n.recommend_id,type:"edit"}})},V=async n=>{let a="\u5220\u9664\u5F53\u524D\u63A8\u8350";await h(Q,{recommend_id:n.recommend_id},a),p()},R=async n=>{let a="\u66F4\u65B0\u5F53\u524D\u63A8\u8350\u72B6\u6001",c=n.status==1?2:1;await h(W,{recommend_id:n.recommend_id,status:c},a),p()};return(n,a)=>{const c=u("el-input"),f=u("el-form-item"),y=u("el-option"),S=u("el-select"),m=u("el-button"),U=u("el-form"),s=u("el-table-column"),P=u("el-tag"),I=u("el-table"),L=u("el-pagination"),T=H("loading");return g(),b(J,null,{filter:t(()=>[e(U,{model:o(i)},{default:t(()=>[e(f,{class:"filter_item w_300"},{default:t(()=>[e(c,{modelValue:o(i).keyword,"onUpdate:modelValue":a[0]||(a[0]=l=>o(i).keyword=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1}),e(f,{class:"filter_item"},{default:t(()=>[e(S,{modelValue:o(i).status,"onUpdate:modelValue":a[1]||(a[1]=l=>o(i).status=l),clearable:"",placeholder:"\u72B6\u6001"},{default:t(()=>[e(y,{label:"\u5DF2\u53D1\u5E03",value:"1"}),e(y,{label:"\u672A\u53D1\u5E03",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(f,{class:"filter_item"},{default:t(()=>[e(m,{type:"primary",onClick:o(v)},{default:t(()=>[r("\u641C\u7D22")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),operation:t(()=>[e(m,{type:"primary",onClick:x},{default:t(()=>[r("\u65B0\u589E")]),_:1})]),table:t(()=>[Y((g(),b(I,{data:o(F),size:"small",border:"",style:{width:"100%"}},{empty:t(()=>[(g(),b(j(o(B))))]),default:t(()=>[e(s,{label:"\u5E8F\u53F7",type:"index"}),e(s,{label:"\u63A8\u8350\u6807\u9898",prop:"name"}),e(s,{label:"\u6240\u5C5E\u8D5B\u4F1A",prop:"company_id"}),e(s,{label:"\u72B6\u6001"},{default:t(l=>[e(P,{type:l.row.status==1?"success":"danger","disable-transitions":""},{default:t(()=>[r(_(l.row.status_str),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"\u63A8\u8350\u65F6\u95F4",prop:"organizational_unit"},{default:t(l=>[r(_(l.row.start_date)+" \u81F3 "+_(l.row.end_date),1)]),_:1}),e(s,{label:"\u64CD\u4F5C\u4EBA",prop:"operator"}),e(s,{label:"\u64CD\u4F5C\u65F6\u95F4",prop:"u_time"}),e(s,{label:"\u63A8\u8350\u6743\u91CD",prop:"sort"}),e(s,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"160"},{default:t(l=>[e(m,{link:"",type:"primary",size:"small",onClick:w=>R(l.row)},{default:t(()=>[r(_(l.row.publish_str),1)]),_:2},1032,["onClick"]),e(m,{link:"",type:"primary",size:"small",onClick:w=>A(l.row)},{default:t(()=>[r(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(m,{link:"",type:"danger",size:"small",onClick:w=>V(l.row)},{default:t(()=>[r(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,o(E)]])]),pagination:t(()=>[e(L,{"current-page":o(d).page,"onUpdate:currentPage":a[2]||(a[2]=l=>o(d).page=l),"page-size":o(d).size,"onUpdate:pageSize":a[3]||(a[3]=l=>o(d).size=l),"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next",total:o(d).count,onSizeChange:o(k),onCurrentChange:o(z)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1})}}}),se=G(Z,[["__file","/Users/zwl/dnmp/www/frontend/ppos-sport-online/src/views/operatManage/recommend.vue"]]);export{se as default};
