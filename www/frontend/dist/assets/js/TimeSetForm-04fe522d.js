import{d as k,$ as b,V as Y,e as r,o as B,h as V,w as i,f as a,u as f,q as D,x as d,_ as T}from"./index-73817fb6.js";import{u as v}from"./useFormEdit-e635c879.js";import{t as M}from"./argumentSet-949d3ebc.js";import{g as A}from"./common-a24ad4a0.js";import"./tabs-3df7d807.js";const x=k({__name:"TimeSetForm",props:{matchId:{type:[String,Number]},type:{type:[String,Number]}},emits:["submit","cancel"],setup(w,{emit:s}){const n=w,{closeCurrent:S,ruleFormRef:F,setTitle:j}=v(),t=b({apply_time:[],upload_time:[],match_time:[],like_count_time:[],awards_time:""}),y=async()=>{let u=await A({match_id:n.matchId,type:n.type});if(u.code==200){let e={};u.data.map(l=>{e[l.field_name]=l.value}),t.apply_time=[e.apply_start_time,e.apply_end_time],t.upload_time=[e.upload_start_time,e.upload_end_time],t.match_time=[e.match_start_time,e.match_end_time],t.like_count_time=[e.like_count_start_time,e.like_count_end_time],t.awards_time=e.awards_time}};Y(()=>n.matchId,u=>{y()},{immediate:!0});const c=()=>({apply_start_time:t.apply_time[0],apply_end_time:t.apply_time[1],upload_start_time:t.upload_time[0],upload_end_time:t.upload_time[1],match_start_time:t.match_time[0],match_end_time:t.match_time[1],like_count_start_time:t.like_count_time[0],like_count_end_time:t.like_count_time[1],awards_time:t.awards_time}),g=()=>{let u=c(),e=new Date(u.apply_start_time).getTime();new Date(u.apply_end_time).getTime(),new Date(u.match_start_time).getTime(),new Date(u.match_end_time).getTime();let l=new Date(u.upload_start_time).getTime();new Date(u.upload_end_time).getTime();let m=new Date(u.like_count_start_time).getTime(),p=new Date(u.like_count_end_time).getTime(),_=new Date(u.awards_time).getTime();return l<e?(d.warning("\u4E0A\u4F20\u4F5C\u54C1\u65F6\u95F4\u5E94\u5927\u4E8E\u62A5\u540D\u5F00\u59CB\u65F6\u95F4"),!1):m<l?(d.warning("\u5206\u6570\u7EDF\u8BA1\u671F\u5F00\u59CB\u65F6\u95F4\u5E94\u5927\u4E8E\u4F5C\u54C1\u4E0A\u4F20\u5F00\u59CB\u65F6\u95F4"),!1):_<p?(d.warning("\u8BC1\u4E66\u9881\u53D1\u65F6\u95F4\u5E94\u5927\u4E8E\u5206\u6570\u7EDF\u8BA1\u7ED3\u675F\u65F6\u95F4"),!1):!0},h=async u=>{u.validate((e,l)=>{if(e){if(!g())return;let m=c();s("submit",JSON.stringify(m))}})},E=()=>{s("cancel")};return(u,e)=>{const l=r("el-date-picker"),m=r("el-form-item"),p=r("el-col"),_=r("el-button"),C=r("el-form");return B(),V(C,{model:t,rules:f(M),ref_key:"ruleFormRef",ref:F,"label-width":"140px"},{default:i(()=>[a(p,{span:16,style:{"max-width":"800px"}},{default:i(()=>[a(m,{label:"\u62A5\u540D\u65F6\u95F4",prop:"apply_time"},{default:i(()=>[a(l,{modelValue:t.apply_time,"onUpdate:modelValue":e[0]||(e[0]=o=>t.apply_time=o),type:"datetimerange","value-format":"YYYY-MM-DD hh:mm:ss","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u4E0A\u4F20\u4F5C\u54C1\u65F6\u95F4",prop:"upload_time"},{default:i(()=>[a(l,{modelValue:t.upload_time,"onUpdate:modelValue":e[1]||(e[1]=o=>t.upload_time=o),type:"datetimerange","value-format":"YYYY-MM-DD hh:mm:ss","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u6BD4\u8D5B\u65F6\u95F4",prop:"match_time"},{default:i(()=>[a(l,{modelValue:t.match_time,"onUpdate:modelValue":e[2]||(e[2]=o=>t.match_time=o),type:"datetimerange","value-format":"YYYY-MM-DD hh:mm:ss","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u70B9\u8D5E\u6570\u636E\u7EDF\u8BA1\u671F",prop:"like_count_time"},{default:i(()=>[a(l,{modelValue:t.like_count_time,"onUpdate:modelValue":e[3]||(e[3]=o=>t.like_count_time=o),type:"datetimerange","value-format":"YYYY-MM-DD hh:mm:ss","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u8BC1\u4E66\u9881\u53D1\u65F6\u95F4",prop:"awards_time"},{default:i(()=>[a(l,{modelValue:t.awards_time,"onUpdate:modelValue":e[4]||(e[4]=o=>t.awards_time=o),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"\u9881\u53D1\u65F6\u95F4"},null,8,["modelValue"])]),_:1})]),_:1}),a(m,null,{default:i(()=>[a(_,{type:"primary",onClick:e[5]||(e[5]=o=>h(f(F)))},{default:i(()=>[D("\u521B\u5EFA")]),_:1}),a(_,{onClick:E},{default:i(()=>[D("\u53D6\u6D88")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),O=T(x,[["__file","/Users/zwl/dnmp/www/frontend/ppos-sport-online/src/views/system/components/TimeSetForm.vue"]]);export{O as default};
